<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MTB CAT1 Peripheral driver library: TCPWM        (Timer Counter PWM)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MTB CAT1 Peripheral driver library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__tcpwm.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">TCPWM (Timer Counter PWM)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>The TCPWM driver is a multifunction driver that implements Timer Counter, PWM, Quadrature Decoder and Shift Register functionality using the TCPWM block. </p>
<p>The functions and other declarations used in this driver are in cy_tcpwm_counter.h, cy_tcpwm_pwm.h, cy_tcpwm_quaddec.h, cy_tcpwm_shiftreg.h respectively. Include cy_pdl.h to get access to all functions and declarations in the PDL.</p>
<p>Each TCPWM block is a collection of counters that can all be triggered simultaneously. For each function call, the base register address of the TCPWM being used must be passed first, followed by the index of the counter you want to touch next.</p>
<p>The TCPWM supports seven function modes:</p><ul>
<li>Timer</li>
<li>Capture</li>
<li>Quadrature Decoder</li>
<li>Pulse Width Modulation (PWM)</li>
<li>PWM with dead time insertion (PWMDT)</li>
<li>Pseudo random PWM (PWMPR)</li>
<li>Shift Register</li>
</ul>
<p>The TCPWM driver is structured to map these seven fuctional modes to four high level operating modes:</p><ul>
<li>Timer/Counter (includes Timer, Capture modes)</li>
<li>PWM (PWM, PWMDT, PWMPR)</li>
<li>Quadrature Decoder</li>
<li>Shift Register</li>
</ul>
<p>A brief description on each of the operating modes:</p>
<p><b>Timer/Counter</b> </p>
<p>Use this mode whenever a specific timing interval or measurement is needed. Examples include:</p><ul>
<li>Creating a periodic interrupt for running other system tasks</li>
<li>Measuring frequency of an input signal</li>
<li>Measuring pulse width of an input signal</li>
<li>Measuring time between two external events</li>
<li>Counting events</li>
<li>Triggering other system resources after x number events</li>
<li>Capturing time stamps when events occur</li>
</ul>
<p><br />
<b>PWM</b> </p>
<p>Use this mode when an output square wave is needed with a specific period and duty cycle, such as:</p><ul>
<li>Creating arbitrary square wave outputs</li>
<li>Driving an LED (changing the brightness)</li>
<li>Driving Motors (dead time assertion available)</li>
</ul>
<p><br />
<b>Quadrature</b> <b>Decoder</b> </p>
<p>A quadrature decoder is used to decode the output of a quadrature encoder. A quadrature encoder senses the position, velocity, and direction of an object (for example a rotating axle, or a spinning mouse ball). A quadrature decoder can also be used for precision measurement of speed, acceleration, and position of a motor's rotor, or with a rotary switch to determine user input. <br />
 <br />
<b>Shift</b> <b>Register</b> </p>
<p>Shift Register functionality shifts the counter value to the right. A shift register is used to apply a signal delay function which can be used eg: in detecting frequency shift keying (FSK) signals. A shift register is also used in parallel-in to serial-out data conversion and serial-in to parallel-out data conversion.</p>
<h1><a class="anchor" id="group_tcpwm_version_information"></a>
TCPWM Versions</h1>
<p>There are two versions of TCPWM driver</p>
<p><b>TCPWM</b> <b>Version</b> <b>2</b> </p>
<ul>
<li>Devices CY8C61x4 and CY8C62x4 use this version.</li>
<li>Supports up to four counter groups (check TRM for actual number of groups supported)</li>
<li>Each counter group consists of up to 256 counters (check TRM for actual number of counters supported)</li>
<li>Each counter<ul>
<li>Can run in one of seven function modes</li>
<li>Supports various counting modes:<ul>
<li>One-shot mode, Continuous mode (Up/Down/Up-down)</li>
</ul>
</li>
<li>Selects input signals<ul>
<li>Start, Reload, Stop, Count, and two Capture event signals</li>
</ul>
</li>
<li>Generates output signals:<ul>
<li>Two output triggers, PWM output, and Interrupt</li>
</ul>
</li>
<li>Trigger Outputs (TR_OUT0/1) and an Interrupt on an event<ul>
<li>Overflow (OV)</li>
<li>Underflow (UN)</li>
<li>Terminal Count (TC)</li>
<li>CC0/1_MATCH</li>
<li>LINE_OUT</li>
</ul>
</li>
<li>Supports debug mode</li>
<li>Each counter can produce two output signals</li>
</ul>
</li>
</ul>
<div class="image">
<img src="tcpwm_v2_block_diagram.png" alt="tcpwm_v2_block_diagram.png"/>
</div>
<ul>
<li><b>Input</b> <b>Trigger</b> <b>Selection</b> <b>and</b> <b>Event</b> <b>Detection</b> <ul>
<li>The counter control signals are generated as follows:<ul>
<li>Selects input signals from two types of trigger multiplexer signals<ul>
<li>Group trigger and one-to-one trigger</li>
<li>The constant '1' and '0' are also used as input triggers</li>
</ul>
</li>
<li>Detects the selected edge from four types<ul>
<li>Rising edge/falling edge/any edge/no edge</li>
</ul>
</li>
<li>Supports software (SW) command<ul>
<li>SW command of Trigger Multiplexer/SW command of TCPWM</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="image">
<img src="tcpwm_v2_input_trigger_sel.png" alt="tcpwm_v2_input_trigger_sel.png"/>
</div>
<ul>
<li><b>Simultaneous</b> <b>Activation:</b> <ul>
<li>When a Trigger Multiplexer block SW command is used, the TCPWM counters can be activated at the same time</li>
</ul>
</li>
</ul>
<div class="image">
<img src="tcpwm_v2_trigger_simultaneously.png" alt="tcpwm_v2_trigger_simultaneously.png"/>
</div>
<p><b>TCPWM</b> <b>Version</b> <b>1</b> </p>
<ul>
<li>Devices CY8C61x6, CY8C61x7, CY8C62x5, CY8C62x6, CY8C62x7, CY8C62x8, CY8C62xA, CY8C63x6, CY8C63x7, CYS0644xxZI-S2D44, CYB0644xxZI-S4D44, CYB06447BZI-BLDX, CYB06447BZI-D54 and CYB06445LQI-S3D42 use this version.</li>
<li>Supports up to 32 counters (check TRM for actual number of counters supported)</li>
<li>Synchronized operation of multiple counters.</li>
<li>16 or 32 bit counter, compare/capture (CC) and period registers.</li>
<li>CC and period registers are double buffered.</li>
<li>Up, down and up/down counting modes.</li>
<li>14 trigger input signals and 2 constant input signals: '0' and '1', for a total of 16 hardware (HW) input signals</li>
<li>Rising edge, falling edge, combined rising/falling edge detection or pass-through on all HW input signals to derive counter events.</li>
<li>The start, reload, stop and capture events can be generated by software.</li>
<li>Clock pre-scaling (1x, 2x, 4x ... 128x).</li>
<li>Support Pseudo Random PWM</li>
<li>3 output trigger signals for each counter to indicate underflow, overflow and cc_match events.</li>
<li>2 PWM complementary output lines for each counter. Dead time insertion ([0, 255] counter cycles).</li>
<li>Support one interrupt output for each counter.</li>
</ul>
<div class="image">
<img src="tcpwm_v1_block_diagram.png" alt="tcpwm_v1_block_diagram.png"/>
</div>
<ul>
<li>Many functions work with an individual counter. You can also manage multiple counters simultaneously for certain functions.</li>
<li>These are listed in the <a class="el" href="group__group__tcpwm__functions__common.html">Functions</a> section of the TCPWM.</li>
<li>You can enable, disable, or trigger (in various ways) multiple counters simultaneously.</li>
<li>For these functions you provide a bit field representing each counter in the TCPWM you want to control.</li>
<li>You can represent the bit field as an ORed mask of each counter, like ((1U &lt;&lt; cntNumX) | (1U &lt;&lt; cntNumX) | (1U &lt;&lt; cntNumX)), where X is the counter number from 0 to 31.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>If none of the input terminals (start, reload(index)) are used, the software event <a class="el" href="group__group__tcpwm__functions__common.html#gabeb6819a4ac18f04f943a70c44b2bbb9">Cy_TCPWM_TriggerStart</a> or <a class="el" href="group__group__tcpwm__functions__common.html#ga8f4ab67e3946d84d77b54e0375eb0e48">Cy_TCPWM_TriggerReloadOrIndex</a> must be called to start the counting.</li>
<li>If count input terminal is not used, the <a class="el" href="group__group__tcpwm__input__modes.html#ga6f8ffc8c36941d7d44290147032fd33b">CY_TCPWM_INPUT_LEVEL</a> macro should be set for the countInputMode parameter and the <a class="el" href="group__group__tcpwm__input__selection.html#ga7369f85b221bf7c70e1a580daa6a6bef">CY_TCPWM_INPUT_1</a> macro should be set for the countInput parameter in the configuration structure of the appropriate mode(Counter <a class="el" href="group__group__tcpwm__data__structures__counter.html">Data Structures</a>, PWM <a class="el" href="group__group__tcpwm__data__structures__pwm.html">Data Structures</a>, QuadDec <a class="el" href="group__group__tcpwm__data__structures__quaddec.html">Data Structures</a>, or Shift Register <a class="el" href="group__group__tcpwm__data__structures__shiftreg.html">Data Structures</a>).</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="group_tcpwm_more_information"></a>
More Information</h1>
<p>For more information on the TCPWM peripheral, refer to the technical reference manual (TRM).</p>
<h1><a class="anchor" id="group_tcpwm_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.30 </td><td>Added new option to Swap Overflow/Underflow behavior in PWM Centre/Asymmetric Alignment modes. </td><td>New feature.  </td></tr>
<tr>
<td>1.20 </td><td>Added new features: Shift Register, New QuadDec modes, Additional Compare/Capture Buffer. </td><td>New silicon family support.  </td></tr>
<tr>
<td>1.10.2 </td><td>Minor documentation updates. </td><td>Documentation enhancement.  </td></tr>
<tr>
<td>1.10.1 </td><td>Added header guards CY_IP_MXTCPWM. </td><td>To enable the PDL compilation with wounded out IP blocks.  </td></tr>
<tr>
<td rowspan="2">1.10 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory.  </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td>Added register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>1.0.1 </td><td>Added a deviation to the MISRA Compliance section. Added function-level code snippets. </td><td>Documentation update and clarification  </td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__tcpwm__common"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__common.html">Common</a></td></tr>
<tr class="memdesc:group__group__tcpwm__common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common API for the Timer Counter PWM Block. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__counter"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__counter.html">Timer/Counter (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__counter"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for Timer/Counter. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__pwm"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__pwm.html">PWM (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__pwm"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for PWM. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__quaddec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__quaddec.html">Quadrature Decoder (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__quaddec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for Quadrature Decoder. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__shiftreg"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__shiftreg.html">Shift Register (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__shiftreg"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for Shift Register. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>MTB CAT1 Peripheral driver library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>


<!--****************************************************************************
* \file pwm_v2.cypersonality
* \version 1.0
*
* \brief
* PWM personality description file.
*
********************************************************************************
* \copyright
* (c) 2018-2026, Infineon Technologies AG or an affiliate of
* Infineon Technologies AG.
* SPDX-License-Identifier: Apache-2.0
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*****************************************************************************-->

<PersonalityTemplate id="mxs40pwm_ver2" name="PWM" version="1.0" xmlns="http://cypress.com/xsd/cyhwpersonality_v10">
  <FittingRules>
    <MappingRules>
      <IpBlock name="mxtcpwm_ver2,mxs40tcpwm" />
      <Resource name="tcpwm\.group\.cnt" />
      <OperatingMode value="MCU"/>
    </MappingRules>
  </FittingRules>
  <ExposedMembers />
  <Parameters>
    <!-- PDL documentation -->
    <ParamDoc id="pdlDoc" name="Configuration Help" group="Overview" default="file:///`${cy_libs_path()}`/docs/pdl_api_reference_manual/html/group__group__tcpwm__pwm.html" linkText="Open PWM (TCPWM) Documentation" visible="true" desc="Opens the Peripheral Driver Library Documentation" />

    <!--General-->
    <ParamRange id="pCntGroup" name="pCntGroup" desc="pCntGroup" group="Internal"  default="`${getInstNumber(&quot;group&quot;)}`" min="0" max="3" resolution="1" visible="false" editable="false" />
    <ParamRange id="pMaxGroupCount" name="pMaxGroupCount" desc="pMaxGroupCount" group="Internal"  default="4" min="0" max="4" resolution="1" visible="false" editable="false" />
    <ParamString id="pCntWidthEx" name="pCntWidthEx" desc="pCntWidthEx" group="Internal"  default="GRP_NR[`${pCntGroup}`].CNT.GRP_CNT_WIDTH" visible="false" editable="false" />
    <ParamRange id="pCntWidth" name="pCntWidth" desc="pCntWidth" group="Internal"  default="`${lookupExpression(pCntWidthEx)}`" min="0" max="32" resolution="1" visible="false" editable="false" />
    <ParamRange id="pCntWidthMax" name="pCntWidthMax" desc="pCntWidthMax" group="Internal"  default="`${pow(2, pCntWidth)-1}`" min="0" max="4294967296" resolution="1" visible="false" editable="false" />
    <ParamRange id="tcpwmInst" name="TCPWM Number" group="Internal" default="`${getInstNumber(&quot;tcpwm&quot;)}`" min="0" max="3" resolution="1" visible="false" editable="false" desc="" />
    <ParamRange id="cntInst" name="CNT Number" group="Internal" default="`${getInstNumber(&quot;cnt&quot;) + pCntGroup * 256}`" min="0" max="1023" resolution="1" visible="false" editable="false" desc="" />
    <ParamString id="pCntCC1Ex" name="pCntCC1Ex" desc="pCntCC1Ex" group="Internal" default="GRP_NR[`${pCntGroup}`].CNT.GRP_CC1_PRESENT" visible="false" editable="false" />
    <ParamBool id="pCntCC1" name="pCntCC1" desc="pCntCC1" group="Internal" default="`${lookupExpression(pCntCC1Ex) eq 1}`" visible="false" editable="false" />
    <ParamString id="pCntAMCEx" name="pCntAMCEx" desc="pCntAMCEx" group="Internal" default="GRP_NR[`${pCntGroup}`].CNT.GRP_AMC_PRESENT" visible="false" editable="false" />
    <ParamBool id="pCntAMC" name="pCntAMC" desc="pCntAMC" group="Internal" default="`${lookupExpression(pCntAMCEx) eq 1}`" visible="false" editable="false" />

    <ParamString id="TCPWM_version" name="TCPWM Version" group="General" default="TCPWM_ver2" visible="false" editable="false" desc="Version of the TCPWM hardware block"/>

    <ParamChoice id="PwmMode" name="PWM Mode" group="General" default="CY_TCPWM_PWM_MODE_PWM" visible="true" editable="true" desc="Selects the PWM mode of operation.">
      <Entry name="PWM" value="CY_TCPWM_PWM_MODE_PWM" visible="true" />
      <Entry name="PWM Dead Time" value="CY_TCPWM_PWM_MODE_DEADTIME" visible="true" />
      <Entry name="PWM Pseudo random" value="CY_TCPWM_PWM_MODE_PSEUDORANDOM" visible="`${(&quot;mxs40tcpwm&quot; ne getIpBlockName())}`" />
    </ParamChoice>
    <ParamBool id="pPwmNePrs" name="pPwmNePrs" desc="pPwmNePrs" group="Internal" default="`${PwmMode ne CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" visible="false" editable="false" />

    <ParamChoice id="ClockPrescaler" name="Clock Prescaler" group="General" default="CY_TCPWM_PWM_PRESCALER_DIVBY_1" visible="`${(PwmMode ne CY_TCPWM_PWM_MODE_DEADTIME) || (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="true" desc="Divides down the input clock." >
      <Entry name="Divide by 1" value="CY_TCPWM_PWM_PRESCALER_DIVBY_1" visible="true" />
      <Entry name="Divide by 2" value="CY_TCPWM_PWM_PRESCALER_DIVBY_2" visible="true" />
      <Entry name="Divide by 4" value="CY_TCPWM_PWM_PRESCALER_DIVBY_4" visible="true" />
      <Entry name="Divide by 8" value="CY_TCPWM_PWM_PRESCALER_DIVBY_8" visible="true" />
      <Entry name="Divide by 16" value="CY_TCPWM_PWM_PRESCALER_DIVBY_16" visible="true" />
      <Entry name="Divide by 32" value="CY_TCPWM_PWM_PRESCALER_DIVBY_32" visible="true" />
      <Entry name="Divide by 64" value="CY_TCPWM_PWM_PRESCALER_DIVBY_64" visible="true" />
      <Entry name="Divide by 128" value="CY_TCPWM_PWM_PRESCALER_DIVBY_128" visible="true" />
    </ParamChoice>
    <ParamChoice id="Resolution" name="PWM Resolution" group="General" default="`${(pCntWidth eq 16) ? &quot;CY_TCPWM_PWM_RESOLUTION_WIDTH_16_BITS&quot; : &quot;CY_TCPWM_PWM_RESOLUTION_WIDTH_32_BITS&quot;}`" visible="true" editable="false" desc="Selects the width of the PWM.">
      <Entry name="16-bits" value="CY_TCPWM_PWM_RESOLUTION_WIDTH_16_BITS" visible="true" />
      <Entry name="32-bits" value="CY_TCPWM_PWM_RESOLUTION_WIDTH_32_BITS" visible="true" />
    </ParamChoice>
    <ParamChoice id="PwmAlignment" name="PWM Alignment" group="General" default="CY_TCPWM_PWM_LEFT_ALIGN" visible="`${pPwmNePrs}`" editable="true" desc="Selects which direction the PWM counts in. Left = Up, Right = Down, Center/Asymmetric = Up/Down." >
      <Entry name="Left Aligned" value="CY_TCPWM_PWM_LEFT_ALIGN" visible="true" />
      <Entry name="Right Aligned" value="CY_TCPWM_PWM_RIGHT_ALIGN" visible="true" />
      <Entry name="Center Aligned" value="CY_TCPWM_PWM_CENTER_ALIGN" visible="true" />
      <Entry name="Asymmetric" value="CY_TCPWM_PWM_ASYMMETRIC_ALIGN" visible="true" />
      <Entry name="Asymmetric CC0 &amp; CC1" value="CY_TCPWM_PWM_ASYMMETRIC_CC0_CC1_ALIGN" visible="`${pCntAMC}`" />
      <Entry name="Center Asymmetric CC0 &amp; CC1" value="CY_TCPWM_PWM_CENTER_ASYMMETRIC_CC0_CC1_ALIGN" visible="`${pCntAMC}`" />
    </ParamChoice>
    <ParamBool id="SwapUnderflowOverflow" name="Swap Underflow Overflow Set/Clear" group="General" default="false" visible="`${((pPwmNePrs) &amp;&amp; ((PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN)))}`" editable="true" desc="If checked on underflow event, output is SET and on overflow event output is CLEAR." />
    <ParamChoice id="RunMode" name="Run Mode" group="General" default="CY_TCPWM_PWM_CONTINUOUS" visible="true" editable="true" desc="If Continuous is selected counter runs forever. If One Shot is selected counter runs for one period and stops.">
      <Entry name="Continuous" value="CY_TCPWM_PWM_CONTINUOUS" visible="true" />
      <Entry name="One Shot" value="CY_TCPWM_PWM_ONESHOT" visible="true" />
    </ParamChoice>
    <ParamRange id="DeadClocks" name="Dead Time Clocks" group="General" default="0" min="0" max="`${(pCntAMC) ? 65535 : 255}`" resolution="1" visible="`${PwmMode eq CY_TCPWM_PWM_MODE_DEADTIME}`" editable="true" desc="Number of clock cycles of dead time between PWM outputs. Range: 0-255 on standard PWM or 0-65535 on PWM with advanced motor control." />
    <ParamRange id="DeadClocks_compl" name="Line Compl Dead Time Clock" group="General" default="0" min="0" max="`${(pCntAMC) ? 65535 : 255}`" resolution="1" visible="`${PwmMode eq CY_TCPWM_PWM_MODE_DEADTIME}`" editable="true" desc="Number of clock cycles of dead time between PWM linecmpl outputs. Range: 0-255 on standard PWM or 0-65535 on PWM with advanced motor control." />
    <ParamRange id="DeadClocksBuff" name="Dead Time Clocks Buff" group="General" default="0" min="0" max="`${(pCntAMC) ? 65535 : 255}`" resolution="1" visible="`${(PwmMode eq CY_TCPWM_PWM_MODE_DEADTIME) &amp;&amp; (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="true" desc="Buffered PWM Dead time values. Sames as Dead CLocks." />
    <ParamRange id="DeadClocksBuff_compl" name="Line Compl DT Clock Buff" group="General" default="0" min="0" max="`${(pCntAMC) ? 65535 : 255}`" resolution="1" visible="`${(PwmMode eq CY_TCPWM_PWM_MODE_DEADTIME) &amp;&amp; (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="true" desc="Buffered PWM Dead time value for line compl output." />
    <ParamBool id="swap_enable" name="Swapping Enable" group="General" default="false" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" desc="Specifies whether swapping mechanism between CC0 and buffered CC0, CC1 and buffered CC1, PERIOD and buffered PERIOD, DT and buffered DT is enabled. " />

    <ParamChoice id="kill_line_polarity" name="Kill Line Polarity" group="General" default="CY_TCPWM_LINEOUT_AND_LINECMPOUT_IS_LOW" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="true" desc="Specifies the behavior of the PWM outputs line_out and line_out_compl_out during kill." >
      <Entry name="Line Out and Line Complimentary Out is Low" value="CY_TCPWM_LINEOUT_AND_LINECMPOUT_IS_LOW" visible="true" />
      <Entry name="Line Out is High and Line Complimentary Out is Low" value="CY_TCPWM_LINEOUT_IS_HIGH_AND_LINECMPOUT_IS_LOW" visible="true" />
      <Entry name="Line Out is Low and Line Complimentary Out is High" value="CY_TCPWM_LINECMPOUT_IS_HIGH_LINEOUT_IS_LOW" visible="true" />
      <Entry name="Line Out and Line Complimentary Out is High" value="CY_TCPWM_LINEOUT_AND_LINECMPOUT_IS_HIGH" visible="true" />
    </ParamChoice>

    <!--Glitch Filter-->
    <ParamBool id="gf_enable" name="Glitch Filter Enable" group="Glitch Filter" default="false" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" desc="Enables Glitch filter for input triggers. The Number of glitch filters is design specific and if there is a glitch filter connected to this input trigger it will be used. " />

    <ParamChoice id="gf_depth" name="Glitch Filter Depth" group="Glitch Filter" default="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_0" visible="`${(gf_enable) &amp;&amp; (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" editable="`${(gf_enable)}`" desc="Glitch filter depth support values.GF depth set for one to one triggers will be applied to specific trigger and GF depth set for general purpose trigger will be applicable for all general purpose triggers" >
      <Entry name="Depth Value 0"   value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_0"   visible="true" />
      <Entry name="Depth Value 1"   value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_1"   visible="true" />
      <Entry name="Depth Value 2"   value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_2"   visible="true" />
      <Entry name="Depth Value 4"   value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_4"   visible="true" />
      <Entry name="Depth Value 8"   value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_8"   visible="true" />
      <Entry name="Depth Value 16"  value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_16"  visible="true" />
      <Entry name="Depth Value 32"  value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_32"  visible="true" />
      <Entry name="Depth Value 64"  value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_64"  visible="true" />
      <Entry name="Depth Value 128" value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_128" visible="true" />
      <Entry name="Depth Value 256" value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_256" visible="true" />
      <Entry name="Depth Value 512" value="CY_GLITCH_FILTER_DEPTH_SUPPORT_VALUE_512" visible="true" />
    </ParamChoice>

    <!--Period-->
    <ParamBool id="EnablePeriodSwap" name="Enable Period Swap" group="Period" default="false" visible="`${!(PwmMode eq CY_TCPWM_PWM_MODE_PSEUDORANDOM)}`" editable="true" desc="Specifies switching of the PERIOD and buffered PERIOD values. If checked switch on a terminal count event with and actively pending switch event, otherwise never switch." />
    <ParamRange id="Period0" name="`${EnablePeriodSwap ? &quot;Period 0&quot; : &quot;Period&quot;}`" group="Period" default="32768" min="0" max="`${pCntWidthMax}`" resolution="1" visible="true" editable="true" desc="Sets the period of the counter. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />
    <ParamRange id="Period1" name="Period 1" group="Period" default="32768" min="0" max="`${pCntWidthMax}`" resolution="1" visible="`${EnablePeriodSwap}`" editable="true" desc="Sets the period of the counter. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />

    <!--Taps Enabled-->
    <ParamRange id="TapsEnabled" name="Taps Enabled" group="Taps Enabled" default="45" min="0" max="`${pCntWidthMax}`" resolution="1" visible="`${PwmMode eq CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" editable="true" desc="Sets the tap value. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />

    <!--Compare-->
    <ParamBool id="EnableCompare0Swap" name="Enable Compare 0 Swap" group="Compare" default="false" visible="true" editable="true" desc="Specifies switching of the CC0 and buffered CC0 values. If checked switch on a terminal count event with an actively pending switch event, otherwise never switch." />
    <ParamRange id="Compare0" name="Compare 0" group="Compare" default="16384" min="0" max="`${pCntWidthMax}`" resolution="1" visible="true" editable="true" desc="Sets the compare value. When the count value equals the compare the compare output pulses high. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />
    <ParamRange id="Compare1" name="Compare 0 Buff" group="Compare" default="16384" min="0" max="`${pCntWidthMax}`" resolution="1" visible="`${EnableCompare0Swap}`" editable="true" desc="Sets the buffered compare value. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />

    <!--Compare1-->
    <ParamBool id="EnableCompare1Swap" name="Enable Compare 1 Swap" group="Compare" default="false" visible="`${pCntCC1}`" editable="true" desc="Specifies switching of the CC1 and buffered CC1 values. If checked switch on a terminal count event with an actively pending switch event, otherwise never switch." />
    <ParamRange id="Compare2" name="Compare 1" group="Compare" default="16384" min="0" max="`${pCntWidthMax}`" resolution="1" visible="`${pCntCC1}`" editable="true" desc="Sets the compare value. When the count value equals the compare the compare output pulses high. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />
    <ParamRange id="Compare3" name="Compare 1 Buff" group="Compare" default="16384" min="0" max="`${pCntWidthMax}`" resolution="1" visible="`${EnableCompare1Swap &amp;&amp; pCntCC1}`" editable="true" desc="Sets the buffered compare value. Range: 0-65535 (for 16 bit resolution) or 0–4294967295 (for 32 bit resolution)." />

    <!--Dithering-->
    <ParamString id="dithering_Ex" name="ditheringEx" desc="look up expression for dithering" group="Internal" default="GRP_NR[`${pCntGroup}`].CNT.GRP_DITHERING_PRESENT" visible="false" editable="false" />

    <ParamBool id="pCntdithering" name="pCntdithering" desc="Dithering present or not" group="Internal" default="`${lookupExpression(dithering_Ex, 0) ne 0}`" visible="false" editable="false" />

    <ParamChoice id="dithering_mode" name="Dithering Mode" group="Dithering" default="CY_TCPWM_DITHERING_DISABLE" visible="`${pCntdithering}`" editable="`${pCntdithering}`" desc="Sets Dithering mode for PWM and PWM DT modes" >
      <Entry name="Dithering is Disabled" value="CY_TCPWM_DITHERING_DISABLE" visible="true" />
      <Entry name="Period Dithering Enabled" value="CY_TCPWM_DITHERING_PERIOD" visible="true" />
      <Entry name="Duty Dithering Enabled" value="CY_TCPWM_DITHERING_DUTY" visible="true" />
      <Entry name="Period and Duty Dithering Enabled" value="CY_TCPWM_DITHERING_PERIOD_DUTY" visible="true" />
    </ParamChoice>

    <ParamRange id="Period_Dithering" name="Period Dithering Value" group="Dithering" default="128" min="1" max="128" resolution="1" visible="`${(dithering_mode eq CY_TCPWM_DITHERING_PERIOD) || (dithering_mode eq CY_TCPWM_DITHERING_PERIOD_DUTY)}`" editable="true" desc="Initial value for period LFSR. Should be non zero value." />
    <ParamRange id="Duty_Dithering" name="Duty Dithering Value" group="Dithering" default="128" min="1" max="128" resolution="1" visible="`${(dithering_mode eq CY_TCPWM_DITHERING_DUTY) || (dithering_mode eq CY_TCPWM_DITHERING_PERIOD_DUTY)}`" editable="true" desc="Initail value for Duty LFSR. Should be non zero value." />
    <ParamChoice id="limiter" name="Limiter Values" group="Dithering" default="CY_TCPWM_DITHERING_LIMITER_7" visible="`${dithering_mode ne CY_TCPWM_DITHERING_DISABLE}`" editable="true" desc="It defines the magnitude of the pseudo-random value to be added to period/CC0/CC1. When PWM alignment mode set to asymmetric CC0 and CC1, The duty width remains the same, because the same value is added to CC0 and CC1." >
      <Entry name="limiter value 7" value="CY_TCPWM_DITHERING_LIMITER_7" visible="true" />
      <Entry name="limiter value 6" value="CY_TCPWM_DITHERING_LIMITER_6" visible="true" />
      <Entry name="limiter value 5" value="CY_TCPWM_DITHERING_LIMITER_5" visible="true" />
      <Entry name="limiter value 4" value="CY_TCPWM_DITHERING_LIMITER_4" visible="true" />
      <Entry name="limiter value 3" value="CY_TCPWM_DITHERING_LIMITER_3" visible="true" />
      <Entry name="limiter value 2" value="CY_TCPWM_DITHERING_LIMITER_2" visible="true" />
      <Entry name="limiter value 1" value="CY_TCPWM_DITHERING_LIMITER_1" visible="true" />
    </ParamChoice>

    <!--HRPWM-->
    <ParamString id="hrpwm_Ex" name="hrpwmEx" desc="look up expression for hrpwm" group="Internal" default="tcpwm[`${tcpwmInst}`].group[`${pCntGroup}`].cnt[`${cntInst}`].hrpwm[0]" visible="false" editable="false" />

    <ParamBool id="pCnthrpwm" name="pCnthrpwm" desc="hrpwm present or not" group="Internal" default="`${hasBlock(hrpwm_Ex)}`" visible="false" editable="false" />

    <ParamBool id="enable_hrpwm" name="Enable HRPWM" group="HRPWM" default="false" visible="`${pCnthrpwm}`" editable="true" desc="If checked enables High resolution PWM." />

    <ParamChoice id="hrpwm_input_clock" name="HRPWM Operating Frequency" group="HRPWM" default="CY_TCPWM_HRPWM_FREQ_80MHZ_OR_100MHZ" visible="`${pCnthrpwm}`" editable="true" desc="Operating Frequency for HRPWM. It should be same as CLK_OUT = CLK_PERI = CLK_HF" >
      <Entry name="80MHz or 100MHz" value="CY_TCPWM_HRPWM_FREQ_80MHZ_OR_100MHZ" visible="true" />
      <Entry name="160MHz or 180MHz" value="CY_TCPWM_HRPWM_FREQ_160MHZ_OR_180MHZ" visible="true" />
      <Entry name="200MHz or 240MHz" value="CY_TCPWM_HRPWM_FREQ_200MHZ_OR_240MHZ" visible="true" />
    </ParamChoice>

    <!--SMC-->
    <ParamString id="smc_Ex" name="smcEx" desc="look up expression for hrpwm" group="Stepper Motor Control" default="GRP_NR[`${pCntGroup}`].CNT.GRP_SMC_PRESENT" visible="false" editable="false" />

    <ParamBool id="pCntsmc" name="pCntsmc" desc="SMC present or not" group="Stepper Motor Control" default="`${lookupExpression(smc_Ex, 0) ne 0}`" visible="false" editable="false" />

    <ParamBool id="reload_line_sel" name="Enable Line Sel Swap" desc="If checked, Line out and Line cmpl out will be swapped on a terminal count event" group="Stepper Motor Control" default="false" visible="`${pCntsmc}`" editable="true" />
    <ParamChoice id="line_out_source" name="Line Out Source Signal" group="Stepper Motor Control" default="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="`${pCntsmc}`" editable="true" desc="Source for the output signal line_out" >
      <Entry name="Constant 0" value="CY_TCPWM_OUTPUT_CONSTANT_0" visible="true" />
      <Entry name="Constant 1" value="CY_TCPWM_OUTPUT_CONSTANT_1" visible="true" />
      <Entry name="PWM Signal" value="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="true" />
      <Entry name="Inverted PWM Signal" value="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="true" />
      <Entry name="GPIO Port Default" value="CY_TCPWM_OUTPUT_PORT_DEFAULT" visible="true" />
      <Entry name="Motif Out" value="CY_TCPWM_OUTPUT_SOURCE_MOTIF" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
    </ParamChoice>

    <ParamChoice id="linecompl_out_source" name="Line Compl Out Source Signal" group="Stepper Motor Control" default="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="`${pCntsmc}`" editable="true" desc="Source for the output signal linecmpl_out" >
      <Entry name="Constant 0" value="CY_TCPWM_OUTPUT_CONSTANT_0" visible="true" />
      <Entry name="Constant 1" value="CY_TCPWM_OUTPUT_CONSTANT_1" visible="true" />
      <Entry name="PWM Signal" value="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="true" />
      <Entry name="Inverted PWM Signal" value="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="true" />
      <Entry name="GPIO Port Default" value="CY_TCPWM_OUTPUT_PORT_DEFAULT" visible="true" />
      <Entry name="Motif Out" value="CY_TCPWM_OUTPUT_SOURCE_MOTIF" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
    </ParamChoice>

    <ParamChoice id="buff_line_out_source" name="Buf Line Out Source Signal" group="Stepper Motor Control" default="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="`${pCntsmc}`" editable="true" desc="Source for the output signal line_out" >
      <Entry name="Constant 0" value="CY_TCPWM_OUTPUT_CONSTANT_0" visible="true" />
      <Entry name="Constant 1" value="CY_TCPWM_OUTPUT_CONSTANT_1" visible="true" />
      <Entry name="PWM Signal" value="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="true" />
      <Entry name="Inverted PWM Signal" value="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="true" />
      <Entry name="GPIO Port Default" value="CY_TCPWM_OUTPUT_PORT_DEFAULT" visible="true" />
      <Entry name="Motif Out" value="CY_TCPWM_OUTPUT_SOURCE_MOTIF" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
    </ParamChoice>

    <ParamChoice id="buff_linecompl_out_source" name="Buff Line Compl Out Source Signal" group="Stepper Motor Control" default="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="`${pCntsmc}`" editable="true" desc="Source for the output signal linecmpl_out" >
      <Entry name="Constant 0" value="CY_TCPWM_OUTPUT_CONSTANT_0" visible="true" />
      <Entry name="Constant 1" value="CY_TCPWM_OUTPUT_CONSTANT_1" visible="true" />
      <Entry name="PWM Signal" value="CY_TCPWM_OUTPUT_PWM_SIGNAL" visible="true" />
      <Entry name="Inverted PWM Signal" value="CY_TCPWM_OUTPUT_INVERTED_PWM_SIGNAL" visible="true" />
      <Entry name="GPIO Port Default" value="CY_TCPWM_OUTPUT_PORT_DEFAULT" visible="true" />
      <Entry name="Motif Out" value="CY_TCPWM_OUTPUT_SOURCE_MOTIF" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
    </ParamChoice>

    <!-- Event Generation -->
    <ParamBool id="pEventGenerationVisible" name="pEventGenerationVisible" group="Internal" default="`${(pCntAMC &amp;&amp; ((PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_CENTER_ASYMMETRIC_CC0_CC1_ALIGN)))}`" visible="false" editable="false" desc="" />
    <ParamBool id="Compare0MatchUp" name="Compare 0 match up" group="Event Generation" default="true" visible="`${pEventGenerationVisible}`" editable="true" desc="Enables/Disables the compare match 0 event generation when counting up in CNT_UPDN1/2 mode" />
    <ParamBool id="Compare0MatchDown" name="Compare 0 match Down" group="Event Generation" default="false" visible="`${pEventGenerationVisible}`" editable="true" desc="Enables/Disables the compare match 0 event generation when counting down in CNT_UPDN1/2 mode" />
    <ParamBool id="Compare1MatchUp" name="Compare 1 match up" group="Event Generation" default="true" visible="`${pEventGenerationVisible}`" editable="true" desc="Enables/Disables the compare match 1 event generation when counting up in CNT_UPDN1/2 mode" />
    <ParamBool id="Compare1MatchDown" name="Compare 1 match Down" group="Event Generation" default="false" visible="`${pEventGenerationVisible}`" editable="true" desc="Enables/Disables the compare match 1 event generation when counting down in CNT_UPDN1/2 mode" />

    <!--Interrupts-->
    <ParamBool id="InterruptTC" name="Overflow &amp; Underflow" group="Interrupt Source" default="false" visible="true" editable="true" desc="Generate interrupt on Overflow &amp; Underflow events" />
    <ParamBool id="InterruptCC0" name="Compare 0" group="Interrupt Source" default="false" visible="true" editable="true" desc="Generates interrupt when counter value matches with compare 0 value" />
    <ParamBool id="InterruptCC1" name="Compare 1" group="Interrupt Source" default="false" visible="`${pCntCC1}`" editable="true" desc="Generates interrupt when counter value matches with compare 1 value" />
    <ParamString id="InterruptSource" name="InterruptSource" desc="InterruptSource" group="Interrupt Source" default="(CY_TCPWM_INT_ON_TC `${(InterruptTC)? &quot;&quot; : &quot;&amp; 0U&quot;}`) | (CY_TCPWM_INT_ON_CC0 `${(InterruptCC0)? &quot;&quot; : &quot;&amp; 0U&quot;}`) | (CY_TCPWM_INT_ON_CC1 `${(InterruptCC1)? &quot;&quot; : &quot;&amp; 0U&quot;}`)" visible="false" editable="false" />

    <!--Kill Mode-->
    <ParamBool id="pwmstoponkill" name="PWM Stop on Kill" group="Kill Mode" default="true" visible="true" editable="true" desc="Specifies whether the counter stops on a kill events. If unchecked kill event DOES NOT stop a counter. If checked kill event stops a counter.  Note: this option should be enabled to be able to stop the PWM using SW trigger." />
    <ParamBool id="pwmsynckill" name="PWM Sync Kill" group="Kill Mode" default="false" visible="true" editable="true" desc="Specifies asynchronous/synchronous kill behavior. If checked (synchronous kill mode) the kill event disables the line_out and line_compl_out signals immediately. Line_out and Line_compl_out will be enable at the next terminal count event (synchronous kill) after kill event is inactive. If unchecked (asynchronous kill mode) the kill event only disables the dt_line_out and dt_line_compl_out signals when present. This field is only used when PWM Stop on Kill is unchecked." />
    <ParamBool id="ImmediateKill" name="PWM Immediate Kill" group="Kill Mode" default="false" visible="true" editable="true" desc="Specifies whether the kill event immediately deactivates the line_out and line_compl_out signals or with the next module clock. If unchecked deactivates the line_out and line_compl_out signals with the next module clock. If checked immediately deactivates the dt_line_out and dt_line_compl_out signals." />
    <ParamBool id="pwmtcsynckilldt" name="PWM Terminal Count Sync Kill DT" group="Kill Mode" default="false" visible="true" editable="true" desc="Specifies Terminal Count (TC) synchronour Dead Time (DT) kill behavior: If checked the kill event disables the line_out and line_compl_out signals at the next terminal count event and till the next terminal count event. If Dead Time is enabled, output get disables after the tc event + dead time. Line_out and line_comp_out get enable at next tc event after input input is inactive. If unchecked TC synchronous DT kill mode is Disable.  This field is only used when PWM Stop on Kill is unchecked." />
    <ParamBool id="pwmsynckilldt" name="PWM Sync Kill DT" group="Kill Mode" default="false" visible="true" editable="true" desc="Specifies synchronous Deat Time (DT) kill behavior: If checked the kill event disables the line_out immediately whereas line_compl_out signals will be disable after dead time till the next terminal count event (synchronous DT kill). Line_out and line_compl_out get enable at next tc event after kill input is inactive. If unchecked synchronous DT kill mode is Disable.  This field is only used when PWM Stop on Kill is unchecked." />
    <ParamChoice id="KillMode" name="Kill Mode" group="Kill Mode" default="`${(pwmstoponkill) ? CY_TCPWM_PWM_STOP_ON_KILL : ((pwmsynckill) ? CY_TCPWM_PWM_SYNCH_KILL : CY_TCPWM_PWM_ASYNC_KILL)}`" visible="false" editable="false" desc="Determines what the kill signal does to the PWM." >
      <Entry name="Asynchronous Kill" value="CY_TCPWM_PWM_ASYNC_KILL" visible="true" />
      <Entry name="Synchronous Kill" value="CY_TCPWM_PWM_SYNCH_KILL" visible="true" />
      <Entry name="Stop on Kill" value="CY_TCPWM_PWM_STOP_ON_KILL" visible="true" />
    </ParamChoice>

    <!--Inputs-->
    <ParamSignal port="clock[0]" name="Clock Signal" group="Inputs" visible="`${hasVisibleOption(&quot;clock[0]&quot;)}`" desc="The clock input defines the operating frequency." canBeEmpty="`${!hasVisibleOption(&quot;clock[0]&quot;)}`" />
    <ParamSignal port="clock_counter_en[0]" name="Clock Signal" group="Inputs" visible="`${hasVisibleOption(&quot;clock_counter_en[0]&quot;)}`" desc="The clock input defines the operating frequency." canBeEmpty="`${!hasVisibleOption(&quot;clock_counter_en[0]&quot;)}`" />

    <ParamChoice id="CountInput" name="Count Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="`${pPwmNePrs}`" editable="true" desc="Determines if a count input is needed and how that input is registered." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Level" value="CY_TCPWM_INPUT_LEVEL" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="count[0]" name="Count Signal" group="Inputs" visible="`${((pPwmNePrs) &amp;&amp; (CountInput ne CY_TCPWM_INPUT_DISABLED))}`" desc="This digital input causes the PWM to count depending on how the it is configured." canBeEmpty="`${CountInput eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="Kill0Input" name="Kill 0 Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="true" editable="true" desc="Determines how the kill 0 input behaves." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Level" value="CY_TCPWM_INPUT_LEVEL" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="stop[0]" name="Kill 0 Signal" group="Inputs" visible="`${Kill0Input ne CY_TCPWM_INPUT_DISABLED}`" desc="This digital input kills the PWM, based on the Kill0 Input selection." canBeEmpty="`${Kill0Input eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="ReloadInput" name="Reload Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="true" editable="true" desc="Determines if a reload input is needed and how the reload signal input is registered." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Level" value="CY_TCPWM_INPUT_LEVEL" visible="`${PwmMode eq CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="reload[0]" name="Reload Signal" group="Inputs" visible="`${ReloadInput ne CY_TCPWM_INPUT_DISABLED}`" desc="This digital input triggers a reload of the PWM, and starts the PWM." canBeEmpty="`${ReloadInput eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="StartInput" name="Start Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="true" editable="true" desc="Determines if a start input is needed and how that input is registered." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="start[0]" name="Start Signal" group="Inputs" visible="`${StartInput ne CY_TCPWM_INPUT_DISABLED}`" desc="This digital input triggers a Start of the PWM." canBeEmpty="`${StartInput eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="SwapInput" name="Swap Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="true" editable="true" desc="This input controls when compare and period swaps occur." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="capture0[0]" name="Swap Signal" group="Inputs" visible="`${SwapInput ne CY_TCPWM_INPUT_DISABLED}`" desc="This input latches a SWAP command. The swap doesn’t occur until the next Overflow/Underflow event." canBeEmpty="`${SwapInput eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="Kill1Input" name="Kill 1 Input" group="Inputs" default="CY_TCPWM_INPUT_DISABLED" visible="`${pCntCC1}`" editable="true" desc="Determines how the kill 1 input behaves." >
      <Entry name="Rising Edge" value="CY_TCPWM_INPUT_RISINGEDGE" visible="true" />
      <Entry name="Falling Edge" value="CY_TCPWM_INPUT_FALLINGEDGE" visible="true" />
      <Entry name="Either Edge" value="CY_TCPWM_INPUT_EITHEREDGE" visible="true" />
      <Entry name="Level" value="CY_TCPWM_INPUT_LEVEL" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_INPUT_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="capture1[0]" name="Kill 1 Signal" group="Inputs" visible="`${Kill1Input ne CY_TCPWM_INPUT_DISABLED}`" desc="This digital input kills the PWM, based on the Kill1 Input selection." canBeEmpty="`${Kill1Input eq CY_TCPWM_INPUT_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_HIGHZ" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>

    <!--PWM Output Polarity-->
    <ParamBool id="InvertPwm" name="Invert PWM Output" group="PWM Output Polarity" default="false" visible="true" editable="true" desc="If checked the main PWM output is inverted." />
    <ParamBool id="InvertPwm_n" name="Invert PWM_n Output" group="PWM Output Polarity" default="false" visible="true" editable="true" desc="If checked the main PWM_n output is inverted." />

    <!--PWM output on Disable-->
    <ParamChoice id="PwmDisabledOutput" name="PWM Disabled Output" group="PWM Disabled Output" default="CY_TCPWM_PWM_OUTPUT_HIGHZ" visible="true" editable="true" desc="Specifies the behavior of the PWM outputs while PWM is disabled." >
      <Entry name="High Impedance" value="CY_TCPWM_PWM_OUTPUT_HIGHZ" visible="true" />
      <Entry name="Retain" value="CY_TCPWM_PWM_OUTPUT_RETAIN" visible="true" />
      <Entry name="Low" value="CY_TCPWM_PWM_OUTPUT_LOW" visible="true" />
      <Entry name="High" value="CY_TCPWM_PWM_OUTPUT_HIGH" visible="true" />
    </ParamChoice>

    <!--Outputs-->
    <ParamSignal port="line[0]" name="PWM (line)" group="Outputs" visible="`${(&quot;mxs40tcpwm&quot; ne getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;line[0]&quot;))}`" desc="PWM output" canBeEmpty="true" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamSignal port="line_compl[0]" name="PWM_n (line_compl)" group="Outputs" visible="`${(&quot;mxs40tcpwm&quot; ne getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;line_compl[0]&quot;))}`" desc="Complimentary PWM output." canBeEmpty="true" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>

    <ParamSignal port="tr_line[0]" name="PWM (line)" group="Outputs" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" desc="PWM output" canBeEmpty="true" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamSignal port="tr_line_compl[0]" name="PWM_n (line_compl)" group="Outputs" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" desc="Complimentary PWM output." canBeEmpty="true" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>

    <!--Trigger Outputs-->
    <ParamChoice id="trigger0Event" name="Trigger 0 Event" group="Trigger Outputs" default="CY_TCPWM_CNT_TRIGGER_ON_DISABLED" visible="true" editable="true" desc="This output used to connect TCPWM event signals to other peripherals." >
      <Entry name="Overflow" value="CY_TCPWM_CNT_TRIGGER_ON_OVERFLOW" visible="`${PwmMode ne CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" />
      <Entry name="Underflow" value="CY_TCPWM_CNT_TRIGGER_ON_UNDEFLOW" visible="`${PwmMode ne CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" />
      <Entry name="Terminal Count" value="CY_TCPWM_CNT_TRIGGER_ON_TC" visible="true" />
      <Entry name="Compare 0 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_MATCH" visible="true" />
      <Entry name="Compare 1 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC1_MATCH" visible="`${pCntCC1}`" />
      <Entry name="Compare 0 or 1 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_OR_CC1_MATCH" visible="`${pCntCC1 &amp;&amp; (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
      <Entry name="PWM (line_out)" value="CY_TCPWM_CNT_TRIGGER_ON_LINE_OUT" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_CNT_TRIGGER_ON_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="tr_out0[0]" name="Trigger 0 Signal" group="Trigger Outputs" visible="`${trigger0Event ne CY_TCPWM_CNT_TRIGGER_ON_DISABLED}`" desc="Signals to connect on Trigger 0 Event" canBeEmpty="`${trigger0Event eq CY_TCPWM_CNT_TRIGGER_ON_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>
    <ParamChoice id="trigger1Event" name="Trigger 1 Event" group="Trigger Outputs" default="CY_TCPWM_CNT_TRIGGER_ON_DISABLED" visible="true" editable="true" desc="This output used to connect TCPWM event signals to other peripherals." >
      <Entry name="Overflow" value="CY_TCPWM_CNT_TRIGGER_ON_OVERFLOW" visible="`${PwmMode ne CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" />
      <Entry name="Underflow" value="CY_TCPWM_CNT_TRIGGER_ON_UNDEFLOW" visible="`${PwmMode ne CY_TCPWM_PWM_MODE_PSEUDORANDOM}`" />
      <Entry name="Terminal Count" value="CY_TCPWM_CNT_TRIGGER_ON_TC" visible="true" />
      <Entry name="Compare 0 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_MATCH" visible="true" />
      <Entry name="Compare 1 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC1_MATCH" visible="`${pCntCC1}`" />
      <Entry name="Compare 0 or 1 Match" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_OR_CC1_MATCH" visible="`${pCntCC1 &amp;&amp; (&quot;mxs40tcpwm&quot; eq getIpBlockName())}`" />
      <Entry name="PWM (line_out)" value="CY_TCPWM_CNT_TRIGGER_ON_LINE_OUT" visible="true" />
      <Entry name="Disabled" value="CY_TCPWM_CNT_TRIGGER_ON_DISABLED" visible="true" />
    </ParamChoice>
    <ParamSignal port="tr_out1[0]" name="Trigger 1 Signal" group="Trigger Outputs" visible="`${trigger1Event ne CY_TCPWM_CNT_TRIGGER_ON_DISABLED}`" desc="Signals to connect on Trigger 1 Event " canBeEmpty="`${trigger1Event eq CY_TCPWM_CNT_TRIGGER_ON_DISABLED}`" >
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="DEFAULT" reason="">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation="ioss\[\d+\]\.port\[\d+\]\.pin.*" valid="true" >
        <Parameter id="DriveModes" severity="INFO" reason="The pin Drive Mode parameter does not match expected.">
          <Fixed value="CY_GPIO_DM_STRONG_IN_OFF" />
        </Parameter>
      </Constraint>
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>

    <!--Config-->
    <ParamBool id="inFlash" name="Store Config in Flash" group="Advanced" default="true" visible="true" editable="true" desc="Controls whether the configuration structure is stored in flash (const, true) or SRAM (not const, false)." />

    <!--Debug Mode-->
    <ParamBool id="debugModeFreezeEn" name="PWM Debug Freeze" group="Debug Mode" default="false" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) || (&quot;mxs40ppss&quot; eq getIpBlockName())}`" editable="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) || (&quot;mxs40ppss&quot; eq getIpBlockName())}`" desc="Specifies the counter behavior in debug mode. If unchecked the counter operation depends on Debug Suspend value: When unchecked, counter operation continues. When checked, Counter Freeze after roll over (tc event) and enters safe state. If checked the counter operation freezes in debug mode depending on Debug Suspend value: When unchecked, Counter Freeze; When checked, Counter Freeze immediately  and enters safe state and running bit to be set to 0. Safet state values are defined on line_out and line_compl_out by the corressponding kill_line_out_polarity and kill_line_compl_out_polarity." />
    <ParamBool id="debugModeSuspendEn" name="PWM Debug Suspend" group="Debug Mode" default="false" visible="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) || (&quot;mxs40ppss&quot; eq getIpBlockName())}`" editable="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) || (&quot;mxs40ppss&quot; eq getIpBlockName())}`" desc="Specifies the counter behavior in debug mode when suspend is enabled. If unchecked the counter operation continues in debug mode as given by Debug Freeze parameter. If checked the counter operation freezes in debug mode depending on Debug Freeze value. When unchecked, Counter Freeze after roll over (tc event) and enters safe state. When checked, Counter Freeze immediately and enters safe state and running bit to be set to 0. Safet state values are defined on line_out and line_compl_out by the corressponding kill_line_out_polarity and kill_line_compl_out_polarity." />
    <ParamSignal port="tr_debug_freeze[0]" name="Debug Freeze signal" group="Debug Mode" visible="`${debugModeFreezeEn || debugModeSuspendEn}`" desc="This signal connects TCPWM debug interface to the debug interface. If at least one another TCPWM is already connected to some debug trigger signal, the current TCPWM instance should also be connected to the same debug trigger signal." canBeEmpty="true" >
      <Constraint type="ACCEPT" targetLocation=".*" valid="true" />
    </ParamSignal>

    <!-- Peripheral clock divider connection -->
    <ParamString id="definePrefix" name="Define prefix" group="Internal" default="`${&quot;TCPWM&quot; . tcpwmInst . &quot;_GRP&quot; . pCntGroup . &quot;_CNT&quot; . getInstNumber(&quot;cnt&quot;)}`" visible="false" editable="false" desc="" />
    <ParamString id="defineInputDisabled" name="Define input disabled" group="Internal" default="`${INST_NAME . &quot;_INPUT_DISABLED &amp; 0x3U&quot;}`" visible="false" editable="false" desc="" />
    <ParamString id="pclk" name="PCLK" group="Internal" default="`${hasVisibleOption(&quot;clock_counter_en[0]&quot;) ? getBlockFromSignal(&quot;clock_counter_en[0]&quot;):getBlockFromSignal(&quot;clock[0]&quot;)}`" visible="false" editable="false" desc="Connected peripheral clock divider (PCLK)" />
    <ParamBool id="pclkOk" name="PCLK Valid" group="Internal" default="`${hasVisibleOption(&quot;clock_counter_en[0]&quot;) ? hasConnection(&quot;clock_counter_en&quot;, 0) &amp;&amp; isBlockUsed(pclk) : hasConnection(&quot;clock&quot;, 0) &amp;&amp; isBlockUsed(pclk)}`" visible="false" editable="false" desc="Checks whether there is a PCLK connected and enabled" />
    <ParamString id="pclkDst" name="PCLK Destination" group="Internal" default="`${hasVisibleOption(&quot;clock_counter_en[0]&quot;) ? &quot;PCLK_TCPWM&quot; . tcpwmInst . &quot;_CLOCK_COUNTER_EN&quot; . cntInst : &quot;PCLK_TCPWM&quot; . tcpwmInst . &quot;_CLOCKS&quot; . cntInst}`" visible="false" editable="false" desc="" />

    <!-- Auxiliary internal parameters-->
    <ParamBool id="pC0GtP0" name="pC0GtP0" desc="pC0GtP0" group="Internal" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" />
    <ParamBool id="pC0GtP1" name="pC0GtP1" desc="pC0GtP1" group="Internal" default="`${Compare0 &gt; Period1}`" visible="false" editable="false" />
    <ParamBool id="pC1GtP0" name="pC1GtP0" desc="pC1GtP0" group="Internal" default="`${Compare1 &gt; Period0}`" visible="false" editable="false" />
    <ParamBool id="pC1GtP1" name="pC1GtP1" desc="pC1GtP1" group="Internal" default="`${Compare1 &gt; Period1}`" visible="false" editable="false" />
    <ParamBool id="pC2GtP0" name="pC2GtP0" desc="pC2GtP0" group="Internal" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" />
    <ParamBool id="pC2GtP1" name="pC2GtP1" desc="pC2GtP1" group="Internal" default="`${Compare2 &gt; Period1}`" visible="false" editable="false" />
    <ParamBool id="pC3GtP0" name="pC3GtP0" desc="pC3GtP0" group="Internal" default="`${Compare3 &gt; Period0}`" visible="false" editable="false" />
    <ParamBool id="pC3GtP1" name="pC3GtP1" desc="pC3GtP1" group="Internal" default="`${Compare3 &gt; Period1}`" visible="false" editable="false" />

    <ParamBool id="pAlignAsymm" name="pAlignAsymm" desc="pAlignAsymm" group="Internal" default="`${(PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_CC0_CC1_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_CENTER_ASYMMETRIC_CC0_CC1_ALIGN)}`" visible="false" editable="false" />
    <ParamBool id="pAlignCenter" name="pAlignCenter" desc="pAlignCenter" group="Internal" default="`${PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN}`" visible="false" editable="false" />
    <ParamBool id="pAlignAsymmOrCenter" name="pAlignAsymmOrCenter" desc="pAlignAsymmOrCenter" group="Internal" default="`${pAlignAsymm || pAlignCenter}`" visible="false" editable="false" />
    <ParamBool id="pPwmNePrsAndC0GtP0" name="pPwmNePrsAndC0GtP0" desc="pPwmNePrsAndC0GtP0" group="Internal" default="`${pPwmNePrs &amp;&amp; pC0GtP0}`" visible="false" editable="false" />
    <ParamBool id="pPwmNePrsAndC0GtP1" name="pPwmNePrsAndC0GtP1" desc="pPwmNePrsAndC0GtP1" group="Internal" default="`${pPwmNePrs &amp;&amp; pC0GtP1}`" visible="false" editable="false" />
    <ParamBool id="pKillEqSynch" name="pKillEqSynch" desc="pKillEqSynch" group="Internal" default="`${KillMode eq CY_TCPWM_PWM_SYNCH_KILL}`" visible="false" editable="false" />
    <ParamBool id="pEnCAndNEnP" name="pEnCAndNEnP" desc="pEnCAndNEnP" group="Internal" default="`${EnableCompare0Swap &amp;&amp; (!EnablePeriodSwap)}`" visible="false" editable="false" />
    <ParamBool id="pEnCAndEnP" name="pEnCAndEnP" desc="pEnCAndEnP" group="Internal" default="`${EnableCompare0Swap &amp;&amp; EnablePeriodSwap}`" visible="false" editable="false" />
    <ParamBool id="pNEnCOrAssymAndC0GtP1" name="pNEnCOrAssymAndC0GtP1" desc="pNEnCOrAssymAndC0GtP1" group="Internal" default="`${((!EnableCompare0Swap) || pAlignAsymm)&amp;&amp; pC0GtP1}`" visible="false" editable="false" />
    <ParamBool id="pNePrsAndEnCAndEnP" name="pNePrsAndEnCAndEnP" desc="pNePrsAndEnCAndEnP" group="Internal" default="`${pPwmNePrs &amp;&amp; pEnCAndEnP}`" visible="false" editable="false" />

    <!-- ================================================================================================ -->
    <!-- SVG VISUALIZATION VARIABLES - ORGANIZED BY ALIGNMENT MODE -->
    <!-- ================================================================================================ -->
    
    <!-- ===== SHARED / GENERAL VARIABLES (used by all alignment modes) ===== -->
    
    <!-- Clock Frequency -->
    <ParamString id="sourceClock" name="sourceClock" group="General" default="`${(hasVisibleOption(&quot;clock[0]&quot;)) ? (getBlockFromSignal(&quot;clock[0]&quot;)) : (getBlockFromSignal(&quot;clock_counter_en[0]&quot;))}`" visible="false" editable="false" desc="Source Clock Resource" />
    <ParamRange  id="tcpwmClkHz" name="tcpwmClkHz" group="General" default="`${getExposedMember(sourceClock, &quot;frequency&quot;)}`" min="0" max="400000000" resolution="1" visible="false" editable="false" desc="TCPWM clock frequency in Hz" />

    <!-- SVG Visualization -->
    <!-- Constants -->
    <ParamString id="x_left" name="x_left" group="General" default="80" visible="false" editable="false" desc="" />
    <ParamString id="half_w_px" name="half_w_px" group="General" default="185" visible="false" editable="false" desc="" />
    <ParamString id="full_w_px" name="full_w_px" group="General" default="370" visible="false" editable="false" desc="" />
    <ParamString id="graph_peak_y" name="graph_peak_y" group="General" default="60" visible="false" editable="false" desc="" />
    <ParamString id="graph_base_y" name="graph_base_y" group="General" default="190" visible="false" editable="false" desc="" />

    <!-- Formulas -->
    <ParamString id="Period_safe" name="Period_safe" group="General" default="`${(Period0 &lt; 1) ? 1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="dy_span" name="dy_span" group="General" default="`${(graph_base_y - graph_peak_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="Compare_safe" name="Compare_safe" group="General" default="`${(Compare0 &lt; 0) ? 0 : ((Compare0 &gt; Period_safe) ? Period_safe : Compare0)}`" visible="false" editable="false" desc="" />

    <!-- Formulas for front lines -->
    <ParamString id="x_rise1" name="x_rise1" group="General" default="`${x_left + (Compare_safe * half_w_px) / Period_safe}`" visible="false" editable="false" desc="" />
    <ParamString id="x_fall1" name="x_fall1" group="General" default="`${x_left + half_w_px + ((Period_safe - Compare_safe) * half_w_px) / Period_safe}`" visible="false" editable="false" desc="" />
    <ParamString id="x_rise2" name="x_rise2" group="General" default="`${x_left + full_w_px + (Compare_safe * half_w_px) / Period_safe}`" visible="false" editable="false" desc="" />
    <ParamString id="x_fall2" name="x_fall2" group="General" default="`${x_left + full_w_px + half_w_px + ((Period_safe - Compare_safe) * half_w_px) / Period_safe}`" visible="false" editable="false" desc="" />
    <ParamString id="x_start" name="x_start" group="General" default="`${x_left}`" visible="false" editable="false" desc="" />
    <ParamString id="x_end" name="x_end" group="General" default="`${x_left + 2*full_w_px}`" visible="false" editable="false" desc="" />

    <!-- Update -->
    <ParamString id="y_line_hi" name="y_line_hi" group="General" default="350" visible="false" editable="false" desc="" />
    <ParamString id="y_line_lo" name="y_line_lo" group="General" default="380" visible="false" editable="false" desc="" />
    <ParamString id="y_line_n_hi" name="y_line_n_hi" group="General" default="400" visible="false" editable="false" desc="" />
    <ParamString id="y_line_n_lo" name="y_line_n_lo" group="General" default="430" visible="false" editable="false" desc="" />

    <!-- Dynamic triangle scaling with flexible reference for proportional visualization -->
    <ParamString id="max_period" name="max_period" group="General" default="`${EnablePeriodSwap ? ((Period0 > Period1) ? Period0 : Period1) : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="scaling_reference" name="scaling_reference" group="General" default="`${EnablePeriodSwap ? max_period : 65535}`" visible="false" editable="false" desc="" />
    <ParamString id="base_y" name="base_y" group="General" default="190" visible="false" editable="false" desc="" />
    <ParamString id="reference_peak_y" name="reference_peak_y" group="General" default="60" visible="false" editable="false" desc="" />
    <ParamString id="reference_height" name="reference_height" group="General" default="`${base_y - reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="reference_half_width" name="reference_half_width" group="General" default="`${half_w_px}`" visible="false" editable="false" desc="" />
    
    <!-- Minimum triangle size (20% of reference for better flexibility) -->
    <ParamString id="min_scale" name="min_scale" group="General" default="0.2" visible="false" editable="false" desc="" />
    <ParamString id="min_height" name="min_height" group="General" default="`${reference_height * min_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="min_half_width" name="min_half_width" group="General" default="`${reference_half_width * min_scale}`" visible="false" editable="false" desc="" />



    <!-- ===== LEFT-ALIGNED MODE VARIABLES (for pwm_left_align.svg with 4 sawtooth periods) ===== -->
    <!-- Total available width for all four triangles (fixed to fit in SVG canvas: 80 to 840 = 760 pixels) -->
    <ParamString id="total_triangle_left_width" name="total_triangle_left_width" group="General" default="760" visible="false" editable="false" desc="" />
    <!-- Denominator: sum of all four triangle periods (1 + 2 + 3 + 4 correspond to P0 + P1 + P0 + P1) -->
    <ParamString id="period_left_sum" name="period_left_sum" group="General" default="`${Period0 + (EnablePeriodSwap ? Period1 : Period0) + Period0 + (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />

    <!-- LEFT-ALIGNED triangle scaling (separate variables for proportional scaling) -->
    <!-- Calculate each triangle's width proportionally -->
    <ParamString id="triangle1_left_width" name="triangle1_left_width" group="General" default="`${(Period0 * total_triangle_left_width) / period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_width" name="triangle2_left_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * total_triangle_left_width) / period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_left_width" name="triangle3_left_width" group="General" default="`${(Period0 * total_triangle_left_width) / period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_width" name="triangle4_left_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * total_triangle_left_width) / period_left_sum}`" visible="false" editable="false" desc="" />

    <ParamString id="triangle1_left_raw_scale" name="triangle1_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_left_scale" name="triangle1_left_scale" group="General" default="`${(triangle1_left_raw_scale &lt; 200) ? 200 : triangle1_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_left_height" name="triangle1_left_height" group="General" default="`${(reference_height * triangle1_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_left_half_width" name="triangle1_left_half_width" group="General" default="`${(reference_half_width * triangle1_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_left_peak_y" name="triangle1_left_peak_y" group="General" default="`${base_y - triangle1_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="triangle2_left_period" name="triangle2_left_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_raw_scale" name="triangle2_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((triangle2_left_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_scale" name="triangle2_left_scale" group="General" default="`${(triangle2_left_raw_scale &lt; 200) ? 200 : triangle2_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_height" name="triangle2_left_height" group="General" default="`${(reference_height * triangle2_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_half_width" name="triangle2_left_half_width" group="General" default="`${(reference_half_width * triangle2_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_left_peak_y" name="triangle2_left_peak_y" group="General" default="`${base_y - triangle2_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 3: Always uses Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="triangle3_left_raw_scale" name="triangle3_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_left_scale" name="triangle3_left_scale" group="General" default="`${(triangle3_left_raw_scale &lt; 200) ? 200 : triangle3_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_left_height" name="triangle3_left_height" group="General" default="`${(reference_height * triangle3_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_left_half_width" name="triangle3_left_half_width" group="General" default="`${(reference_half_width * triangle3_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_left_peak_y" name="triangle3_left_peak_y" group="General" default="`${base_y - triangle3_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 4: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="triangle4_left_period" name="triangle4_left_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_raw_scale" name="triangle4_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((triangle4_left_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_scale" name="triangle4_left_scale" group="General" default="`${(triangle4_left_raw_scale &lt; 200) ? 200 : triangle4_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_height" name="triangle4_left_height" group="General" default="`${(reference_height * triangle4_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_half_width" name="triangle4_left_half_width" group="General" default="`${(reference_half_width * triangle4_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_left_peak_y" name="triangle4_left_peak_y" group="General" default="`${base_y - triangle4_left_height}`" visible="false" editable="false" desc="" />

    <!-- Triangle endpoint coordinates for proper proportional scaling -->
    <ParamString id="triangle1_left_x" name="triangle1_left_x" group="General" default="80" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_x" name="triangle1_right_x" group="General" default="`${triangle1_left_x + triangle1_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 connects to Triangle 1 - starts where Triangle 1 ends -->
    <ParamString id="triangle2_left_x" name="triangle2_left_x" group="General" default="`${triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_x" name="triangle2_right_x" group="General" default="`${triangle2_left_x + triangle2_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 3 endpoint coordinates -->
    <ParamString id="triangle3_left_x" name="triangle3_left_x" group="General" default="`${triangle2_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_x" name="triangle3_right_x" group="General" default="`${triangle3_left_x + triangle3_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 4 endpoint coordinates -->
    <ParamString id="triangle4_left_x" name="triangle4_left_x" group="General" default="`${triangle3_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_x" name="triangle4_right_x" group="General" default="`${triangle4_left_x + triangle4_left_width}`" visible="false" editable="false" desc="" />

    <!-- Ramp peak X positions (at 50% of triangle width for left-aligned) -->
    <ParamString id="left_ramp_peak1_x" name="left_ramp_peak1_x" group="General" default="`${triangle1_left_x + (triangle1_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="left_ramp_peak2_x" name="left_ramp_peak2_x" group="General" default="`${triangle2_left_x + (triangle2_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="left_ramp_peak3_x" name="left_ramp_peak3_x" group="General" default="`${triangle3_left_x + (triangle3_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="left_ramp_peak4_x" name="left_ramp_peak4_x" group="General" default="`${triangle4_left_x + (triangle4_left_width / 2)}`" visible="false" editable="false" desc="" />

    <!-- LEFT-ALIGNED period line Y positions (for 4 sawtooth periods) -->
    <ParamString id="period1_left_line_y" name="period1_left_line_y" group="General" default="`${triangle1_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period2_left_line_y" name="period2_left_line_y" group="General" default="`${triangle2_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period3_left_line_y" name="period3_left_line_y" group="General" default="`${triangle3_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period4_left_line_y" name="period4_left_line_y" group="General" default="`${triangle4_left_peak_y}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned compare line Y positions (following sawtooth) -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="compare1_left_y" name="compare1_left_y" group="General" default="`${max(base_y - (Compare0 * triangle1_left_height / Period0), triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare1_left_cc1_y" name="compare1_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle1_left_height / Period0), triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned compare line Y positions for Period1 lines (periods 2 and 4) -->
    <!-- When swap is enabled, use Period1 (triangle2_left_period/triangle4_left_period) as denominator for proper scaling -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="compare2_left_y" name="compare2_left_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare2_left_cc1_y" name="compare2_left_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <!-- Period 3: sawtooth from X=460 to X=650 -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="compare3_left_y" name="compare3_left_y" group="General" default="`${max(base_y - (Compare0 * triangle3_left_height / Period0), triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare3_left_cc1_y" name="compare3_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle3_left_height / Period0), triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <!-- Period 4: sawtooth from X=650 to X=840 -->
    <!-- When swap is enabled, use Period1 (triangle4_left_period) as denominator for proper scaling -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="compare4_left_y" name="compare4_left_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare4_left_cc1_y" name="compare4_left_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned PWM dot coordinates (4 sawtooth periods) -->
    <!-- Period 1: sawtooth from X=80 to X=270 -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="dot1_left_x" name="dot1_left_x" group="General" default="`${min(triangle1_left_x + (Compare0 * triangle1_left_width / Period0), triangle1_left_x + triangle1_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_left_y" name="dot1_left_y" group="General" default="`${max(base_y - (Compare0 * triangle1_left_height / Period0), triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_left_cc1_x" name="dot1_left_cc1_x" group="General" default="`${min(triangle1_left_x + (Compare2 * triangle1_left_width / Period0), triangle1_left_x + triangle1_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_left_cc1_y" name="dot1_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle1_left_height / Period0), triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: sawtooth from X=270 to X=460 -->
    <!-- Limit dot X and Y to stay within triangle boundaries to prevent overflow -->
    <ParamString id="dot2_left_x" name="dot2_left_x" group="General" default="`${min(triangle2_left_x + (Compare0 * triangle2_left_width / triangle2_left_period), triangle2_left_x + triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_y" name="dot2_left_y" group="General" default="`${max(base_y - (Compare0 * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_cc1_x" name="dot2_left_cc1_x" group="General" default="`${min(triangle2_left_x + (Compare2 * triangle2_left_width / triangle2_left_period), triangle2_left_x + triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_cc1_y" name="dot2_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: Swappable dots for buffered compare values (with period-dependent scaling) -->
    <!-- Note: Compare1/Compare3 are in range [0, triangle2_left_period], use actual period value as denominator -->
    <!-- Limit dot X and Y to stay within triangle boundaries to prevent overflow -->
    <ParamString id="dot2_left_buff_x" name="dot2_left_buffer_x" group="General" default="`${min(triangle2_left_x + (Compare1 * triangle2_left_width / triangle2_left_period), triangle2_left_x + triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_buff_y" name="dot2_left_buffer_y" group="General" default="`${max(base_y - (Compare1 * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_buff_cc1_x" name="dot2_left_buffer_cc1_x" group="General" default="`${min(triangle2_left_x + (Compare3 * triangle2_left_width / triangle2_left_period), triangle2_left_x + triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_left_buff_cc1_y" name="dot2_left_buffer_cc1_y" group="General" default="`${max(base_y - (Compare3 * triangle2_left_height / triangle2_left_period), triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: sawtooth from X=460 to X=650 -->
    <!-- Limit dot X and Y to stay within triangle boundaries to prevent overflow -->
    <ParamString id="dot3_left_x" name="dot3_left_x" group="General" default="`${min(triangle3_left_x + (Compare0 * triangle3_left_width / Period0), triangle3_left_x + triangle3_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_left_y" name="dot3_left_y" group="General" default="`${max(base_y - (Compare0 * triangle3_left_height / Period0), triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_left_cc1_x" name="dot3_left_cc1_x" group="General" default="`${min(triangle3_left_x + (Compare2 * triangle3_left_width / Period0), triangle3_left_x + triangle3_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_left_cc1_y" name="dot3_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle3_left_height / Period0), triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: sawtooth from X=650 to X=840 -->
    <!-- Limit dot X and Y to stay within triangle boundaries to prevent overflow -->
    <ParamString id="dot4_left_x" name="dot4_left_x" group="General" default="`${min(triangle4_left_x + (Compare0 * triangle4_left_width / triangle4_left_period), triangle4_left_x + triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_y" name="dot4_left_y" group="General" default="`${max(base_y - (Compare0 * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_cc1_x" name="dot4_left_cc1_x" group="General" default="`${min(triangle4_left_x + (Compare2 * triangle4_left_width / triangle4_left_period), triangle4_left_x + triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_cc1_y" name="dot4_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4 buffer dots: uses triangle4 dimensions with buffer compare values -->
    <!-- Note: Compare1/Compare3 are in range [0, triangle4_left_period], use actual period value as denominator -->
    <!-- Limit dot X and Y to stay within triangle boundaries to prevent overflow -->
    <ParamString id="dot4_left_buff_x" name="dot4_left_buffer_x" group="General" default="`${min(triangle4_left_x + (Compare1 * triangle4_left_width / triangle4_left_period), triangle4_left_x + triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_buff_y" name="dot4_left_buffer_y" group="General" default="`${max(base_y - (Compare1 * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_buff_cc1_x" name="dot4_left_buffer_cc1_x" group="General" default="`${min(triangle4_left_x + (Compare3 * triangle4_left_width / triangle4_left_period), triangle4_left_x + triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_left_buff_cc1_y" name="dot4_left_buffer_cc1_y" group="General" default="`${max(base_y - (Compare3 * triangle4_left_height / triangle4_left_period), triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Dot visibility parameters for left-aligned PWM (hide dots when compare > period) -->
    <!-- Period 1: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="show_dot1_left" name="show_dot1_left" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot1_left_cc1" name="show_dot1_left_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="show_dot2_left" name="show_dot2_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot2_left_cc1" name="show_dot2_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="show_dot3_left" name="show_dot3_left" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot3_left_cc1" name="show_dot3_left_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="show_dot4_left" name="show_dot4_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot4_left_cc1" name="show_dot4_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse main dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Period 1: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="hide_dot1_left" name="hide_dot1_left" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot1_left_cc1" name="hide_dot1_left_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: hide if ACTIVE compare > period -->
    <ParamBool id="hide_dot2_left" name="hide_dot2_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot2_left_cc1" name="hide_dot2_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="hide_dot3_left" name="hide_dot3_left" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot3_left_cc1" name="hide_dot3_left_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: hide if ACTIVE compare > period -->
    <ParamBool id="hide_dot4_left" name="hide_dot4_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_left_cc1" name="hide_dot4_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- These parameters are no longer used - using hide variants instead for buffered dot visibility -->
    <!-- The inverse hide logic is more reliable for ParamBool evaluation -->
    <!-- show_dot2_buff_left and show_dot4_buff_left kept for historical compatibility (deprecated) -->
    <ParamBool id="show_dot2_buff_left" name="show_dot2_buff_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot2_buff_left_cc1" name="show_dot2_buff_left_cc1" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <ParamBool id="show_dot4_buff_left" name="show_dot4_buff_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot4_buff_left_cc1" name="show_dot4_buff_left_cc1" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Error message visibility: show when any Period exceeds pCntWidthMax -->
    <ParamString id="ERROR_MESSAGE_OPACITY" name="ERROR_MESSAGE_OPACITY" group="General" default="`${(Period0 > pCntWidthMax || (EnablePeriodSwap &amp;&amp; Period1 > pCntWidthMax)) ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- Compare error message visibility: show when Compare exceeds pCntWidthMax, only check Compare1 and Compare3 when their respective swap is enabled -->
    <ParamString id="COMPARE_ERROR_OPACITY" name="COMPARE_ERROR_OPACITY" group="General" default="`${(Compare0 > pCntWidthMax || (EnableCompare0Swap &amp;&amp; Compare1 > pCntWidthMax) || Compare2 > pCntWidthMax || (EnableCompare1Swap &amp;&amp; Compare3 > pCntWidthMax)) ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse buffered dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Only show buffered dots when swap is ENABLED (EnableCompare0Swap or EnableCompare1Swap) -->
    <ParamBool id="hide_dot2_buff_left" name="hide_dot2_buff_left" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot2_buff_left_cc1" name="hide_dot2_buff_left_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_buff_left" name="hide_dot4_buff_left" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_buff_left_cc1" name="hide_dot4_buff_left_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Buffered compare line visibility (hide when compare value > period) -->
    <!-- Period 2&4 when swap ENABLED: Compare1 for Compare0 line, Compare3 for Compare1 line -->
    <ParamBool id="show_compare2_left" name="show_compare2_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_compare2_cc1_left" name="show_compare2_cc1_left" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- ===== RIGHT-ALIGNED MODE VARIABLES (for pwm_right_align.svg with 4 sawtooth periods) ===== -->
    <!-- Total available width for all four triangles (fixed to fit in SVG canvas: 80 to 840 = 760 pixels) -->
    <ParamString id="total_triangle_right_width" name="total_triangle_right_width" group="General" default="760" visible="false" editable="false" desc="" />
    <!-- Denominator: sum of all four triangle periods (1 + 2 + 3 + 4 correspond to P0 + P1 + P0 + P1) -->
    <ParamString id="period_right_sum" name="period_right_sum" group="General" default="`${Period0 + (EnablePeriodSwap ? Period1 : Period0) + Period0 + (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED triangle scaling (separate variables for proportional scaling) -->
    <!-- Right-aligned triangles are inverted sawtooth: fall from period peak to zero at right edge -->
    <ParamString id="triangle1_right_raw_scale" name="triangle1_right_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_scale" name="triangle1_right_scale" group="General" default="`${(triangle1_right_raw_scale &lt; 200) ? 200 : triangle1_right_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_height" name="triangle1_right_height" group="General" default="`${(reference_height * triangle1_right_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_width" name="triangle1_right_width" group="General" default="`${(Period0 * total_triangle_right_width) / period_right_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_peak_y" name="triangle1_right_peak_y" group="General" default="`${base_y - triangle1_right_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 -->
    <ParamString id="triangle2_right_period" name="triangle2_right_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_raw_scale" name="triangle2_right_raw_scale" group="General" default="`${EnablePeriodSwap ? ((triangle2_right_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_scale" name="triangle2_right_scale" group="General" default="`${(triangle2_right_raw_scale &lt; 200) ? 200 : triangle2_right_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_height" name="triangle2_right_height" group="General" default="`${(reference_height * triangle2_right_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_width" name="triangle2_right_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * total_triangle_right_width) / period_right_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_peak_y" name="triangle2_right_peak_y" group="General" default="`${base_y - triangle2_right_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 3: Always uses Period0 -->
    <ParamString id="triangle3_right_raw_scale" name="triangle3_right_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_scale" name="triangle3_right_scale" group="General" default="`${(triangle3_right_raw_scale &lt; 200) ? 200 : triangle3_right_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_height" name="triangle3_right_height" group="General" default="`${(reference_height * triangle3_right_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_width" name="triangle3_right_width" group="General" default="`${(Period0 * total_triangle_right_width) / period_right_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_peak_y" name="triangle3_right_peak_y" group="General" default="`${base_y - triangle3_right_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 4: Uses Period1 if EnablePeriodSwap, otherwise Period0 -->
    <ParamString id="triangle4_right_period" name="triangle4_right_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_raw_scale" name="triangle4_right_raw_scale" group="General" default="`${EnablePeriodSwap ? ((triangle4_right_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_scale" name="triangle4_right_scale" group="General" default="`${(triangle4_right_raw_scale &lt; 200) ? 200 : triangle4_right_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_height" name="triangle4_right_height" group="General" default="`${(reference_height * triangle4_right_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_width" name="triangle4_right_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * total_triangle_right_width) / period_right_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_peak_y" name="triangle4_right_peak_y" group="General" default="`${base_y - triangle4_right_height}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED triangle endpoint coordinates (for right-aligned mode) -->
    <ParamString id="triangle1_right_left_x" name="triangle1_right_left_x" group="General" default="80" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_right_right_x" name="triangle1_right_right_x" group="General" default="`${triangle1_right_left_x + triangle1_right_width}`" visible="false" editable="false" desc="" />
    
    <ParamString id="triangle2_right_left_x" name="triangle2_right_left_x" group="General" default="`${triangle1_right_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle2_right_right_x" name="triangle2_right_right_x" group="General" default="`${triangle2_right_left_x + triangle2_right_width}`" visible="false" editable="false" desc="" />
    
    <ParamString id="triangle3_right_left_x" name="triangle3_right_left_x" group="General" default="`${triangle2_right_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle3_right_right_x" name="triangle3_right_right_x" group="General" default="`${triangle3_right_left_x + triangle3_right_width}`" visible="false" editable="false" desc="" />
    
    <ParamString id="triangle4_right_left_x" name="triangle4_right_left_x" group="General" default="`${triangle3_right_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle4_right_right_x" name="triangle4_right_right_x" group="General" default="`${triangle4_right_left_x + triangle4_right_width}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED compare line Y positions (using proper triangle heights and periods) -->
    <!-- Period 1: sawtooth from X=triangle1_right_left_x to X=triangle1_right_right_x -->
    <ParamString id="compare1_right_y" name="compare1_right_y" group="General" default="`${max(base_y - (Compare0 * triangle1_right_height / Period0), triangle1_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare1_right_cc1_y" name="compare1_right_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle1_right_height / Period0), triangle1_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: sawtooth from X=triangle2_right_left_x to X=triangle2_right_right_x -->
    <!-- When swap is enabled, Compare1/Compare3 are in range [0, Period0], so divide by Period0 -->
    <ParamString id="compare2_right_y" name="compare2_right_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle2_right_height / triangle2_right_period), triangle2_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare2_right_cc1_y" name="compare2_right_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle2_right_height / triangle2_right_period), triangle2_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: sawtooth from X=triangle3_right_left_x to X=triangle3_right_right_x -->
    <ParamString id="compare3_right_y" name="compare3_right_y" group="General" default="`${max(base_y - (Compare0 * triangle3_right_height / Period0), triangle3_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare3_right_cc1_y" name="compare3_right_cc1_y" group="General" default="`${max(base_y - (Compare2 * triangle3_right_height / Period0), triangle3_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: sawtooth from X=triangle4_right_left_x to X=triangle4_right_right_x -->
    <!-- When swap is enabled, use triangle4_right_period for proper scaling -->
    <ParamString id="compare4_right_y" name="compare4_right_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle4_right_height / triangle4_right_period), triangle4_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare4_right_cc1_y" name="compare4_right_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle4_right_height / triangle4_right_period), triangle4_right_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED buffered compare lines (blue and violet lines for swapped values) -->
    <!-- These use Compare1/Compare3 (buffered compare values) scaled by triangle2_right_period and triangle4_right_period -->
    <!-- Period 2: Buffered compare line Y positions (blue for Compare1, violet for Compare3) -->
    <ParamString id="compare2_right_buff_y" name="compare2_right_buff_y" group="General" default="`${max(base_y - (Compare1 * triangle2_right_height / triangle2_right_period), triangle2_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare2_right_buff_cc1_y" name="compare2_right_buff_cc1_y" group="General" default="`${max(base_y - (Compare3 * triangle2_right_height / triangle2_right_period), triangle2_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: Buffered compare line Y positions (blue for Compare1, violet for Compare3) -->
    <ParamString id="compare4_right_buff_y" name="compare4_right_buff_y" group="General" default="`${max(base_y - (Compare1 * triangle4_right_height / triangle4_right_period), triangle4_right_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="compare4_right_buff_cc1_y" name="compare4_right_buff_cc1_y" group="General" default="`${max(base_y - (Compare3 * triangle4_right_height / triangle4_right_period), triangle4_right_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED period line Y positions (touching top of sawteeth for each period) -->
    <ParamString id="period1_right_line_y" name="period1_right_line_y" group="General" default="`${triangle1_right_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period2_right_line_y" name="period2_right_line_y" group="General" default="`${triangle2_right_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period3_right_line_y" name="period3_right_line_y" group="General" default="`${triangle3_right_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="period4_right_line_y" name="period4_right_line_y" group="General" default="`${triangle4_right_peak_y}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED dot coordinates for 4 periods (using proper scaling and triangle dimensions) -->
    <!-- Period 1: Compare0/Compare2 dots (always visible) -->
    <ParamString id="dot1_right_x" name="dot1_right_x" group="General" default="`${max(triangle1_right_right_x - (Compare0 * triangle1_right_width / Period0), triangle1_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_right_y" name="dot1_right_y" group="General" default="`${base_y - (Compare0 * triangle1_right_height / Period0)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_right_cc1_x" name="dot1_right_cc1_x" group="General" default="`${max(triangle1_right_right_x - (Compare2 * triangle1_right_width / Period0), triangle1_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot1_right_cc1_y" name="dot1_right_cc1_y" group="General" default="`${base_y - (Compare2 * triangle1_right_height / Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: Compare0/Compare2 or Compare1/Compare3 based on swap -->
    <ParamString id="dot2_right_x" name="dot2_right_x" group="General" default="`${max(triangle2_right_right_x - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle2_right_width / (EnableCompare0Swap ? Period0 : triangle2_right_period)), triangle2_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_y" name="dot2_right_y" group="General" default="`${base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle2_right_height / (EnableCompare0Swap ? Period0 : triangle2_right_period))}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_cc1_x" name="dot2_right_cc1_x" group="General" default="`${max(triangle2_right_right_x - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle2_right_width / (EnableCompare1Swap ? Period0 : triangle2_right_period)), triangle2_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_cc1_y" name="dot2_right_cc1_y" group="General" default="`${base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle2_right_height / (EnableCompare1Swap ? Period0 : triangle2_right_period))}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: Compare0/Compare2 dots (always visible) -->
    <ParamString id="dot3_right_x" name="dot3_right_x" group="General" default="`${max(triangle3_right_right_x - (Compare0 * triangle3_right_width / Period0), triangle3_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_right_y" name="dot3_right_y" group="General" default="`${base_y - (Compare0 * triangle3_right_height / Period0)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_right_cc1_x" name="dot3_right_cc1_x" group="General" default="`${max(triangle3_right_right_x - (Compare2 * triangle3_right_width / Period0), triangle3_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_right_cc1_y" name="dot3_right_cc1_y" group="General" default="`${base_y - (Compare2 * triangle3_right_height / Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: Compare0/Compare2 or Compare1/Compare3 based on swap -->
    <ParamString id="dot4_right_x" name="dot4_right_x" group="General" default="`${max(triangle4_right_right_x - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle4_right_width / (EnableCompare0Swap ? Period0 : triangle4_right_period)), triangle4_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_y" name="dot4_right_y" group="General" default="`${base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * triangle4_right_height / (EnableCompare0Swap ? Period0 : triangle4_right_period))}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_cc1_x" name="dot4_right_cc1_x" group="General" default="`${max(triangle4_right_right_x - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle4_right_width / (EnableCompare1Swap ? Period0 : triangle4_right_period)), triangle4_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_cc1_y" name="dot4_right_cc1_y" group="General" default="`${base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * triangle4_right_height / (EnableCompare1Swap ? Period0 : triangle4_right_period))}`" visible="false" editable="false" desc="" />
    
    <!-- RIGHT-ALIGNED buffered dots for periods 2 and 4 (when swaps are enabled) -->
    <ParamString id="dot2_right_buff_x" name="dot2_right_buff_x" group="General" default="`${max(triangle2_right_right_x - (Compare1 * triangle2_right_width / triangle2_right_period), triangle2_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_buff_y" name="dot2_right_buff_y" group="General" default="`${base_y - (Compare1 * triangle2_right_height / triangle2_right_period)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_buff_cc1_x" name="dot2_right_buff_cc1_x" group="General" default="`${max(triangle2_right_right_x - (Compare3 * triangle2_right_width / triangle2_right_period), triangle2_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_right_buff_cc1_y" name="dot2_right_buff_cc1_y" group="General" default="`${base_y - (Compare3 * triangle2_right_height / triangle2_right_period)}`" visible="false" editable="false" desc="" />
    
    <ParamString id="dot4_right_buff_x" name="dot4_right_buff_x" group="General" default="`${max(triangle4_right_right_x - (Compare1 * triangle4_right_width / triangle4_right_period), triangle4_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_buff_y" name="dot4_right_buff_y" group="General" default="`${base_y - (Compare1 * triangle4_right_height / triangle4_right_period)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_buff_cc1_x" name="dot4_right_buff_cc1_x" group="General" default="`${max(triangle4_right_right_x - (Compare3 * triangle4_right_width / triangle4_right_period), triangle4_right_left_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_right_buff_cc1_y" name="dot4_right_buff_cc1_y" group="General" default="`${base_y - (Compare3 * triangle4_right_height / triangle4_right_period)}`" visible="false" editable="false" desc="" />
    
    <!-- ===== RIGHT-ALIGNED DOT VISIBILITY PARAMETERS (for pwm_right_align.svg) ===== -->
    <!-- Dot visibility for right-aligned PWM (hide dots when compare > period) -->
    <!-- Period 1: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="show_dot1_right" name="show_dot1_right" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot1_right_cc1" name="show_dot1_right_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="show_dot2_right" name="show_dot2_right" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot2_right_cc1" name="show_dot2_right_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="show_dot3_right" name="show_dot3_right" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot3_right_cc1" name="show_dot3_right_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="show_dot4_right" name="show_dot4_right" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_dot4_right_cc1" name="show_dot4_right_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse main dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Period 1: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="hide_dot1_right" name="hide_dot1_right" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot1_right_cc1" name="hide_dot1_right_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: hide if ACTIVE compare > period -->
    <ParamBool id="hide_dot2_right" name="hide_dot2_right" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot2_right_cc1" name="hide_dot2_right_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="hide_dot3_right" name="hide_dot3_right" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot3_right_cc1" name="hide_dot3_right_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: hide if ACTIVE compare > period -->
    <ParamBool id="hide_dot4_right" name="hide_dot4_right" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_right_cc1" name="hide_dot4_right_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse buffered dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Only show buffered dots when swap is ENABLED (EnableCompare0Swap or EnableCompare1Swap) -->
    <ParamBool id="hide_dot2_buff_right" name="hide_dot2_buff_right" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot2_buff_right_cc1" name="hide_dot2_buff_right_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_buff_right" name="hide_dot4_buff_right" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="hide_dot4_buff_right_cc1" name="hide_dot4_buff_right_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Buffered compare line visibility (hide when compare value > period) -->
    <!-- Period 2&4 when swap ENABLED: Compare1 for Compare0 line, Compare3 for Compare1 line -->
    <ParamBool id="show_compare2_right" name="show_compare2_right" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_compare2_cc1_right" name="show_compare2_cc1_right" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />

    <!-- RIGHT-ALIGNED dot visibility: hide when compare > period -->
    <ParamBool id="show_right_align_dot1_3" name="show_right_align_dot1_3" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_right_align_dot1_3_cc1" name="show_right_align_dot1_3_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_right_align_dot2_4" name="show_right_align_dot2_4" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnableCompare0Swap ? Period0 : (EnablePeriodSwap ? Period1 : Period0))}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_right_align_dot2_4_cc1" name="show_right_align_dot2_4_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnableCompare1Swap ? Period0 : (EnablePeriodSwap ? Period1 : Period0))}`" visible="false" editable="false" desc="" />
    
    <!-- ===== CENTER-ALIGNED MODE VARIABLES (for pwm_center_align.svg with 2 triangles periods) ===== -->
    <!-- ===== CENTER-ALIGNED period line Y positions ===== -->
    <ParamString id="center_align_triangle1_raw_scale" name="center_align_triangle1_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_scale" name="center_align_triangle1_scale" group="General" default="`${(center_align_triangle1_raw_scale &lt; 200) ? 200 : center_align_triangle1_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_height" name="center_align_triangle1_height" group="General" default="`${(reference_height * center_align_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_half_width" name="center_align_triangle1_half_width" group="General" default="`${(reference_half_width * center_align_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_peak_y" name="center_align_triangle1_peak_y" group="General" default="`${base_y - center_align_triangle1_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="center_align_triangle2_period" name="center_align_triangle2_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_raw_scale" name="center_align_triangle2_raw_scale" group="General" default="`${EnablePeriodSwap ? ((center_align_triangle2_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_scale" name="center_align_triangle2_scale" group="General" default="`${(center_align_triangle2_raw_scale &lt; 200) ? 200 : center_align_triangle2_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_height" name="center_align_triangle2_height" group="General" default="`${(reference_height * center_align_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_half_width" name="center_align_triangle2_half_width" group="General" default="`${(reference_half_width * center_align_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_peak_y" name="center_align_triangle2_peak_y" group="General" default="`${base_y - center_align_triangle2_height}`" visible="false" editable="false" desc="" />
    
    <!-- Compare levels for each triangle - proportional to their periods -->
    <!-- Triangle 1 always shows Compare0 and Compare2 (when CC1 enabled) -->
    <ParamString id="center_align_compare1_y" name="center_align_compare1_y" group="General" default="`${max(base_y - ((Compare0 * center_align_triangle1_height * 1000) / (Period0 * 1000)), center_align_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_compare1_cc1_y" name="center_align_compare1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_align_triangle1_height * 1000) / (Period0 * 1000)), center_align_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 shows Compare0/Compare2 when no swap, or Compare1/Compare3 when swap enabled -->
    <ParamString id="center_align_compare2_y" name="center_align_compare2_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_align_triangle2_height * 1000) / (center_align_triangle2_period * 1000)), center_align_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_compare2_cc1_y" name="center_align_compare2_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_align_triangle2_height * 1000) / (center_align_triangle2_period * 1000)), center_align_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period lines - horizontal lines aligned with triangle peaks -->
    <!-- When EnablePeriodSwap is false, both triangles use Period0, so period lines stay at same height -->
    <!-- When EnablePeriodSwap is true, each triangle gets its own period line height aligned with triangle peak -->
    <ParamString id="center_align_period1_line_y" name="center_align_period1_line_y" group="General" default="`${EnablePeriodSwap ? center_align_triangle1_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_period2_line_y" name="center_align_period2_line_y" group="General" default="`${EnablePeriodSwap ? center_align_triangle2_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle endpoint coordinates for proper proportional scaling -->
    <ParamString id="center_align_triangle1_left_x" name="center_align_triangle1_left_x" group="General" default="`${265 - center_align_triangle1_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_peak_x" name="center_align_triangle1_peak_x" group="General" default="265" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle1_right_x" name="center_align_triangle1_right_x" group="General" default="`${265 + center_align_triangle1_half_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 connects to Triangle 1 - starts where Triangle 1 ends -->
    <ParamString id="center_align_triangle2_left_x" name="center_align_triangle2_left_x" group="General" default="`${center_align_triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_peak_x" name="center_align_triangle2_peak_x" group="General" default="`${center_align_triangle2_left_x + center_align_triangle2_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_triangle2_right_x" name="center_align_triangle2_right_x" group="General" default="`${center_align_triangle2_left_x + (center_align_triangle2_half_width * 2)}`" visible="false" editable="false" desc="" />
    
    <!-- Main period line for single period mode (aligned with triangle peak) -->
    <ParamString id="center_align_main_period_line_y" name="center_align_main_period_line_y" group="General" default="`${reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_main_period_left_x" name="center_align_main_period_left_x" group="General" default="`${center_align_triangle1_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_main_period_right_x" name="center_align_main_period_right_x" group="General" default="`${center_align_triangle2_right_x}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for period lines -->
    <ParamString id="center_align_show_individual_periods" name="center_align_show_individual_periods" group="General" default="`${EnablePeriodSwap ? 1.0 : 0.0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_show_main_period" name="center_align_show_main_period" group="General" default="`${EnablePeriodSwap ? 0.0 : 1.0}`" visible="false" editable="false" desc="" />
    
    <!-- DOT coordinates for intersections with triangles -->
    <!-- Triangle 1 Compare0 dots (always visible) -->
    <ParamString id="center_align_dot1_x" name="center_align_dot1_x" group="General" default="`${min(center_align_triangle1_left_x + (Compare0 * center_align_triangle1_half_width / Period0), center_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot2_x" name="center_align_dot2_x" group="General" default="`${max(center_align_triangle1_right_x - (Compare0 * center_align_triangle1_half_width / Period0), center_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 dots (visible when CC1 enabled) -->
    <ParamString id="center_align_dot1_cc1_x" name="center_align_dot1_cc1_x" group="General" default="`${min(center_align_triangle1_left_x + (Compare2 * center_align_triangle1_half_width / Period0), center_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot2_cc1_x" name="center_align_dot2_cc1_x" group="General" default="`${max(center_align_triangle1_right_x - (Compare2 * center_align_triangle1_half_width / Period0), center_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <ParamString id="center_align_dot3_x" name="center_align_dot3_x" group="General" default="`${min(center_align_triangle2_left_x + ((EnableCompare0Swap ? Compare1 : Compare0) * center_align_triangle2_half_width / center_align_triangle2_period), center_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot4_x" name="center_align_dot4_x" group="General" default="`${max(center_align_triangle2_right_x - ((EnableCompare0Swap ? Compare1 : Compare0) * center_align_triangle2_half_width / center_align_triangle2_period), center_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 dots (visible when CC1 enabled) -->
    <ParamString id="center_align_dot3_cc1_x" name="center_align_dot3_cc1_x" group="General" default="`${min(center_align_triangle2_left_x + ((EnableCompare1Swap ? Compare3 : Compare2) * center_align_triangle2_half_width / center_align_triangle2_period), center_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot4_cc1_x" name="center_align_dot4_cc1_x" group="General" default="`${max(center_align_triangle2_right_x - ((EnableCompare1Swap ? Compare3 : Compare2) * center_align_triangle2_half_width / center_align_triangle2_period), center_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <!-- DOT Y coordinates for triangular intersections -->
    <!-- Triangle 1 Compare0 Y dots (always visible) -->
    <ParamString id="center_align_dot1_y" name="center_align_dot1_y" group="General" default="`${max(base_y - ((Compare0 * center_align_triangle1_height) / Period0), center_align_compare1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot2_y" name="center_align_dot2_y" group="General" default="`${max(base_y - ((Compare0 * center_align_triangle1_height) / Period0), center_align_compare1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 Y dots (visible when CC1 enabled) -->
    <ParamString id="center_align_dot1_cc1_y" name="center_align_dot1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_align_triangle1_height) / Period0), center_align_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot2_cc1_y" name="center_align_dot2_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_align_triangle1_height) / Period0), center_align_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 Compare Y dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <ParamString id="center_align_dot3_y" name="center_align_dot3_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_align_triangle2_height) / center_align_triangle2_period), center_align_compare2_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot4_y" name="center_align_dot4_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_align_triangle2_height) / center_align_triangle2_period), center_align_compare2_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 Y dots (visible when CC1 enabled) -->
    <ParamString id="center_align_dot3_cc1_y" name="center_align_dot3_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_align_triangle2_height) / center_align_triangle2_period), center_align_compare2_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_align_dot4_cc1_y" name="center_align_dot4_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_align_triangle2_height) / center_align_triangle2_period), center_align_compare2_cc1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- CENTER-ALIGNED dot visibility: hide when compare > period -->
    <ParamBool id="show_center_align_dot1_2" name="show_center_align_dot1_2" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_center_align_dot1_2_cc1" name="show_center_align_dot1_2_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_center_align_dot3_4" name="show_center_align_dot3_4" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= center_align_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_center_align_dot3_4_cc1" name="show_center_align_dot3_4_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= center_align_triangle2_period}`" visible="false" editable="false" desc="" />
    
    <!-- ===== ASYMMETRIC-ALIGNED MODE VARIABLES (2 triangles: up-down counting with dynamic scaling) ===== -->
    <!-- Triangle 1 Geometry (Fixed position, starts at x_left=80) -->
    <!-- Triangle 1: Always uses Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="asym_triangle1_raw_scale" name="asym_triangle1_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_scale" name="asym_triangle1_scale" group="General" default="`${(asym_triangle1_raw_scale &lt; 200) ? 200 : asym_triangle1_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_height" name="asym_triangle1_height" group="General" default="`${(reference_height * asym_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_half_width" name="asym_triangle1_half_width" group="General" default="`${(reference_half_width * asym_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_peak_y" name="asym_triangle1_peak_y" group="General" default="`${base_y - asym_triangle1_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="asym_triangle2_period" name="asym_triangle2_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_raw_scale" name="asym_triangle2_raw_scale" group="General" default="`${EnablePeriodSwap ? ((asym_triangle2_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_scale" name="asym_triangle2_scale" group="General" default="`${(asym_triangle2_raw_scale &lt; 200) ? 200 : asym_triangle2_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_height" name="asym_triangle2_height" group="General" default="`${(reference_height * asym_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_half_width" name="asym_triangle2_half_width" group="General" default="`${(reference_half_width * asym_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_peak_y" name="asym_triangle2_peak_y" group="General" default="`${base_y - asym_triangle2_height}`" visible="false" editable="false" desc="" />
    
    <!-- Compare levels for each triangle - proportional to their periods -->
    <!-- Triangle 1 always shows Compare0 and Compare2 (when CC1 enabled) -->
    <ParamString id="asym_compare1_y" name="asym_compare1_y" group="General" default="`${max(base_y - ((Compare0 * asym_triangle1_height * 1000) / (Period0 * 1000)), asym_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_compare1_cc1_y" name="asym_compare1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * asym_triangle1_height * 1000) / (Period0 * 1000)), asym_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 shows Compare0/Compare2 when no swap, or Compare1/Compare3 when swap enabled -->
    <ParamString id="asym_compare2_y" name="asym_compare2_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * asym_triangle2_height * 1000) / (asym_triangle2_period * 1000)), asym_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Static Compare0 Y position for Triangle 2 red line (always Compare0, never changes with swap) -->
    <ParamString id="asym_compare0_triangle2_y" name="asym_compare0_triangle2_y" group="General" default="`${max(base_y - ((Compare0 * asym_triangle2_height * 1000) / (asym_triangle2_period * 1000)), asym_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <ParamString id="asym_compare2_cc1_y" name="asym_compare2_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * asym_triangle2_height * 1000) / (asym_triangle2_period * 1000)), asym_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period lines - horizontal lines aligned with triangle peaks -->
    <!-- When EnablePeriodSwap is false, both triangles use Period0, so period lines stay at same height -->
    <!-- When EnablePeriodSwap is true, each triangle gets its own period line height aligned with triangle peak -->
    <ParamString id="asym_period1_line_y" name="asym_period1_line_y" group="General" default="`${EnablePeriodSwap ? asym_triangle1_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_period2_line_y" name="asym_period2_line_y" group="General" default="`${EnablePeriodSwap ? asym_triangle2_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle endpoint coordinates for proper proportional scaling -->
    <ParamString id="asym_triangle1_left_x" name="asym_triangle1_left_x" group="General" default="`${265 - asym_triangle1_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_peak_x" name="asym_triangle1_peak_x" group="General" default="265" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle1_right_x" name="asym_triangle1_right_x" group="General" default="`${265 + asym_triangle1_half_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 connects to Triangle 1 - starts where Triangle 1 ends -->
    <ParamString id="asym_triangle2_left_x" name="asym_triangle2_left_x" group="General" default="`${asym_triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_peak_x" name="asym_triangle2_peak_x" group="General" default="`${asym_triangle2_left_x + asym_triangle2_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_triangle2_right_x" name="asym_triangle2_right_x" group="General" default="`${asym_triangle2_left_x + (asym_triangle2_half_width * 2)}`" visible="false" editable="false" desc="" />
    
    <!-- Main period line for single period mode (aligned with triangle peak) -->
    <ParamString id="asym_main_period_line_y" name="asym_main_period_line_y" group="General" default="`${reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_main_period_left_x" name="asym_main_period_left_x" group="General" default="`${asym_triangle1_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_main_period_right_x" name="asym_main_period_right_x" group="General" default="`${asym_triangle2_right_x}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for period lines -->
    <ParamString id="asym_show_individual_periods" name="asym_show_individual_periods" group="General" default="`${EnablePeriodSwap ? 1.0 : 0.0}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_show_main_period" name="asym_show_main_period" group="General" default="`${EnablePeriodSwap ? 0.0 : 1.0}`" visible="false" editable="false" desc="" />
    
    <!-- DOT coordinates for intersections with triangles -->
    <!-- Triangle 1 Compare0 dots (always visible) -->
    <ParamString id="asym_dot1_x" name="asym_dot1_x" group="General" default="`${min(asym_triangle1_left_x + (Compare0 * asym_triangle1_half_width / Period0), asym_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot2_x" name="asym_dot2_x" group="General" default="`${max(asym_triangle1_right_x - (Compare0 * asym_triangle1_half_width / Period0), asym_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 dots (visible when CC1 enabled) -->
    <ParamString id="asym_dot1_cc1_x" name="asym_dot1_cc1_x" group="General" default="`${min(asym_triangle1_left_x + (Compare2 * asym_triangle1_half_width / Period0), asym_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot2_cc1_x" name="asym_dot2_cc1_x" group="General" default="`${max(asym_triangle1_right_x - (Compare2 * asym_triangle1_half_width / Period0), asym_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare1 Buff dot X position (visible when EnableCompare0Swap is true) -->
    <ParamString id="asym_dot2_cc1_buff_x" name="asym_dot2_cc1_buff_x" group="General" default="`${max(asym_triangle1_right_x - (Compare1 * asym_triangle1_half_width / Period0), asym_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <ParamString id="asym_dot3_x" name="asym_dot3_x" group="General" default="`${min(asym_triangle2_left_x + ((EnableCompare0Swap ? Compare1 : Compare0) * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_x" name="asym_dot4_x" group="General" default="`${max(asym_triangle2_right_x - ((EnableCompare0Swap ? Compare1 : Compare0) * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 static Compare0 dot X positions (always based on Compare0, never change with swap) -->
    <ParamString id="asym_dot3_compare0_x" name="asym_dot3_compare0_x" group="General" default="`${min(asym_triangle2_left_x + (Compare0 * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_compare0_x" name="asym_dot4_compare0_x" group="General" default="`${max(asym_triangle2_right_x - (Compare0 * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 dots (visible when CC1 enabled) -->
    <ParamString id="asym_dot3_cc1_x" name="asym_dot3_cc1_x" group="General" default="`${min(asym_triangle2_left_x + ((EnableCompare1Swap ? Compare3 : Compare2) * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_cc1_x" name="asym_dot4_cc1_x" group="General" default="`${max(asym_triangle2_right_x - ((EnableCompare1Swap ? Compare3 : Compare2) * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <!-- DOT Y coordinates for triangular intersections -->
    <!-- Triangle 1 Compare0 Y dots (always visible) -->
    <ParamString id="asym_dot1_y" name="asym_dot1_y" group="General" default="`${max(base_y - ((Compare0 * asym_triangle1_height) / Period0), asym_compare1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot2_y" name="asym_dot2_y" group="General" default="`${max(base_y - ((Compare0 * asym_triangle1_height) / Period0), asym_compare1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 Y dots (visible when CC1 enabled) -->
    <ParamString id="asym_dot1_cc1_y" name="asym_dot1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * asym_triangle1_height) / Period0), asym_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot2_cc1_y" name="asym_dot2_cc1_y" group="General" default="`${max(base_y - ((Compare2 * asym_triangle1_height) / Period0), asym_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 Compare Y dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <ParamString id="asym_dot3_y" name="asym_dot3_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * asym_triangle2_height) / asym_triangle2_period), asym_compare2_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_y" name="asym_dot4_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * asym_triangle2_height) / asym_triangle2_period), asym_compare2_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 Y dots (visible when CC1 enabled) -->
    <ParamString id="asym_dot3_cc1_y" name="asym_dot3_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * asym_triangle2_height) / asym_triangle2_period), asym_compare2_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_cc1_y" name="asym_dot4_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * asym_triangle2_height) / asym_triangle2_period), asym_compare2_cc1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 Compare1 Buff dot X positions (visible when EnableCompare0Swap is true) -->
    <ParamString id="asym_dot3_cc1_buff_x" name="asym_dot3_cc1_buff_x" group="General" default="`${min(asym_triangle2_left_x + (Compare1 * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_dot4_cc1_buff_x" name="asym_dot4_cc1_buff_x" group="General" default="`${max(asym_triangle2_right_x - (Compare1 * asym_triangle2_half_width / asym_triangle2_period), asym_triangle2_peak_x)}`" visible="false" editable="false" desc="" />

    <!-- CC0_MATCH overflow/underflow event lines (grey vertical lines showing where cc0_match occurs) -->
    <!-- Triangle 1: X position at peak where counter overflows (at top of triangle) -->
    <ParamString id="asym_cc0_match_line1_x" name="asym_cc0_match_line1_x" group="General" default="`${asym_triangle1_peak_x}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: X position at peak where counter overflows (at top of triangle) -->
    <ParamString id="asym_cc0_match_line2_x" name="asym_cc0_match_line2_x" group="General" default="`${asym_triangle2_peak_x}`" visible="false" editable="false" desc="" />

    <!-- Buffered Compare0 lines (Compare0_Buff) - shown on right side of overflow line when EnableCompare0Swap is true -->
    <!-- Triangle 1: Compare0_Buff Y position (always Compare0 on left, Compare0_Buff on right when swap enabled) -->
    <ParamString id="asym_compare1_buff_y" name="asym_compare1_buff_y" group="General" default="`${max(base_y - ((Compare1 * asym_triangle1_height * 1000) / (Period0 * 1000)), asym_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Compare0_Buff Y position (shown on right side when EnableCompare0Swap is true) -->
    <ParamString id="asym_compare2_buff_y" name="asym_compare2_buff_y" group="General" default="`${max(base_y - ((Compare1 * asym_triangle2_height * 1000) / (asym_triangle2_period * 1000)), asym_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Visibility controls for Compare 0 lines (split based on EnableCompare0Swap) -->
    <ParamString id="asym_compare1_full_opacity" name="asym_compare1_full_opacity" group="General" default="`${EnableCompare0Swap ? 0 : 1}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_compare1_left_opacity" name="asym_compare1_left_opacity" group="General" default="`${EnableCompare0Swap ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for Compare 0 Buff line (only visible when EnableCompare0Swap is true) -->
    <ParamString id="asym_compare1_buff_opacity" name="asym_compare1_buff_opacity" group="General" default="`${EnableCompare0Swap ? 1 : 0}`" visible="false" editable="false" desc="" />

    <!-- ASYMMETRIC-ALIGNED dot visibility: hide when compare > period (Triangle 1 uses Period0, Triangle 2 uses Period1 or Period0 based on EnablePeriodSwap) -->
    <ParamBool id="show_asym_align_dot1_2" name="show_asym_align_dot1_2" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_align_dot1_2_cc1" name="show_asym_align_dot1_2_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare0 and Compare0_Buff dot visibility: hide when compare > period -->
    <ParamBool id="show_asym_dot2_compare0" name="show_asym_dot2_compare0" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_dot2_buff" name="show_asym_dot2_buff" group="General" default="`${Compare1 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_dot2_buff_cc1" name="show_asym_dot2_buff_cc1" group="General" default="`${Compare3 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 Compare0 and Compare0_Buff dot visibility: hide when compare > period -->
    <ParamBool id="show_asym_dot4_compare0" name="show_asym_dot4_compare0" group="General" default="`${Compare0 &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_dot4_buff" name="show_asym_dot4_buff" group="General" default="`${Compare1 &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_dot4_buff_cc1" name="show_asym_dot4_buff_cc1" group="General" default="`${Compare3 &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 red Compare0 dots visibility: hide when Compare0 > period -->
    <ParamBool id="show_asym_dot3_4_compare0" name="show_asym_dot3_4_compare0" group="General" default="`${Compare0 &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_dot3_4_compare0_buff" name="show_asym_dot3_4_compare0_buff" group="General" default="`${Compare1 &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_align_dot3_4" name="show_asym_align_dot3_4" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_asym_align_dot3_4_cc1" name="show_asym_align_dot3_4_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= asym_triangle2_period}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for dot2 (right-side dot on Triangle 1 - hide when EnableCompare0Swap is true OR Compare0 > Period0) -->
    <ParamString id="asym_dot2_opacity" name="asym_dot2_opacity" group="General" default="`${(EnableCompare0Swap || !show_asym_dot2_compare0) ? 0 : 1}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for dot2 CC1 Buff (blue buff dot - only visible when EnableCompare0Swap is true AND Compare1 <= Period0) -->
    <ParamString id="asym_dot2_buff_opacity" name="asym_dot2_buff_opacity" group="General" default="`${(EnableCompare0Swap &amp;&amp; show_asym_dot2_buff) ? 1 : 0}`" visible="false" editable="false" desc="" />

    <!-- Visibility controls for Triangle 2 Compare 0 lines (split based on EnableCompare0Swap) -->
    <ParamString id="asym_compare2_full_opacity" name="asym_compare2_full_opacity" group="General" default="`${EnableCompare0Swap ? 0 : 1}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_compare2_left_opacity" name="asym_compare2_left_opacity" group="General" default="`${EnableCompare0Swap ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for Triangle 2 Compare 0 Buff line (only visible when EnableCompare0Swap is true) -->
    <ParamString id="asym_compare2_buff_opacity" name="asym_compare2_buff_opacity" group="General" default="`${EnableCompare0Swap ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for dot4 CC1 (right-side dot on Triangle 2 - hide when EnableCompare0Swap is true OR Compare0 > Triangle2 Period) -->
    <ParamString id="asym_dot4_opacity" name="asym_dot4_opacity" group="General" default="`${(EnableCompare0Swap || !show_asym_dot4_compare0) ? 0 : 1}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for dot4 CC1 Buff (blue buff dot - only visible when EnableCompare0Swap is true AND Compare1 <= Triangle2 Period) -->
    <ParamString id="asym_dot4_cc1_buff_opacity" name="asym_dot4_cc1_buff_opacity" group="General" default="`${(EnableCompare0Swap &amp;&amp; show_asym_dot4_buff) ? 1 : 0}`" visible="false" editable="false" desc="" />
    
    <!-- ===== ASYMMETRIC-ALIGNED_CC0_CC1 MODE VARIABLES (4 sawteeth) ===== -->
    <!-- Total available width for all four triangles (fixed to fit in SVG canvas: 80 to 840 = 760 pixels) -->
    <ParamString id="asym_cc0_cc1_total_triangle_left_width" name="asym_cc0_cc1_total_triangle_left_width" group="General" default="760" visible="false" editable="false" desc="" />
    <!-- Denominator: sum of all four triangle periods (1 + 2 + 3 + 4 correspond to P0 + P1 + P0 + P1) -->
    <ParamString id="asym_cc0_cc1_period_left_sum" name="asym_cc0_cc1_period_left_sum" group="General" default="`${Period0 + (EnablePeriodSwap ? Period1 : Period0) + Period0 + (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />

    <!-- LEFT-ALIGNED triangle scaling (separate variables for proportional scaling) -->
    <!-- Calculate each triangle's width proportionally -->
    <ParamString id="asym_cc0_cc1_triangle1_left_width" name="asym_cc0_cc1_triangle1_left_width" group="General" default="`${(Period0 * asym_cc0_cc1_total_triangle_left_width) / asym_cc0_cc1_period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_width" name="asym_cc0_cc1_triangle2_left_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * asym_cc0_cc1_total_triangle_left_width) / asym_cc0_cc1_period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_left_width" name="asym_cc0_cc1_triangle3_left_width" group="General" default="`${(Period0 * asym_cc0_cc1_total_triangle_left_width) / asym_cc0_cc1_period_left_sum}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_width" name="asym_cc0_cc1_triangle4_left_width" group="General" default="`${((EnablePeriodSwap ? Period1 : Period0) * asym_cc0_cc1_total_triangle_left_width) / asym_cc0_cc1_period_left_sum}`" visible="false" editable="false" desc="" />

    <ParamString id="asym_cc0_cc1_triangle1_left_raw_scale" name="asym_cc0_cc1_triangle1_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle1_left_scale" name="asym_cc0_cc1_triangle1_left_scale" group="General" default="`${(asym_cc0_cc1_triangle1_left_raw_scale &lt; 200) ? 200 : asym_cc0_cc1_triangle1_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle1_left_height" name="asym_cc0_cc1_triangle1_left_height" group="General" default="`${(reference_height * asym_cc0_cc1_triangle1_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle1_left_half_width" name="asym_cc0_cc1_triangle1_left_half_width" group="General" default="`${(reference_half_width * asym_cc0_cc1_triangle1_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle1_left_peak_y" name="asym_cc0_cc1_triangle1_left_peak_y" group="General" default="`${base_y - asym_cc0_cc1_triangle1_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="asym_cc0_cc1_triangle2_left_period" name="asym_cc0_cc1_triangle2_left_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_raw_scale" name="asym_cc0_cc1_triangle2_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((asym_cc0_cc1_triangle2_left_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_scale" name="asym_cc0_cc1_triangle2_left_scale" group="General" default="`${(asym_cc0_cc1_triangle2_left_raw_scale &lt; 200) ? 200 : asym_cc0_cc1_triangle2_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_height" name="asym_cc0_cc1_triangle2_left_height" group="General" default="`${(reference_height * asym_cc0_cc1_triangle2_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_half_width" name="asym_cc0_cc1_triangle2_left_half_width" group="General" default="`${(reference_half_width * asym_cc0_cc1_triangle2_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_left_peak_y" name="asym_cc0_cc1_triangle2_left_peak_y" group="General" default="`${base_y - asym_cc0_cc1_triangle2_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 3: Always uses Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="asym_cc0_cc1_triangle3_left_raw_scale" name="asym_cc0_cc1_triangle3_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_left_scale" name="asym_cc0_cc1_triangle3_left_scale" group="General" default="`${(asym_cc0_cc1_triangle3_left_raw_scale &lt; 200) ? 200 : asym_cc0_cc1_triangle3_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_left_height" name="asym_cc0_cc1_triangle3_left_height" group="General" default="`${(reference_height * asym_cc0_cc1_triangle3_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_left_half_width" name="asym_cc0_cc1_triangle3_left_half_width" group="General" default="`${(reference_half_width * asym_cc0_cc1_triangle3_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_left_peak_y" name="asym_cc0_cc1_triangle3_left_peak_y" group="General" default="`${base_y - asym_cc0_cc1_triangle3_left_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 4: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="asym_cc0_cc1_triangle4_left_period" name="asym_cc0_cc1_triangle4_left_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_raw_scale" name="asym_cc0_cc1_triangle4_left_raw_scale" group="General" default="`${EnablePeriodSwap ? ((asym_cc0_cc1_triangle4_left_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_scale" name="asym_cc0_cc1_triangle4_left_scale" group="General" default="`${(asym_cc0_cc1_triangle4_left_raw_scale &lt; 200) ? 200 : asym_cc0_cc1_triangle4_left_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_height" name="asym_cc0_cc1_triangle4_left_height" group="General" default="`${(reference_height * asym_cc0_cc1_triangle4_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_half_width" name="asym_cc0_cc1_triangle4_left_half_width" group="General" default="`${(reference_half_width * asym_cc0_cc1_triangle4_left_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_left_peak_y" name="asym_cc0_cc1_triangle4_left_peak_y" group="General" default="`${base_y - asym_cc0_cc1_triangle4_left_height}`" visible="false" editable="false" desc="" />

    <!-- Triangle endpoint coordinates for proper proportional scaling -->
    <ParamString id="asym_cc0_cc1_triangle1_left_x" name="asym_cc0_cc1_triangle1_left_x" group="General" default="80" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle1_right_x" name="asym_cc0_cc1_triangle1_right_x" group="General" default="`${asym_cc0_cc1_triangle1_left_x + asym_cc0_cc1_triangle1_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 connects to Triangle 1 - starts where Triangle 1 ends -->
    <ParamString id="asym_cc0_cc1_triangle2_left_x" name="asym_cc0_cc1_triangle2_left_x" group="General" default="`${asym_cc0_cc1_triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle2_right_x" name="asym_cc0_cc1_triangle2_right_x" group="General" default="`${asym_cc0_cc1_triangle2_left_x + asym_cc0_cc1_triangle2_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 3 endpoint coordinates -->
    <ParamString id="asym_cc0_cc1_triangle3_left_x" name="asym_cc0_cc1_triangle3_left_x" group="General" default="`${asym_cc0_cc1_triangle2_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle3_right_x" name="asym_cc0_cc1_triangle3_right_x" group="General" default="`${asym_cc0_cc1_triangle3_left_x + asym_cc0_cc1_triangle3_left_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 4 endpoint coordinates -->
    <ParamString id="asym_cc0_cc1_triangle4_left_x" name="asym_cc0_cc1_triangle4_left_x" group="General" default="`${asym_cc0_cc1_triangle3_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_triangle4_right_x" name="asym_cc0_cc1_triangle4_right_x" group="General" default="`${asym_cc0_cc1_triangle4_left_x + asym_cc0_cc1_triangle4_left_width}`" visible="false" editable="false" desc="" />
    <!-- Ramp peak X positions (at 50% of triangle width for left-aligned) -->
    <ParamString id="asym_cc0_cc1_left_ramp_peak1_x" name="asym_cc0_cc1_left_ramp_peak1_x" group="General" default="`${asym_cc0_cc1_triangle1_left_x + (asym_cc0_cc1_triangle1_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_left_ramp_peak2_x" name="asym_cc0_cc1_left_ramp_peak2_x" group="General" default="`${asym_cc0_cc1_triangle2_left_x + (asym_cc0_cc1_triangle2_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_left_ramp_peak3_x" name="asym_cc0_cc1_left_ramp_peak3_x" group="General" default="`${asym_cc0_cc1_triangle3_left_x + (asym_cc0_cc1_triangle3_left_width / 2)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_left_ramp_peak4_x" name="asym_cc0_cc1_left_ramp_peak4_x" group="General" default="`${asym_cc0_cc1_triangle4_left_x + (asym_cc0_cc1_triangle4_left_width / 2)}`" visible="false" editable="false" desc="" />

    <!-- LEFT-ALIGNED period line Y positions (for 4 sawtooth periods) -->
    <ParamString id="asym_cc0_cc1_period1_left_line_y" name="asym_cc0_cc1_period1_left_line_y" group="General" default="`${asym_cc0_cc1_triangle1_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_period2_left_line_y" name="asym_cc0_cc1_period2_left_line_y" group="General" default="`${asym_cc0_cc1_triangle2_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_period3_left_line_y" name="asym_cc0_cc1_period3_left_line_y" group="General" default="`${asym_cc0_cc1_triangle3_left_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_period4_left_line_y" name="asym_cc0_cc1_period4_left_line_y" group="General" default="`${asym_cc0_cc1_triangle4_left_peak_y}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned compare line Y positions (following sawtooth) -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_compare1_left_y" name="asym_cc0_cc1_compare1_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle1_left_height / Period0), asym_cc0_cc1_triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_compare1_left_cc1_y" name="asym_cc0_cc1_compare1_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle1_left_height / Period0), asym_cc0_cc1_triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned compare line Y positions for Period1 lines (periods 2 and 4) -->
    <!-- When swap is enabled, Compare1/Compare3 are in range [0, Period0], so divide by Period0 -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_compare2_left_y" name="asym_cc0_cc1_compare2_left_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_compare2_left_cc1_y" name="asym_cc0_cc1_compare2_left_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <!-- Period 3: sawtooth from X=460 to X=650 -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_compare3_left_y" name="asym_cc0_cc1_compare3_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle3_left_height / Period0), asym_cc0_cc1_triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_compare3_left_cc1_y" name="asym_cc0_cc1_compare3_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle3_left_height / Period0), asym_cc0_cc1_triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <!-- Period 4: sawtooth from X=650 to X=840 -->
    <!-- When swap is enabled, Compare1/Compare3 are in range [0, Period0], so divide by Period0 -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_compare4_left_y" name="asym_cc0_cc1_compare4_left_y" group="General" default="`${max(base_y - ((EnableCompare0Swap ? Compare1 : Compare0) * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_compare4_left_cc1_y" name="asym_cc0_cc1_compare4_left_cc1_y" group="General" default="`${max(base_y - ((EnableCompare1Swap ? Compare3 : Compare2) * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Left-aligned PWM dot coordinates (4 sawtooth periods) -->
    <!-- Period 1: sawtooth from X=80 to X=270 -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot1_left_x" name="asym_cc0_cc1_dot1_left_x" group="General" default="`${min(asym_cc0_cc1_triangle1_left_x + (Compare0 * asym_cc0_cc1_triangle1_left_width / Period0), asym_cc0_cc1_triangle1_left_x + asym_cc0_cc1_triangle1_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot1_left_y" name="asym_cc0_cc1_dot1_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle1_left_height / Period0), asym_cc0_cc1_triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot1_left_cc1_x" name="asym_cc0_cc1_dot1_left_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle1_left_x + (Compare2 * asym_cc0_cc1_triangle1_left_width / Period0), asym_cc0_cc1_triangle1_left_x + asym_cc0_cc1_triangle1_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot1_left_cc1_y" name="asym_cc0_cc1_dot1_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle1_left_height / Period0), asym_cc0_cc1_triangle1_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: sawtooth from X=270 to X=460 -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot2_left_x" name="asym_cc0_cc1_dot2_left_x" group="General" default="`${min(asym_cc0_cc1_triangle2_left_x + (Compare0 * asym_cc0_cc1_triangle2_left_width / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_x + asym_cc0_cc1_triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_y" name="asym_cc0_cc1_dot2_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_cc1_x" name="asym_cc0_cc1_dot2_left_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle2_left_x + (Compare2 * asym_cc0_cc1_triangle2_left_width / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_x + asym_cc0_cc1_triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_cc1_y" name="asym_cc0_cc1_dot2_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: Swappable dots for buffered compare values (with period-dependent scaling) -->
    <!-- Note: Compare1/Compare3 are always in range [0, Period0], so we use Period0 as denominator when swapped -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot2_left_buff_x" name="asym_cc0_cc1_dot2_left_buffer_x" group="General" default="`${min(asym_cc0_cc1_triangle2_left_x + (Compare1 * asym_cc0_cc1_triangle2_left_width / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_x + asym_cc0_cc1_triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_buff_y" name="asym_cc0_cc1_dot2_left_buffer_y" group="General" default="`${max(base_y - (Compare1 * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_buff_cc1_x" name="asym_cc0_cc1_dot2_left_buffer_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle2_left_x + (Compare3 * asym_cc0_cc1_triangle2_left_width / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_x + asym_cc0_cc1_triangle2_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot2_left_buff_cc1_y" name="asym_cc0_cc1_dot2_left_buffer_cc1_y" group="General" default="`${max(base_y - (Compare3 * asym_cc0_cc1_triangle2_left_height / asym_cc0_cc1_triangle2_left_period), asym_cc0_cc1_triangle2_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: sawtooth from X=460 to X=650 -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot3_left_x" name="asym_cc0_cc1_dot3_left_x" group="General" default="`${min(asym_cc0_cc1_triangle3_left_x + (Compare0 * asym_cc0_cc1_triangle3_left_width / Period0), asym_cc0_cc1_triangle3_left_x + asym_cc0_cc1_triangle3_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot3_left_y" name="asym_cc0_cc1_dot3_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle3_left_height / Period0), asym_cc0_cc1_triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot3_left_cc1_x" name="asym_cc0_cc1_dot3_left_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle3_left_x + (Compare2 * asym_cc0_cc1_triangle3_left_width / Period0), asym_cc0_cc1_triangle3_left_x + asym_cc0_cc1_triangle3_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot3_left_cc1_y" name="asym_cc0_cc1_dot3_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle3_left_height / Period0), asym_cc0_cc1_triangle3_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: sawtooth from X=650 to X=840 -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot4_left_x" name="asym_cc0_cc1_dot4_left_x" group="General" default="`${min(asym_cc0_cc1_triangle4_left_x + (Compare0 * asym_cc0_cc1_triangle4_left_width / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_x + asym_cc0_cc1_triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_y" name="asym_cc0_cc1_dot4_left_y" group="General" default="`${max(base_y - (Compare0 * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_cc1_x" name="asym_cc0_cc1_dot4_left_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle4_left_x + (Compare2 * asym_cc0_cc1_triangle4_left_width / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_x + asym_cc0_cc1_triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_cc1_y" name="asym_cc0_cc1_dot4_left_cc1_y" group="General" default="`${max(base_y - (Compare2 * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4 buffer dots: uses triangle4 dimensions with buffer compare values -->
    <!-- Note: Compare1/Compare3 are always in range [0, Period0], so we use Period0 as denominator -->
    <!-- Limit dot Y to max 15 pixels above period line to prevent overflow -->
    <ParamString id="asym_cc0_cc1_dot4_left_buff_x" name="asym_cc0_cc1_dot4_left_buffer_x" group="General" default="`${min(asym_cc0_cc1_triangle4_left_x + (Compare1 * asym_cc0_cc1_triangle4_left_width / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_x + asym_cc0_cc1_triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_buff_y" name="asym_cc0_cc1_dot4_left_buffer_y" group="General" default="`${max(base_y - (Compare1 * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_buff_cc1_x" name="asym_cc0_cc1_dot4_left_buffer_cc1_x" group="General" default="`${min(asym_cc0_cc1_triangle4_left_x + (Compare3 * asym_cc0_cc1_triangle4_left_width / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_x + asym_cc0_cc1_triangle4_left_width)}`" visible="false" editable="false" desc="" />
    <ParamString id="asym_cc0_cc1_dot4_left_buff_cc1_y" name="asym_cc0_cc1_dot4_left_buffer_cc1_y" group="General" default="`${max(base_y - (Compare3 * asym_cc0_cc1_triangle4_left_height / asym_cc0_cc1_triangle4_left_period), asym_cc0_cc1_triangle4_left_peak_y - 15)}`" visible="false" editable="false" desc="" />

    <!-- Dot visibility parameters for asymmetric_cc0_cc1_align PWM (show dots when compare <= period) -->
    <!-- Period 1: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="asym_cc0_cc1_show_dot1_left" name="asym_cc0_cc1_show_dot1_left" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot1_left_cc1" name="asym_cc0_cc1_show_dot1_left_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="asym_cc0_cc1_show_dot2_left" name="asym_cc0_cc1_show_dot2_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot2_left_cc1" name="asym_cc0_cc1_show_dot2_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: show if Compare0/Compare2 are within period limits (fixed period, no swap) -->
    <ParamBool id="asym_cc0_cc1_show_dot3_left" name="asym_cc0_cc1_show_dot3_left" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot3_left_cc1" name="asym_cc0_cc1_show_dot3_left_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: show if ACTIVE compare (Compare0 when swap off, Compare1 when swap on) <= period -->
    <ParamBool id="asym_cc0_cc1_show_dot4_left" name="asym_cc0_cc1_show_dot4_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot4_left_cc1" name="asym_cc0_cc1_show_dot4_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse main dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Period 1: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="asym_cc0_cc1_hide_dot1_left" name="asym_cc0_cc1_hide_dot1_left" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot1_left_cc1" name="asym_cc0_cc1_hide_dot1_left_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: hide if ACTIVE compare > period -->
    <ParamBool id="asym_cc0_cc1_hide_dot2_left" name="asym_cc0_cc1_hide_dot2_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot2_left_cc1" name="asym_cc0_cc1_hide_dot2_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: hide if Compare0/Compare2 > period (fixed period, no swap) -->
    <ParamBool id="asym_cc0_cc1_hide_dot3_left" name="asym_cc0_cc1_hide_dot3_left" group="General" default="`${Compare0 &gt; Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot3_left_cc1" name="asym_cc0_cc1_hide_dot3_left_cc1" group="General" default="`${Compare2 &gt; Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: hide if ACTIVE compare > period -->
    <ParamBool id="asym_cc0_cc1_hide_dot4_left" name="asym_cc0_cc1_hide_dot4_left" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot4_left_cc1" name="asym_cc0_cc1_hide_dot4_left_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Buffered dot visibility (show when compare <= period) -->
    <!-- Period 2&4 when swap ENABLED: Compare1 for Compare0 line, Compare3 for Compare1 line -->
    <ParamBool id="asym_cc0_cc1_show_dot2_buff_left" name="asym_cc0_cc1_show_dot2_buff_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot2_buff_left_cc1" name="asym_cc0_cc1_show_dot2_buff_left_cc1" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <ParamBool id="asym_cc0_cc1_show_dot4_buff_left" name="asym_cc0_cc1_show_dot4_buff_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_dot4_buff_left_cc1" name="asym_cc0_cc1_show_dot4_buff_left_cc1" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    
    <!-- Inverse buffered dot visibility for waveform lines (when dots are hidden, show horizontal) -->
    <!-- Only show buffered dots when swap is ENABLED (EnableCompare0Swap or EnableCompare1Swap) -->
    <ParamBool id="asym_cc0_cc1_hide_dot2_buff_left" name="asym_cc0_cc1_hide_dot2_buff_left" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot2_buff_left_cc1" name="asym_cc0_cc1_hide_dot2_buff_left_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle2_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot4_buff_left" name="asym_cc0_cc1_hide_dot4_buff_left" group="General" default="`${!EnableCompare0Swap || Compare1 &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_hide_dot4_buff_left_cc1" name="asym_cc0_cc1_hide_dot4_buff_left_cc1" group="General" default="`${!EnableCompare1Swap || Compare3 &gt; (EnablePeriodSwap ? asym_cc0_cc1_triangle4_left_period : Period0)}`" visible="false" editable="false" desc="" />

    <!-- Buffered compare line visibility (hide when compare value > period) -->
    <!-- Period 2&4 when swap ENABLED: Compare1 for Compare0 line, Compare3 for Compare1 line -->
    <ParamBool id="asym_cc0_cc1_show_compare2_left" name="show_compare2_left" group="General" default="`${Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    <ParamBool id="asym_cc0_cc1_show_compare2_cc1_left" name="show_compare2_cc1_left" group="General" default="`${Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0)}`" visible="false" editable="false" desc="" />
    

    <!-- ===== CENTER-ASYMMETRIC-ALIGNED MODE VARIABLES (2 triangles: up-down counting with dynamic scaling) ===== -->
    <ParamString id="center_asym_align_triangle1_raw_scale" name="center_asym_align_triangle1_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_scale" name="center_asym_align_triangle1_scale" group="General" default="`${(center_asym_align_triangle1_raw_scale &lt; 200) ? 200 : center_asym_align_triangle1_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_height" name="center_asym_align_triangle1_height" group="General" default="`${(reference_height * center_asym_align_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_half_width" name="center_asym_align_triangle1_half_width" group="General" default="`${(reference_half_width * center_asym_align_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_peak_y" name="center_asym_align_triangle1_peak_y" group="General" default="`${base_y - center_asym_align_triangle1_height}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: Uses Period1 if EnablePeriodSwap, otherwise Period0 - full size when single period, proportionally scaled when dual period -->
    <ParamString id="center_asym_align_triangle2_period" name="center_asym_align_triangle2_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_raw_scale" name="center_asym_align_triangle2_raw_scale" group="General" default="`${EnablePeriodSwap ? ((center_asym_align_triangle2_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_scale" name="center_asym_align_triangle2_scale" group="General" default="`${(center_asym_align_triangle2_raw_scale &lt; 200) ? 200 : center_asym_align_triangle2_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_height" name="center_asym_align_triangle2_height" group="General" default="`${(reference_height * center_asym_align_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_half_width" name="center_asym_align_triangle2_half_width" group="General" default="`${(reference_half_width * center_asym_align_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_peak_y" name="center_asym_align_triangle2_peak_y" group="General" default="`${base_y - center_asym_align_triangle2_height}`" visible="false" editable="false" desc="" />
    
    <!-- Compare levels for each triangle - proportional to their periods -->
    <!-- Triangle 1 always shows Compare0 and Compare2 (when CC1 enabled) -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="center_asym_align_compare1_y" name="center_asym_align_compare1_y" group="General" default="`${max(base_y - ((Compare0 * center_asym_align_triangle1_height * 1000) / (Period0 * 1000)), center_asym_align_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare1_cc1_y" name="center_asym_align_compare1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_asym_align_triangle1_height * 1000) / (Period0 * 1000)), center_asym_align_triangle1_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 shows Compare0/Compare2 when no swap, or Compare1/Compare3 when swap enabled -->
    <!-- Limit compare line to max 15 pixels above period line to prevent overflow -->
    <ParamString id="center_asym_align_compare2_y" name="center_asym_align_compare2_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_asym_align_triangle2_height * 1000) / (center_asym_align_triangle2_period * 1000)), center_asym_align_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare2_cc1_y" name="center_asym_align_compare2_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_asym_align_triangle2_height * 1000) / (center_asym_align_triangle2_period * 1000)), center_asym_align_triangle2_peak_y - 15)}`" visible="false" editable="false" desc="" />
    
    <!-- Period lines - horizontal lines aligned with triangle peaks -->
    <!-- When EnablePeriodSwap is false, both triangles use Period0, so period lines stay at same height -->
    <!-- When EnablePeriodSwap is true, each triangle gets its own period line height aligned with triangle peak -->
    <ParamString id="center_asym_align_period1_line_y" name="center_asym_align_period1_line_y" group="General" default="`${EnablePeriodSwap ? center_asym_align_triangle1_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_period2_line_y" name="center_asym_align_period2_line_y" group="General" default="`${EnablePeriodSwap ? center_asym_align_triangle2_peak_y : reference_peak_y}`" visible="false" editable="false" desc="" />
    
    <!-- Compare dot visibility for center_asym_align (hide when compare value > period) -->
    <!-- Triangle 1: always uses Period0 for compare visibility check -->
    <ParamBool id="center_asym_align_show_compare1_dot" name="center_asym_align_show_compare1_dot" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="center_asym_align_show_compare1_cc1_dot" name="center_asym_align_show_compare1_cc1_dot" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: depend on period swap and compare swap settings -->
    <ParamBool id="center_asym_align_show_compare2_dot" name="center_asym_align_show_compare2_dot" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= center_asym_align_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="center_asym_align_show_compare2_cc1_dot" name="center_asym_align_show_compare2_cc1_dot" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= center_asym_align_triangle2_period}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle endpoint coordinates for proper proportional scaling -->
    <ParamString id="center_asym_align_triangle1_left_x" name="center_asym_align_triangle1_left_x" group="General" default="`${265 - center_asym_align_triangle1_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_peak_x" name="center_asym_align_triangle1_peak_x" group="General" default="265" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle1_right_x" name="center_asym_align_triangle1_right_x" group="General" default="`${265 + center_asym_align_triangle1_half_width}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 connects to Triangle 1 - starts where Triangle 1 ends -->
    <ParamString id="center_asym_align_triangle2_left_x" name="center_asym_align_triangle2_left_x" group="General" default="`${center_asym_align_triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_peak_x" name="center_asym_align_triangle2_peak_x" group="General" default="`${center_asym_align_triangle2_left_x + center_asym_align_triangle2_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_triangle2_right_x" name="center_asym_align_triangle2_right_x" group="General" default="`${center_asym_align_triangle2_left_x + (center_asym_align_triangle2_half_width * 2)}`" visible="false" editable="false" desc="" />
    
    <!-- Main period line for single period mode (aligned with triangle peak) -->
    <ParamString id="center_asym_align_main_period_line_y" name="center_asym_align_main_period_line_y" group="General" default="`${reference_peak_y}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_main_period_left_x" name="center_asym_align_main_period_left_x" group="General" default="`${center_asym_align_triangle1_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_main_period_right_x" name="center_asym_align_main_period_right_x" group="General" default="`${center_asym_align_triangle2_right_x}`" visible="false" editable="false" desc="" />
    
    <!-- Visibility control for period lines -->
    <ParamString id="center_asym_align_show_individual_periods" name="center_asym_align_show_individual_periods" group="General" default="`${EnablePeriodSwap ? 1.0 : 0.0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_show_main_period" name="center_asym_align_show_main_period" group="General" default="`${EnablePeriodSwap ? 0.0 : 1.0}`" visible="false" editable="false" desc="" />
    
    <!-- DOT coordinates for intersections with triangles -->
    <!-- Triangle 1 Compare0 dots (always visible) -->
    <ParamString id="center_asym_align_dot1_x" name="center_asym_align_dot1_x" group="General" default="`${min(center_asym_align_triangle1_left_x + (Compare0 * center_asym_align_triangle1_half_width / Period0), center_asym_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot2_x" name="center_asym_align_dot2_x" group="General" default="`${max(center_asym_align_triangle1_right_x - (Compare0 * center_asym_align_triangle1_half_width / Period0), center_asym_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 dots (visible when CC1 enabled) -->
    <ParamString id="center_asym_align_dot1_cc1_x" name="center_asym_align_dot1_cc1_x" group="General" default="`${min(center_asym_align_triangle1_left_x + (Compare2 * center_asym_align_triangle1_half_width / Period0), center_asym_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot2_cc1_x" name="center_asym_align_dot2_cc1_x" group="General" default="`${max(center_asym_align_triangle1_right_x - (Compare2 * center_asym_align_triangle1_half_width / Period0), center_asym_align_triangle1_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <ParamString id="center_asym_align_dot3_x" name="center_asym_align_dot3_x" group="General" default="`${min(center_asym_align_triangle2_left_x + ((EnableCompare0Swap ? Compare1 : Compare0) * center_asym_align_triangle2_half_width / center_asym_align_triangle2_period), center_asym_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot4_x" name="center_asym_align_dot4_x" group="General" default="`${max(center_asym_align_triangle2_right_x - ((EnableCompare0Swap ? Compare1 : Compare0) * center_asym_align_triangle2_half_width / center_asym_align_triangle2_period), center_asym_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 dots (visible when CC1 enabled) -->
    <ParamString id="center_asym_align_dot3_cc1_x" name="center_asym_align_dot3_cc1_x" group="General" default="`${min(center_asym_align_triangle2_left_x + ((EnableCompare1Swap ? Compare3 : Compare2) * center_asym_align_triangle2_half_width / center_asym_align_triangle2_period), center_asym_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot4_cc1_x" name="center_asym_align_dot4_cc1_x" group="General" default="`${max(center_asym_align_triangle2_right_x - ((EnableCompare1Swap ? Compare3 : Compare2) * center_asym_align_triangle2_half_width / center_asym_align_triangle2_period), center_asym_align_triangle2_peak_x)}`" visible="false" editable="false" desc="" />
    <!-- DOT Y coordinates for triangular intersections -->
    <!-- Triangle 1 Compare0 Y dots (always visible) -->
    <!-- Limit dot Y to compare line ceiling to prevent overflow -->
    <ParamString id="center_asym_align_dot1_y" name="center_asym_align_dot1_y" group="General" default="`${max(base_y - ((Compare0 * center_asym_align_triangle1_height) / Period0), center_asym_align_compare1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot2_y" name="center_asym_align_dot2_y" group="General" default="`${max(base_y - ((Compare0 * center_asym_align_triangle1_height) / Period0), center_asym_align_compare1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 1 Compare2 Y dots (visible when CC1 enabled) -->
    <!-- Limit dot Y to compare line ceiling to prevent overflow -->
    <ParamString id="center_asym_align_dot1_cc1_y" name="center_asym_align_dot1_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_asym_align_triangle1_height) / Period0), center_asym_align_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot2_cc1_y" name="center_asym_align_dot2_cc1_y" group="General" default="`${max(base_y - ((Compare2 * center_asym_align_triangle1_height) / Period0), center_asym_align_compare1_cc1_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 Compare Y dots (Compare0/Compare2 or Compare1/Compare3 based on swap) -->
    <!-- Limit dot Y to compare line ceiling to prevent overflow -->
    <ParamString id="center_asym_align_dot3_y" name="center_asym_align_dot3_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_asym_align_triangle2_height) / center_asym_align_triangle2_period), center_asym_align_compare2_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot4_y" name="center_asym_align_dot4_y" group="General" default="`${max(base_y - (((EnableCompare0Swap ? Compare1 : Compare0) * center_asym_align_triangle2_height) / center_asym_align_triangle2_period), center_asym_align_compare2_y)}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 CC1 Y dots (visible when CC1 enabled) -->
    <!-- Limit dot Y to compare line ceiling to prevent overflow -->
    <ParamString id="center_asym_align_dot3_cc1_y" name="center_asym_align_dot3_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_asym_align_triangle2_height) / center_asym_align_triangle2_period), center_asym_align_compare2_cc1_y)}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_dot4_cc1_y" name="center_asym_align_dot4_cc1_y" group="General" default="`${max(base_y - (((EnableCompare1Swap ? Compare3 : Compare2) * center_asym_align_triangle2_height) / center_asym_align_triangle2_period), center_asym_align_compare2_cc1_y)}`" visible="false" editable="false" desc="" />

    <!-- Display strings for compare limits -->
    <!-- Triangle 1: min = 0, max = Period0 -->
    <ParamString id="center_asym_align_compare1_min" name="center_asym_align_compare1_min" group="General" default="(min)" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare1_max" name="center_asym_align_compare1_max" group="General" default="`${&quot;(max=&quot; &amp; Period0 &amp; &quot;)&quot;}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare1_cc1_min" name="center_asym_align_compare1_cc1_min" group="General" default="(min)" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare1_cc1_max" name="center_asym_align_compare1_cc1_max" group="General" default="`${&quot;(max=&quot; &amp; Period0 &amp; &quot;)&quot;}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: min = 0, max = triangle2_period (depends on swap) -->
    <ParamString id="center_asym_align_compare2_min" name="center_asym_align_compare2_min" group="General" default="(min)" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare2_max" name="center_asym_align_compare2_max" group="General" default="`${&quot;(max=&quot; &amp; center_asym_align_triangle2_period &amp; &quot;)&quot;}`" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare2_cc1_min" name="center_asym_align_compare2_cc1_min" group="General" default="(min)" visible="false" editable="false" desc="" />
    <ParamString id="center_asym_align_compare2_cc1_max" name="center_asym_align_compare2_cc1_max" group="General" default="`${&quot;(max=&quot; &amp; center_asym_align_triangle2_period &amp; &quot;)&quot;}`" visible="false" editable="false" desc="" />

    <!-- Dot visibility parameters for center_asym_align PWM (show dots when compare <= period) -->
    <!-- Triangle 1: show if Compare0/Compare2 are within period limits -->
    <ParamBool id="show_center_asym_align_dot1_2" name="show_center_asym_align_dot1_2" group="General" default="`${Compare0 &lt;= Period0}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_center_asym_align_dot1_2_cc1" name="show_center_asym_align_dot1_2_cc1" group="General" default="`${Compare2 &lt;= Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2: show if ACTIVE compare (Compare0/Compare2 or Compare1/Compare3 based on swap) <= period -->
    <ParamBool id="show_center_asym_align_dot3_4" name="show_center_asym_align_dot3_4" group="General" default="`${(EnableCompare0Swap ? Compare1 : Compare0) &lt;= center_asym_align_triangle2_period}`" visible="false" editable="false" desc="" />
    <ParamBool id="show_center_asym_align_dot3_4_cc1" name="show_center_asym_align_dot3_4_cc1" group="General" default="`${(EnableCompare1Swap ? Compare3 : Compare2) &lt;= center_asym_align_triangle2_period}`" visible="false" editable="false" desc="" />

    <!-- ===== DEAD-TIME VISUALIZATION VARIABLES (used by all alignment modes) ===== -->
    <!-- Dead time calculation variables for visualization -->
    <!-- Convert dead time clocks to X coordinate offset (time-based scaling) -->
    <ParamString id="deadtime_pixel_offset" name="deadtime_pixel_offset" group="General" default="`${DeadClocks * 190 / Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="deadtime_compl_pixel_offset" name="deadtime_compl_pixel_offset" group="General" default="`${DeadClocks_compl * 190 / Period0}`" visible="false" editable="false" desc="" />
    
    <!-- Dead time transition points for center-aligned PWM (2 triangles) -->
    <ParamString id="triangle1_raw_scale" name="triangle1_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_scale" name="triangle1_scale" group="General" default="`${(triangle1_raw_scale &lt; 200) ? 200 : triangle1_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_height" name="triangle1_height" group="General" default="`${(reference_height * triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_half_width" name="triangle1_half_width" group="General" default="`${(reference_half_width * triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="triangle1_peak_y" name="triangle1_peak_y" group="General" default="`${base_y - triangle1_height}`" visible="false" editable="false" desc="" />

    <!-- Calculate deadtime offsets scaled for center-aligned triangles -->
    <ParamString id="center_deadtime_pixel_offset" name="center_deadtime_pixel_offset" group="General" default="`${DeadClocks * triangle1_half_width / Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_deadtime_compl_pixel_offset" name="center_deadtime_compl_pixel_offset" group="General" default="`${DeadClocks_compl * triangle1_half_width / Period0}`" visible="false" editable="false" desc="" />
    
    <!-- DOT coordinates for intersections with triangles (CENTER-ALIGNED mode) -->
    <!-- CENTER-ALIGNED Triangle 1 Compare0 dots (always visible) - positioned relative to peak for symmetric triangle -->
    <ParamString id="center_triangle1_raw_scale" name="center_triangle1_raw_scale" group="General" default="`${EnablePeriodSwap ? ((Period0 * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_scale" name="center_triangle1_scale" group="General" default="`${(center_triangle1_raw_scale &lt; 200) ? 200 : center_triangle1_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_height" name="center_triangle1_height" group="General" default="`${(reference_height * center_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_half_width" name="center_triangle1_half_width" group="General" default="`${(reference_half_width * center_triangle1_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_peak_y" name="center_triangle1_peak_y" group="General" default="`${base_y - center_triangle1_height}`" visible="false" editable="false" desc="" />
    
    <ParamString id="center_triangle2_period" name="center_triangle2_period" group="General" default="`${EnablePeriodSwap ? Period1 : Period0}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_raw_scale" name="center_triangle2_raw_scale" group="General" default="`${EnablePeriodSwap ? ((center_triangle2_period * 1000) / max_period) : 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_scale" name="center_triangle2_scale" group="General" default="`${(center_triangle2_raw_scale &lt; 200) ? 200 : center_triangle2_raw_scale}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_height" name="center_triangle2_height" group="General" default="`${(reference_height * center_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_half_width" name="center_triangle2_half_width" group="General" default="`${(reference_half_width * center_triangle2_scale) / 1000}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_peak_y" name="center_triangle2_peak_y" group="General" default="`${base_y - center_triangle2_height}`" visible="false" editable="false" desc="" />

    <ParamString id="center_triangle1_peak_x" name="center_triangle1_peak_x" group="General" default="265" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_left_x" name="center_triangle1_left_x" group="General" default="`${center_triangle1_peak_x - center_triangle1_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle1_right_x" name="center_triangle1_right_x" group="General" default="`${center_triangle1_peak_x + center_triangle1_half_width}`" visible="false" editable="false" desc="" />
    
    <ParamString id="center_triangle2_left_x" name="center_triangle2_left_x" group="General" default="`${center_triangle1_right_x}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_peak_x" name="center_triangle2_peak_x" group="General" default="`${center_triangle2_left_x + center_triangle2_half_width}`" visible="false" editable="false" desc="" />
    <ParamString id="center_triangle2_right_x" name="center_triangle2_right_x" group="General" default="`${center_triangle2_left_x + (center_triangle2_half_width * 2)}`" visible="false" editable="false" desc="" />

    <ParamString id="dot1_x" name="dot1_x" group="General" default="`${center_triangle1_peak_x - (Compare0 * center_triangle1_half_width / Period0)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot2_x" name="dot2_x" group="General" default="`${center_triangle1_peak_x + (Compare0 * center_triangle1_half_width / Period0)}`" visible="false" editable="false" desc="" />
    <ParamString id="dot3_x" name="dot3_x" group="General" default="`${center_triangle2_peak_x - ((EnableCompare0Swap ? (Compare1 * center_triangle2_half_width / Period0) : (Compare0 * center_triangle2_half_width / center_triangle2_period)))}`" visible="false" editable="false" desc="" />
    <ParamString id="dot4_x" name="dot4_x" group="General" default="`${center_triangle2_peak_x + ((EnableCompare0Swap ? (Compare1 * center_triangle2_half_width / Period0) : (Compare0 * center_triangle2_half_width / center_triangle2_period)))}`" visible="false" editable="false" desc="" />

    <!-- Triangle 1 center-aligned dead time (from left dot to peak to right dot) -->
    <!-- When dot is on left side of peak (rising edge) -->
    <ParamString id="dt_center1_line_fall_x" name="dt_center1_line_fall_x" group="General" default="`${dot1_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center1_linen_rise_x" name="dt_center1_linen_rise_x" group="General" default="`${dot1_x + center_deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center1_line_rise_x" name="dt_center1_line_rise_x" group="General" default="`${dot2_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center1_linen_fall_x" name="dt_center1_linen_fall_x" group="General" default="`${dot2_x + center_deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />
    
    <!-- Triangle 2 center-aligned dead time -->
    <!-- When dot is on left side of peak (rising edge) -->
    <ParamString id="dt_center2_line_fall_x" name="dt_center2_line_fall_x" group="General" default="`${dot3_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center2_linen_rise_x" name="dt_center2_linen_rise_x" group="General" default="`${dot3_x + center_deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center2_line_rise_x" name="dt_center2_line_rise_x" group="General" default="`${dot4_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt_center2_linen_fall_x" name="dt_center2_linen_fall_x" group="General" default="`${dot4_x + center_deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />
    
    <!-- ===== LEFT-ALIGNED MODE DEAD TIME ===== -->
    <!-- Dead time transition points for left-aligned PWM (4 periods) -->
    <!-- Period 1: dead time after compare match -->
    <ParamString id="dt1_line_fall_x" name="dt1_line_fall_x" group="General" default="`${dot1_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt1_linen_rise_x" name="dt1_linen_rise_x" group="General" default="`${dot1_left_x + deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt1_line_rise_x" name="dt1_line_rise_x" group="General" default="`${270}`" visible="false" editable="false" desc="" />
    <ParamString id="dt1_linen_fall_x" name="dt1_linen_fall_x" group="General" default="`${270 + deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />
    
    <!-- Period 2: dead time after compare match -->
    <ParamString id="dt2_line_fall_x" name="dt2_line_fall_x" group="General" default="`${dot2_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt2_linen_rise_x" name="dt2_linen_rise_x" group="General" default="`${dot2_left_x + deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt2_line_rise_x" name="dt2_line_rise_x" group="General" default="`${460}`" visible="false" editable="false" desc="" />
    <ParamString id="dt2_linen_fall_x" name="dt2_linen_fall_x" group="General" default="`${460 + deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />
    
    <!-- Period 3: dead time after compare match -->
    <ParamString id="dt3_line_fall_x" name="dt3_line_fall_x" group="General" default="`${dot3_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt3_linen_rise_x" name="dt3_linen_rise_x" group="General" default="`${dot3_left_x + deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt3_line_rise_x" name="dt3_line_rise_x" group="General" default="`${650}`" visible="false" editable="false" desc="" />
    <ParamString id="dt3_linen_fall_x" name="dt3_linen_fall_x" group="General" default="`${650 + deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />
    
    <!-- Period 4: dead time after compare match -->
    <ParamString id="dt4_line_fall_x" name="dt4_line_fall_x" group="General" default="`${dot4_left_x}`" visible="false" editable="false" desc="" />
    <ParamString id="dt4_linen_rise_x" name="dt4_linen_rise_x" group="General" default="`${dot4_left_x + deadtime_pixel_offset}`" visible="false" editable="false" desc="" />
    <ParamString id="dt4_line_rise_x" name="dt4_line_rise_x" group="General" default="`${840}`" visible="false" editable="false" desc="" />
    <ParamString id="dt4_linen_fall_x" name="dt4_linen_fall_x" group="General" default="`${840 + deadtime_compl_pixel_offset}`" visible="false" editable="false" desc="" />

    <!-- ================================================================================================ -->
    <!-- END OF SVG VISUALIZATION VARIABLES -->
    <!-- ParamImage sections below use variables defined above -->
    <!-- ================================================================================================ -->

    <ParamImage id="pwmvisualization_center"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_center_align.svg">
      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Dynamic triangle heights -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${center_align_triangle1_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${center_align_triangle2_peak_y}`" />
      
      <!-- Dynamic triangle coordinates for proper proportional scaling -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${center_align_triangle1_left_x}`" />
      <Substitution name="TRIANGLE1_PEAK_X" value="`${center_align_triangle1_peak_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${center_align_triangle1_right_x}`" />
      
      <Substitution name="TRIANGLE2_LEFT_X" value="`${center_align_triangle2_left_x}`" />
      <Substitution name="TRIANGLE2_PEAK_X" value="`${center_align_triangle2_peak_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${center_align_triangle2_right_x}`" />
      
      <!-- Legacy peak X positions (for compatibility) -->
      <Substitution name="RAMP_PEAK1_X" value="`${center_align_triangle1_peak_x}`" />
      <Substitution name="RAMP_CENTER_X" value="`${center_align_triangle1_right_x}`" />
      <Substitution name="RAMP_PEAK2_X" value="`${center_align_triangle2_peak_x}`" />
      
      <!-- Compare line Y positions -->
      <!-- Triangle 1: always Compare0 and Compare2 -->
      <Substitution name="COMPARE1_Y" value="`${center_align_compare1_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${center_align_compare1_cc1_y}`" />
      
      <!-- Triangle 2: Compare0/Compare2 or Compare1/Compare3 depending on swap -->
      <Substitution name="COMPARE2_Y" value="`${center_align_compare2_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${center_align_compare2_cc1_y}`" />
      
      <!-- Period lines on top of triangles -->
      <Substitution name="PERIOD1_LINE_Y" value="`${center_align_period1_line_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${center_align_period2_line_y}`" />
      
      <!-- Main period line for single period mode -->
      <Substitution name="MAIN_PERIOD_LINE_Y" value="`${center_align_main_period_line_y}`" />
      <Substitution name="MAIN_PERIOD_LEFT_X" value="`${center_align_main_period_left_x}`" />
      <Substitution name="MAIN_PERIOD_RIGHT_X" value="`${center_align_main_period_right_x}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="`${center_align_show_individual_periods}`" />
      <Substitution name="SHOW_MAIN_PERIOD" value="`${center_align_show_main_period}`" />
      
      <!-- Period and compare values for labels -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${center_align_triangle2_period}`" />
      
      <!-- Triangle 1 compare labels (always Compare0 and Compare2) -->
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      
      <!-- Triangle 1 compare values (always uses Compare0 and Compare2) -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      
      <!-- Triangle 2 compare values (depends on swap settings) -->
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      
      <!-- Triangle 2 compare labels (show which compare is being used) -->
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      
      <!-- Center-align dot visibility: hide when compare > period -->
      <Substitution name="SHOW_CENTER_ALIGN_DOT1_2" value="`${show_center_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT1_2_CC1" value="`${pCntCC1 &amp;&amp; show_center_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT3_4" value="`${show_center_align_dot3_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT3_4_CC1" value="`${pCntCC1 &amp;&amp; show_center_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Interrupt visibility -->
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      
      <!-- Interrupt indicators combined with dot visibility for center-align (show only when interrupt enabled AND dot visible) -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; show_center_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; show_center_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; show_center_align_dot3_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; show_center_align_dot3_4 ? 1.0 : 0.0}`" />
      
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; show_center_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; show_center_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; show_center_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; show_center_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Dynamic DOT coordinates -->
      <!-- Triangle 1 Compare0 dots -->
      <Substitution name="PWM_DOT1_X" value="`${center_align_dot1_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${center_align_dot1_y}`" />
      <Substitution name="PWM_DOT2_X" value="`${center_align_dot2_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${center_align_dot2_y}`" />
      
      <!-- Triangle 1 Compare2 dots -->
      <Substitution name="PWM_DOT1_CC1_X" value="`${center_align_dot1_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${center_align_dot1_cc1_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${center_align_dot2_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${center_align_dot2_cc1_y}`" />
      
      <!-- Triangle 2 dots -->
      <Substitution name="PWM_DOT3_X" value="`${center_align_dot3_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${center_align_dot3_y}`" />
      <Substitution name="PWM_DOT4_X" value="`${center_align_dot4_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${center_align_dot4_y}`" />
      
      <!-- Triangle 2 CC1 dots -->
      <Substitution name="PWM_DOT3_CC1_X" value="`${center_align_dot3_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${center_align_dot3_cc1_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${center_align_dot4_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${center_align_dot4_cc1_y}`" />
      <!-- Levels for line -->
      <Substitution name="LINE_Y_H" value="`${y_line_hi}`"/>
      <Substitution name="LINE_Y_L" value="`${y_line_lo}`"/>

      <!-- Inverted levels for line_n (properly separated and inverted) -->
      <Substitution name="LINE_N_Y_H" value="`${y_line_n_hi}`"/>
      <Substitution name="LINE_N_Y_L" value="`${y_line_n_lo}`"/>

      <!-- Break points for polylines -->
      <Substitution name="LINE_X0" value="`${x_start}`"/>
      <Substitution name="LINE_X1" value="`${x_rise1}`"/>
      <Substitution name="LINE_X2" value="`${x_fall1}`"/>
      <Substitution name="LINE_X3" value="`${x_rise2}`"/>
      <Substitution name="LINE_X4" value="`${x_fall2}`"/>
      <Substitution name="LINE_X5" value="`${x_end}`"/>

      <Substitution name="LINE_START_X" value="50"/>
      <Substitution name="LINE_END_X" value="850"/>

      <Substitution name="OV_Y" value="240"/>
      <Substitution name="UN_Y" value="260"/>
      <Substitution name="TC_Y" value="280"/>
      <Substitution name="CM_Y" value="300"/>
      <Substitution name="CM_CC1_Y" value="320"/>

      <Substitution name="MARKS_Y_TOP" value="205"/>  <!-- slightly lower than triangle zone (base 200) -->
      <Substitution name="MARKS_Y_BOT" value="235"/>  <!-- slightly above OV -->
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="COUNTER_X" value="`${center_align_triangle1_left_x}`" />
      <Substitution name="COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="COUNTER_TOP_Y" value="60" />
      <Substitution name="COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />

      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

  <ParamImage id="pwmvisualization_left"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_LEFT_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_left_align.svg">

      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Four sawtooth periods for left-aligned PWM -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${triangle1_left_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${triangle1_right_x}`" />
      <Substitution name="TRIANGLE2_LEFT_X" value="`${triangle2_left_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${triangle2_right_x}`" />
      <Substitution name="TRIANGLE3_LEFT_X" value="`${triangle3_left_x}`" />
      <Substitution name="TRIANGLE3_RIGHT_X" value="`${triangle3_right_x}`" />
      <Substitution name="TRIANGLE4_LEFT_X" value="`${triangle4_left_x}`" />
      <Substitution name="TRIANGLE4_RIGHT_X" value="`${triangle4_right_x}`" />
      
      <!-- Dynamic ramp peak X positions for proportional scaling -->
      <Substitution name="RAMP_PEAK1_X" value="`${left_ramp_peak1_x}`" />
      <Substitution name="RAMP_PEAK2_X" value="`${left_ramp_peak2_x}`" />
      <Substitution name="RAMP_CENTER_X" value="`${left_ramp_peak3_x}`" />
      <Substitution name="RAMP_PEAK3_X" value="`${left_ramp_peak3_x}`" />
      <Substitution name="RAMP_RIGHT_X" value="`${left_ramp_peak4_x}`" />
      <Substitution name="RAMP_PEAK4_X" value="`${left_ramp_peak4_x}`" />
      
      <!-- Peak heights for all sawtooth periods -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${triangle1_left_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${triangle2_left_peak_y}`" />
      <Substitution name="TRIANGLE3_PEAK_Y" value="`${triangle3_left_peak_y}`" />
      <Substitution name="TRIANGLE4_PEAK_Y" value="`${triangle4_left_peak_y}`" />
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="COUNTER_X" value="`${triangle1_left_x}`" />
      <Substitution name="COUNTER_TOP_Y" value="60" />
      <Substitution name="COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />
      
      <!-- Compare line Y positions - periods 1 and 3 (Period0) -->
      <Substitution name="COMPARE1_Y" value="`${compare1_left_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${compare1_left_cc1_y}`" />
      
      <!-- Compare line values and labels for left-aligned (Period 0) -->
      <!-- Periods 1 and 3 use Compare0 and Compare1 -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      
      <!-- Compare line Y positions - periods 2 and 4 (Period1) -->
      <!-- Periods 2 and 4 use Compare0 Buff and Compare1 Buff when Period1 is swapped -->
      <Substitution name="COMPARE2_Y" value="`${compare2_left_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${compare2_left_cc1_y}`" />
      <Substitution name="COMPARE3_Y" value="`${compare3_left_y}`" />
      <Substitution name="COMPARE3_CC1_Y" value="`${compare3_left_cc1_y}`" />
      <Substitution name="COMPARE4_Y" value="`${compare4_left_y}`" />
      <Substitution name="COMPARE4_CC1_Y" value="`${compare4_left_cc1_y}`" />
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Period values and labels for left-aligned -->
      <!-- Alternating Period0 and Period1 for the 4 sawtooth periods -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${EnablePeriodSwap ? Period1 : Period0}`" />
      
      <!-- Period labels that show which period value is being used -->
      <Substitution name="PERIOD1_LABEL" value="Period0" />
      <Substitution name="PERIOD2_LABEL" value="`${EnablePeriodSwap ? &quot;Period1&quot; : &quot;Period0&quot;}`" />
      
      <!-- DOT coordinates for left-aligned PWM using ParamString variables -->
      <!-- Period 1 -->
      <Substitution name="PWM_DOT1_X" value="`${dot1_left_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${dot1_left_y}`" />
      <Substitution name="PWM_DOT1_CC1_X" value="`${dot1_left_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${dot1_left_cc1_y}`" />
      
      <!-- Period 2 -->
      <!-- Use buffered dots when compare swap is enabled for Period2 -->
      <Substitution name="PWM_DOT2_X" value="`${EnableCompare0Swap ? dot2_left_buff_x : dot2_left_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${EnableCompare0Swap ? dot2_left_buff_y : dot2_left_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${EnableCompare1Swap ? dot2_left_buff_cc1_x : dot2_left_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${EnableCompare1Swap ? dot2_left_buff_cc1_y : dot2_left_cc1_y}`" />
      
      <!-- Period 3 -->
      <Substitution name="PWM_DOT3_X" value="`${dot3_left_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${dot3_left_y}`" />
      <Substitution name="PWM_DOT3_CC1_X" value="`${dot3_left_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${dot3_left_cc1_y}`" />
      
      <!-- Period 4 -->
      <!-- Use buffered dots when compare swap is enabled for Period4 -->
      <Substitution name="PWM_DOT4_X" value="`${EnableCompare0Swap ? dot4_left_buff_x : dot4_left_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${EnableCompare0Swap ? dot4_left_buff_y : dot4_left_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${EnableCompare1Swap ? dot4_left_buff_cc1_x : dot4_left_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${EnableCompare1Swap ? dot4_left_buff_cc1_y : dot4_left_cc1_y}`" />

      <!-- Buffer compare dots for periods 2&4 (when swap is enabled) -->
      <Substitution name="PWM_DOT2_BUFFER_X" value="`${dot2_left_buff_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_Y" value="`${dot2_left_buff_y}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_X" value="`${dot2_left_buff_cc1_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_Y" value="`${dot2_left_buff_cc1_y}`" />
      
      <Substitution name="PWM_DOT4_BUFFER_X" value="`${dot4_left_buff_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_Y" value="`${dot4_left_buff_y}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_X" value="`${dot4_left_buff_cc1_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_Y" value="`${dot4_left_buff_cc1_y}`" />

      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="1.0" />
      <Substitution name="SHOW_MAIN_PERIOD" value="0.0" />
      
      <!-- Buffered compare lines visibility (blue for Compare0 Buff, purple for Compare1 Buff) -->
      <Substitution name="SHOW_BUFFER_COMPARE0_LINES" value="`${EnableCompare0Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_BUFFER_COMPARE1_LINES" value="`${EnableCompare1Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE0_LINES" value="`${EnableCompare0Swap ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE1_LINES" value="`${EnableCompare1Swap ? 0.0 : 1.0}`" />
      
      <!-- Dot visibility for left-aligned PWM (hide dots when compare > period) -->
      <Substitution name="SHOW_DOT1" value="`${show_dot1_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT1_CC1" value="`${show_dot1_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2" value="`${show_dot2_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2_CC1" value="`${show_dot2_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3" value="`${show_dot3_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3_CC1" value="`${show_dot3_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4" value="`${show_dot4_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4_CC1" value="`${show_dot4_left_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Buffered dot visibility for periods 2&4 (hide when compare > period) -->
      <!-- Use inverse hide logic: 0.0 when hidden, 1.0 when visible -->
      <Substitution name="SHOW_DOT2_BUFF" value="`${hide_dot2_buff_left ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT2_BUFF_CC1" value="`${hide_dot2_buff_left_cc1 ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF" value="`${hide_dot4_buff_left ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF_CC1" value="`${hide_dot4_buff_left_cc1 ? 0.0 : 1.0}`" />
      
      <!-- Inverse main dot visibility for waveform lines (show horizontal when main dots hidden) -->
      <Substitution name="HIDE_DOT1" value="`${hide_dot1_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT1_CC1" value="`${hide_dot1_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2" value="`${hide_dot2_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2_CC1" value="`${hide_dot2_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT3" value="`${hide_dot3_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT3_CC1" value="`${hide_dot3_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4" value="`${hide_dot4_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_CC1" value="`${hide_dot4_left_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Inverse buffered dot visibility for waveform lines (show horizontal when dots hidden) -->
      <Substitution name="HIDE_DOT2_BUFF" value="`${hide_dot2_buff_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2_BUFF_CC1" value="`${hide_dot2_buff_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_BUFF" value="`${hide_dot4_buff_left ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_BUFF_CC1" value="`${hide_dot4_buff_left_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Buffered compare line visibility (hide when compare value > period) -->
      <Substitution name="SHOW_COMPARE2_VALID" value="`${show_compare2_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE2_CC1_VALID" value="`${show_compare2_cc1_left ? 1.0 : 0.0}`" />
      
      <!-- Pre-multiplied compare line visibility (combines swap state with validity check) -->
      <!-- Main Compare0 lines: show when swap DISABLED and Compare0 <= Period -->
      <Substitution name="SHOW_MAIN_COMPARE0_VALID" value="`${!EnableCompare0Swap &amp;&amp; Compare0 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Main Compare1/CC1 lines: show when swap DISABLED and Compare2 <= Period -->
      <Substitution name="SHOW_MAIN_COMPARE1_VALID" value="`${!EnableCompare1Swap &amp;&amp; Compare2 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Buffered Compare0 lines: show when swap ENABLED and Compare1 <= Period -->
      <Substitution name="SHOW_BUFFER_COMPARE0_VALID" value="`${EnableCompare0Swap &amp;&amp; Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Buffered Compare1/CC1 lines: show when swap ENABLED and Compare3 <= Period -->
      <Substitution name="SHOW_BUFFER_COMPARE1_VALID" value="`${EnableCompare1Swap &amp;&amp; Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      
      <!-- Combined interrupt indicator visibility (interrupt enabled AND dot visible) -->
      <!-- Compare0 interrupts -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; show_dot1_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; (EnableCompare0Swap ? !hide_dot2_buff_left : show_dot2_left) ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; show_dot3_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; (EnableCompare0Swap ? !hide_dot4_buff_left : show_dot4_left) ? 1.0 : 0.0}`" />
      
      <!-- Compare1 interrupts -->
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; show_dot1_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; (EnableCompare1Swap ? !hide_dot2_buff_left_cc1 : show_dot2_left_cc1) ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; show_dot3_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; (EnableCompare1Swap ? !hide_dot4_buff_left_cc1 : show_dot4_left_cc1) ? 1.0 : 0.0}`" />
      
      <!-- Period line positioning for all 4 sawtooth periods -->
      <Substitution name="PERIOD1_LINE_Y" value="`${period1_left_line_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${period2_left_line_y}`" />
      <Substitution name="PERIOD3_LINE_Y" value="`${period3_left_line_y}`" />
      <Substitution name="PERIOD4_LINE_Y" value="`${period4_left_line_y}`" />
      <Substitution name="MAIN_PERIOD_LINE_Y" value="45" />
      
      <!-- Signal line coordinates -->
      <Substitution name="LINE_Y_H" value="350" />
      <Substitution name="LINE_Y_L" value="380" />
      <Substitution name="LINE_N_Y_H" value="400" />
      <Substitution name="LINE_N_Y_L" value="430" />
      <Substitution name="LINE_START_X" value="50" />
      <Substitution name="LINE_END_X" value="850" />
      
      <!-- Event indicator positions -->
      <Substitution name="OV_Y" value="240" />
      <Substitution name="UN_Y" value="260" />
      <Substitution name="TC_Y" value="280" />
      <Substitution name="CM_Y" value="300" />
      <Substitution name="CM_CC1_Y" value="320" />
      <Substitution name="MARKS_Y_BOT" value="235" />

      <!-- Colors -->
      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

    <ParamImage id="pwmvisualization_right"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_RIGHT_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_right_align.svg">
      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Dynamic triangle coordinates for proportional scaling -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${triangle1_right_left_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${triangle1_right_right_x}`" />
      <Substitution name="TRIANGLE2_LEFT_X" value="`${triangle2_right_left_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${triangle2_right_right_x}`" />
      <Substitution name="TRIANGLE3_LEFT_X" value="`${triangle3_right_left_x}`" />
      <Substitution name="TRIANGLE3_RIGHT_X" value="`${triangle3_right_right_x}`" />
      <Substitution name="TRIANGLE4_LEFT_X" value="`${triangle4_right_left_x}`" />
      <Substitution name="TRIANGLE4_RIGHT_X" value="`${triangle4_right_right_x}`" />
      
      <!-- Dynamic peak heights for all sawtooth periods -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${triangle1_right_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${triangle2_right_peak_y}`" />
      <Substitution name="TRIANGLE3_PEAK_Y" value="`${triangle3_right_peak_y}`" />
      <Substitution name="TRIANGLE4_PEAK_Y" value="`${triangle4_right_peak_y}`" />
      
      <!-- Compare line Y positions - periods 1 and 3 (Period0) -->
      <Substitution name="COMPARE1_Y" value="`${compare1_right_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${compare1_right_cc1_y}`" />
      
      <!-- Compare line Y positions - periods 2 and 4 (Period1) -->
      <!-- Periods 2 and 4 use Compare0 Buff and Compare1 Buff when Period1 is swapped -->
      <Substitution name="COMPARE2_Y" value="`${compare2_right_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${compare2_right_cc1_y}`" />
      <Substitution name="COMPARE3_Y" value="`${compare3_right_y}`" />
      <Substitution name="COMPARE3_CC1_Y" value="`${compare3_right_cc1_y}`" />
      <Substitution name="COMPARE4_Y" value="`${compare4_right_y}`" />
      <Substitution name="COMPARE4_CC1_Y" value="`${compare4_right_cc1_y}`" />
      
      <!-- Buffered compare lines for right-aligned (blue and violet/purple lines when swap enabled) -->
      <!-- These use buffered compare values (Compare1/Compare3) always scaled by Period0 -->
      <Substitution name="COMPARE2_BUFF_Y" value="`${compare2_right_buff_y}`" />
      <Substitution name="COMPARE2_BUFF_CC1_Y" value="`${compare2_right_buff_cc1_y}`" />
      <Substitution name="COMPARE4_BUFF_Y" value="`${compare4_right_buff_y}`" />
      <Substitution name="COMPARE4_BUFF_CC1_Y" value="`${compare4_right_buff_cc1_y}`" />
      
      <!-- Compare line values and labels for right-aligned -->
      <!-- Periods 1 and 3 use Compare0 and Compare2 -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      <Substitution name="COMPARE3_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE3_CC1_VALUE" value="`${Compare2}`" />
      <Substitution name="COMPARE3_LABEL" value="Compare 0" />
      <Substitution name="COMPARE3_CC1_LABEL" value="Compare 1" />
      
      <!-- Periods 2 and 4 use Compare0 Buff and Compare1 Buff when Period1 is swapped -->
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      <Substitution name="COMPARE4_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE4_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      <Substitution name="COMPARE4_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE4_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Period values and labels for right-aligned -->
      <!-- Alternating Period0 and Period1 for the 4 sawtooth periods -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${EnablePeriodSwap ? Period1 : Period0}`" />
      <Substitution name="PERIOD3_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD4_VALUE" value="`${EnablePeriodSwap ? Period1 : Period0}`" />
      
      <!-- DOT coordinates for right-aligned PWM using dynamic triangle calculations -->
      <!-- Period 1: Always uses Compare0/Compare2 -->
      <Substitution name="PWM_DOT1_X" value="`${dot1_right_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${dot1_right_y}`" />
      <Substitution name="PWM_DOT1_CC1_X" value="`${dot1_right_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${dot1_right_cc1_y}`" />
      
      <!-- Period 2: Conditionally use buffered dots when Compare0 swap is enabled -->
      <Substitution name="PWM_DOT2_X" value="`${EnableCompare0Swap ? dot2_right_buff_x : dot2_right_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${EnableCompare0Swap ? dot2_right_buff_y : dot2_right_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${EnableCompare1Swap ? dot2_right_buff_cc1_x : dot2_right_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${EnableCompare1Swap ? dot2_right_buff_cc1_y : dot2_right_cc1_y}`" />
      
      <!-- Period 3: Always uses Compare0/Compare2 -->
      <Substitution name="PWM_DOT3_X" value="`${dot3_right_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${dot3_right_y}`" />
      <Substitution name="PWM_DOT3_CC1_X" value="`${dot3_right_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${dot3_right_cc1_y}`" />
      
      <!-- Period 4: Conditionally use buffered dots when Compare0/Compare1 swaps are enabled -->
      <Substitution name="PWM_DOT4_X" value="`${EnableCompare0Swap ? dot4_right_buff_x : dot4_right_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${EnableCompare0Swap ? dot4_right_buff_y : dot4_right_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${EnableCompare1Swap ? dot4_right_buff_cc1_x : dot4_right_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${EnableCompare1Swap ? dot4_right_buff_cc1_y : dot4_right_cc1_y}`" />

      <!-- Buffered DOT coordinates for periods 2&4 (when swap enabled - blue and purple dots) -->
      <Substitution name="PWM_DOT2_BUFFER_X" value="`${dot2_right_buff_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_Y" value="`${dot2_right_buff_y}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_X" value="`${dot2_right_buff_cc1_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_Y" value="`${dot2_right_buff_cc1_y}`" />
      
      <Substitution name="PWM_DOT4_BUFFER_X" value="`${dot4_right_buff_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_Y" value="`${dot4_right_buff_y}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_X" value="`${dot4_right_buff_cc1_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_Y" value="`${dot4_right_buff_cc1_y}`" />

      <!-- Period labels for right-aligned (showing Period0/Period1 values) -->
      <Substitution name="PERIOD1_LABEL" value="Period0" />
      <Substitution name="PERIOD2_LABEL" value="`${EnablePeriodSwap ? &quot;Period1&quot; : &quot;Period0&quot;}`" />
      <Substitution name="PERIOD3_LABEL" value="Period0" />
      <Substitution name="PERIOD4_LABEL" value="`${EnablePeriodSwap ? &quot;Period1&quot; : &quot;Period0&quot;}`" />

      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="1.0" />
      
      <!-- Right-align dot visibility: hide when compare > period (Compare0/Compare2) -->
      <Substitution name="SHOW_DOT1" value="`${show_dot1_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT1_CC1" value="`${show_dot1_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2" value="`${show_dot2_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2_CC1" value="`${show_dot2_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3" value="`${show_dot3_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3_CC1" value="`${show_dot3_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4" value="`${show_dot4_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4_CC1" value="`${show_dot4_right_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Buffered dot visibility for periods 2&4 (hide when compare > period) -->
      <!-- Use inverse hide logic: 0.0 when hidden, 1.0 when visible -->
      <Substitution name="SHOW_DOT2_BUFF" value="`${hide_dot2_buff_right ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT2_BUFF_CC1" value="`${hide_dot2_buff_right_cc1 ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF" value="`${hide_dot4_buff_right ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF_CC1" value="`${hide_dot4_buff_right_cc1 ? 0.0 : 1.0}`" />
      
      <!-- Inverse main dot visibility for waveform lines (show horizontal when main dots hidden) -->
      <Substitution name="HIDE_DOT1" value="`${hide_dot1_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT1_CC1" value="`${hide_dot1_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2" value="`${hide_dot2_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2_CC1" value="`${hide_dot2_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT3" value="`${hide_dot3_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT3_CC1" value="`${hide_dot3_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4" value="`${hide_dot4_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_CC1" value="`${hide_dot4_right_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Inverse buffered dot visibility for waveform lines (show horizontal when dots hidden) -->
      <Substitution name="HIDE_DOT2_BUFF" value="`${hide_dot2_buff_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT2_BUFF_CC1" value="`${hide_dot2_buff_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_BUFF" value="`${hide_dot4_buff_right ? 1.0 : 0.0}`" />
      <Substitution name="HIDE_DOT4_BUFF_CC1" value="`${hide_dot4_buff_right_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Interrupt indicators combined with dot visibility for right-align (show only when interrupt enabled AND dot visible) -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; show_dot1_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; show_dot2_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2_BUFF" value="`${InterruptCC0 &amp;&amp; !hide_dot2_buff_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; show_dot3_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; show_dot4_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4_BUFF" value="`${InterruptCC0 &amp;&amp; !hide_dot4_buff_right ? 1.0 : 0.0}`" />
      
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; show_dot1_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; show_dot2_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2_BUFF" value="`${InterruptCC1 &amp;&amp; !hide_dot2_buff_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; show_dot3_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; show_dot4_right_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4_BUFF" value="`${InterruptCC1 &amp;&amp; !hide_dot4_buff_right_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Buffered compare line visibility (hide when compare value > period) -->
      <!-- Period 2&4 when swap ENABLED: Compare1 for Compare0 line, Compare3 for Compare1 line -->
      <Substitution name="SHOW_COMPARE2_VALID" value="`${show_compare2_right ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE2_CC1_VALID" value="`${show_compare2_cc1_right ? 1.0 : 0.0}`" />
      
      <!-- Right-align dot visibility: hide when compare > period -->
      <Substitution name="SHOW_RIGHT_ALIGN_DOT1_3" value="`${show_right_align_dot1_3 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_RIGHT_ALIGN_DOT1_3_CC1" value="`${pCntCC1 &amp;&amp; show_right_align_dot1_3_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_RIGHT_ALIGN_DOT2_4" value="`${show_right_align_dot2_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_RIGHT_ALIGN_DOT2_4_CC1" value="`${pCntCC1 &amp;&amp; show_right_align_dot2_4_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_MAIN_PERIOD" value="0.0" />
      
      <!-- Buffered compare lines visibility (blue for Compare0 Buff, purple for Compare1 Buff) -->
      <Substitution name="SHOW_BUFFER_COMPARE0_LINES" value="`${EnableCompare0Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_BUFFER_COMPARE1_LINES" value="`${EnableCompare1Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE0_LINES" value="`${EnableCompare0Swap ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE1_LINES" value="`${EnableCompare1Swap ? 0.0 : 1.0}`" />
      
      <!-- Period line positioning using dynamic triangle peaks -->
      <Substitution name="PERIOD1_LINE_Y" value="`${triangle1_right_peak_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${triangle2_right_peak_y}`" />
      <Substitution name="PERIOD3_LINE_Y" value="`${triangle3_right_peak_y}`" />
      <Substitution name="PERIOD4_LINE_Y" value="`${triangle4_right_peak_y}`" />
      <Substitution name="MAIN_PERIOD_LINE_Y" value="45" />
      
      <!-- Signal line coordinates -->
      <Substitution name="LINE_Y_H" value="350" />
      <Substitution name="LINE_Y_L" value="380" />
      <Substitution name="LINE_N_Y_H" value="400" />
      <Substitution name="LINE_N_Y_L" value="430" />
      <Substitution name="LINE_START_X" value="50" />
      <Substitution name="LINE_END_X" value="850" />
      
      <!-- Event indicator positions -->
      <Substitution name="OV_Y" value="240" />
      <Substitution name="UN_Y" value="260" />
      <Substitution name="TC_Y" value="280" />
      <Substitution name="CM_Y" value="300" />
      <Substitution name="CM_CC1_Y" value="320" />
      <Substitution name="MARKS_Y_BOT" value="235" />
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="COUNTER_X" value="`${triangle1_right_left_x}`" />
      <Substitution name="COUNTER_TOP_Y" value="60" />
      <Substitution name="COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />

      <!-- Colors -->
      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

    <ParamImage id="pwmvisualization_asymmetric"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_asymmetric_align.svg">
      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Counter line coordinates -->
      <Substitution name="COUNTER_X" value="`${asym_triangle1_left_x}`" />
      <Substitution name="COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="COUNTER_MID_Y" value="125" />

      <!-- Dynamic triangle heights -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${asym_triangle1_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${asym_triangle2_peak_y}`" />
      
      <!-- Dynamic triangle coordinates for proper proportional scaling -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${asym_triangle1_left_x}`" />
      <Substitution name="TRIANGLE1_PEAK_X" value="`${asym_triangle1_peak_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${asym_triangle1_right_x}`" />
      
      <Substitution name="TRIANGLE2_LEFT_X" value="`${asym_triangle2_left_x}`" />
      <Substitution name="TRIANGLE2_PEAK_X" value="`${asym_triangle2_peak_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${asym_triangle2_right_x}`" />
      
      <!-- Legacy peak X positions (for compatibility) -->
      <Substitution name="RAMP_PEAK1_X" value="`${asym_triangle1_peak_x}`" />
      <Substitution name="RAMP_CENTER_X" value="`${asym_triangle1_right_x}`" />
      <Substitution name="RAMP_PEAK2_X" value="`${asym_triangle2_peak_x}`" />
      
      <!-- Compare line Y positions -->
      <!-- Triangle 1: always Compare0 and Compare2 -->
      <Substitution name="COMPARE1_Y" value="`${asym_compare1_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${asym_compare1_cc1_y}`" />
      
      <!-- Triangle 2: Compare0/Compare2 or Compare1/Compare3 depending on swap -->
      <Substitution name="COMPARE2_Y" value="`${asym_compare2_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${asym_compare2_cc1_y}`" />
      
      <!-- Static Compare0 Y position for Triangle 2 red line (for label and dot positioning) -->
      <Substitution name="COMPARE0_TRIANGLE2_Y" value="`${asym_compare0_triangle2_y}`" />
      
      <!-- Compare 0 line visibility controls (split based on EnableCompare0Swap) -->
      <Substitution name="COMPARE1_FULL_OPACITY" value="`${asym_compare1_full_opacity}`" />
      <Substitution name="COMPARE1_LEFT_OPACITY" value="`${asym_compare1_left_opacity}`" />
      
      <!-- Compare 0 Buff visibility control -->
      <Substitution name="COMPARE1_BUFF_OPACITY" value="`${asym_compare1_buff_opacity}`" />
      
      <!-- Dot2 visibility control (hide when EnableCompare0Swap is true) -->
      <Substitution name="DOT2_OPACITY" value="`${asym_dot2_opacity}`" />
      
      <!-- Dot2 Buff visibility control (blue buff dot - only visible when EnableCompare0Swap is true) -->
      <Substitution name="DOT2_BUFF_OPACITY" value="`${asym_dot2_buff_opacity}`" />
      
      <!-- Period lines on top of triangles -->
      <Substitution name="PERIOD1_LINE_Y" value="`${asym_period1_line_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${asym_period2_line_y}`" />
      
      <!-- Main period line for single period mode -->
      <Substitution name="MAIN_PERIOD_LINE_Y" value="`${asym_main_period_line_y}`" />
      <Substitution name="MAIN_PERIOD_LEFT_X" value="`${asym_main_period_left_x}`" />
      <Substitution name="MAIN_PERIOD_RIGHT_X" value="`${asym_main_period_right_x}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="`${asym_show_individual_periods}`" />
      <Substitution name="SHOW_MAIN_PERIOD" value="`${asym_show_main_period}`" />
      
      <!-- Period and compare values for labels -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${asym_triangle2_period}`" />
      
      <!-- Triangle 1 compare labels (always Compare0 and Compare2) -->
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      
      <!-- Triangle 1 compare values (always uses Compare0 and Compare2) -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      
      <!-- Static Compare0 value for Triangle 2 red line label -->
      <Substitution name="COMPARE0_VALUE" value="`${Compare0}`" />
      
      <!-- Triangle 2 compare values (depends on swap settings) -->
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      
      <!-- Triangle 2 compare labels (show which compare is being used) -->
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      
      <!-- Asymmetric-align dot visibility: hide when compare > period -->
      <Substitution name="SHOW_ASYM_ALIGN_DOT1_2" value="`${show_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_ASYM_ALIGN_DOT1_2_CC1" value="`${pCntCC1 &amp;&amp; show_asym_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_ASYM_ALIGN_DOT3_4" value="`${show_asym_align_dot3_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_ASYM_ALIGN_DOT3_4_CC1" value="`${pCntCC1 &amp;&amp; show_asym_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Red Compare0 dots for Triangle 2 (always check Compare0 <= period, not swap-dependent) -->
      <Substitution name="SHOW_ASYM_ALIGN_DOT3_4_COMPARE0" value="`${show_asym_dot3_4_compare0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_ASYM_ALIGN_DOT3_4_COMPARE0_DOT4" value="`${(show_asym_dot3_4_compare0 &amp;&amp; !EnableCompare0Swap) ? 1.0 : 0.0}`" />
      
      <!-- Triangle 1 red Compare0 dots visibility (hide when Compare0 > Period0 OR when swap enabled for dot2) -->
      <Substitution name="SHOW_ASYM_ALIGN_DOT1_2_COMPARE0" value="`${show_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_ASYM_ALIGN_DOT1_2_COMPARE0_DOT2" value="`${(show_asym_align_dot1_2 &amp;&amp; !EnableCompare0Swap) ? 1.0 : 0.0}`" />
      
      <!-- Blue Compare0_Buff dots (only visible when swap enabled AND compare within bounds) -->
      <Substitution name="DOT2_BUFF_COMPARE0_OPACITY" value="`${(EnableCompare0Swap &amp;&amp; show_asym_dot2_buff) ? 1.0 : 0.0}`" />
      <Substitution name="DOT4_BUFF_COMPARE0_OPACITY" value="`${(EnableCompare0Swap &amp;&amp; show_asym_dot4_buff) ? 1.0 : 0.0}`" />
      
      <!-- Interrupt visibility -->
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      
      <!-- Interrupt indicators combined with dot visibility for asymmetric-align (show only when interrupt enabled AND dot visible) -->
      <!-- Hide red dot interrupt indicators when swap enabled (buff indicators will show instead) -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; show_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; show_asym_align_dot1_2 &amp;&amp; !EnableCompare0Swap ? 1.0 : 0.0}`" />
      <!-- Interrupt indicators for buff dots (visible when swap enabled AND buff within bounds) -->
      <Substitution name="SHOW_INTERRUPT_CC0_BUFF_DOT2" value="`${InterruptCC0 &amp;&amp; show_asym_align_dot1_2 &amp;&amp; EnableCompare0Swap &amp;&amp; show_asym_dot2_buff ? 1.0 : 0.0}`" />
      <!-- Compare 0 interrupt on Triangle 2 (always shows if Compare0 within bounds, regardless of Compare0_Buff) -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; show_asym_dot3_4_compare0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; show_asym_dot3_4_compare0 &amp;&amp; !EnableCompare0Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_BUFF_DOT4" value="`${InterruptCC0 &amp;&amp; EnableCompare0Swap &amp;&amp; show_asym_dot4_buff ? 1.0 : 0.0}`" />
      
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; show_asym_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; show_asym_align_dot1_2_cc1 &amp;&amp; !EnableCompare1Swap ? 1.0 : 0.0}`" />
      <!-- Interrupt indicators for buff dots (visible when swap enabled AND buff within bounds) -->
      <Substitution name="SHOW_INTERRUPT_CC1_BUFF_DOT2" value="`${InterruptCC1 &amp;&amp; show_asym_align_dot1_2_cc1 &amp;&amp; EnableCompare1Swap &amp;&amp; show_asym_dot2_buff_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; show_asym_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; show_asym_align_dot3_4_cc1 &amp;&amp; !EnableCompare1Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_BUFF_DOT4" value="`${InterruptCC1 &amp;&amp; EnableCompare1Swap &amp;&amp; show_asym_dot4_buff_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Dynamic DOT coordinates -->
      <!-- Triangle 1 Compare0 dots -->
      <Substitution name="PWM_DOT1_X" value="`${asym_dot1_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${asym_dot1_y}`" />
      <Substitution name="PWM_DOT2_X" value="`${asym_dot2_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${asym_dot2_y}`" />
      
      <!-- Triangle 1 Compare2 dots -->
      <Substitution name="PWM_DOT1_CC1_X" value="`${asym_dot1_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${asym_dot1_cc1_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${asym_dot2_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${asym_dot2_cc1_y}`" />
      
      <!-- Triangle 1 Compare1 Buff dot X position -->
      <Substitution name="PWM_DOT2_CC1_BUFF_X" value="`${asym_dot2_cc1_buff_x}`" />
      
      <!-- Triangle 2 dots -->
      <Substitution name="PWM_DOT3_X" value="`${asym_dot3_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${asym_dot3_y}`" />
      <Substitution name="PWM_DOT4_X" value="`${asym_dot4_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${asym_dot4_y}`" />
      
      <!-- Triangle 2 CC1 dots -->
      <Substitution name="PWM_DOT3_CC1_X" value="`${asym_dot3_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${asym_dot3_cc1_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${asym_dot4_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${asym_dot4_cc1_y}`" />
      
      <!-- Triangle 2 Compare1 Buff dot X positions -->
      <Substitution name="PWM_DOT3_CC1_BUFF_X" value="`${asym_dot3_cc1_buff_x}`" />
      <Substitution name="PWM_DOT4_CC1_BUFF_X" value="`${asym_dot4_cc1_buff_x}`" />
      
      <!-- Waveform breakpoints for line_out (swap-aware for right side dots) -->
      <!-- Triangle 1: Right dot uses either dynamic dot2 (no swap) or buff dot (swap enabled) -->
      <Substitution name="PWM_DOT2_WAVEFORM_X" value="`${EnableCompare0Swap ? asym_dot2_cc1_buff_x : asym_dot2_x}`" />
      <!-- Triangle 2: Left dot uses Compare0 (always up transition) -->
      <Substitution name="PWM_DOT3_WAVEFORM_X" value="`${asym_dot3_compare0_x}`" />
      <!-- Triangle 2: Right dot uses Compare0_Buff when swap, Compare0 when no swap (down transition) -->
      <Substitution name="PWM_DOT4_WAVEFORM_X" value="`${EnableCompare0Swap ? asym_dot4_cc1_buff_x : asym_dot4_compare0_x}`" />
      
      <!-- Triangle 2 static Compare0 dot X positions -->
      <Substitution name="PWM_DOT3_COMPARE0_X" value="`${asym_dot3_compare0_x}`" />
      <Substitution name="PWM_DOT4_COMPARE0_X" value="`${asym_dot4_compare0_x}`" />

      <!-- CC0_MATCH overflow event vertical lines (grey lines at compare=period intersection) -->
      <Substitution name="CC0_MATCH_LINE1_X" value="`${asym_cc0_match_line1_x}`" />
      <Substitution name="CC0_MATCH_LINE2_X" value="`${asym_cc0_match_line2_x}`" />

      <!-- Compare0_Buff lines (shown on right side of overflow line when EnableCompare0Swap is true) -->
      <Substitution name="COMPARE1_BUFF_Y" value="`${asym_compare1_buff_y}`" />
      <Substitution name="COMPARE2_BUFF_Y" value="`${asym_compare2_buff_y}`" />
      
      <!-- Compare line visibility controls for asymmetric align -->
      <Substitution name="COMPARE2_FULL_OPACITY" value="`${asym_compare2_full_opacity}`" />
      <Substitution name="COMPARE2_LEFT_OPACITY" value="`${asym_compare2_left_opacity}`" />
      <Substitution name="COMPARE2_BUFF_OPACITY" value="`${asym_compare2_buff_opacity}`" />
      
      <!-- Dot visibility controls for asymmetric align -->
      <Substitution name="DOT4_OPACITY" value="`${asym_dot4_opacity}`" />
      <Substitution name="DOT4_BUFF_OPACITY" value="`${asym_dot4_cc1_buff_opacity}`" />
      
      <!-- Levels for line -->
      <Substitution name="LINE_Y_H" value="`${y_line_hi}`"/>
      <Substitution name="LINE_Y_L" value="`${y_line_lo}`"/>

      <!-- Inverted levels for line_n (properly separated and inverted) -->
      <Substitution name="LINE_N_Y_H" value="`${y_line_n_hi}`"/>
      <Substitution name="LINE_N_Y_L" value="`${y_line_n_lo}`"/>

      <!-- Break points for polylines -->
      <Substitution name="LINE_X0" value="`${x_start}`"/>
      <Substitution name="LINE_X1" value="`${x_rise1}`"/>
      <Substitution name="LINE_X2" value="`${x_fall1}`"/>
      <Substitution name="LINE_X3" value="`${x_rise2}`"/>
      <Substitution name="LINE_X4" value="`${x_fall2}`"/>
      <Substitution name="LINE_X5" value="`${x_end}`"/>

      <Substitution name="LINE_START_X" value="50"/>
      <Substitution name="LINE_END_X" value="850"/>

      <Substitution name="OV_Y" value="240"/>
      <Substitution name="UN_Y" value="260"/>
      <Substitution name="TC_Y" value="280"/>
      <Substitution name="CM_Y" value="300"/>
      <Substitution name="CM_CC1_Y" value="320"/>

      <Substitution name="MARKS_Y_TOP" value="205"/>  <!-- slightly lower than triangle zone (base 200) -->
      <Substitution name="MARKS_Y_BOT" value="235"/>  <!-- slightly above OV -->
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="ASYM_COUNTER_X" value="`${asym_triangle1_left_x}`" />
      <Substitution name="COUNTER_TOP_Y" value="60" />
      <Substitution name="ASYM_COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />

      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

    <ParamImage id="pwmvisualization_asymmetric_cc0_cc1"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_CC0_CC1_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_asymmetric_cc0_cc1_align.svg">
      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Four sawtooth periods for left-aligned PWM -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${asym_cc0_cc1_triangle1_left_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${asym_cc0_cc1_triangle1_right_x}`" />
      <Substitution name="TRIANGLE2_LEFT_X" value="`${asym_cc0_cc1_triangle2_left_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${asym_cc0_cc1_triangle2_right_x}`" />
      <Substitution name="TRIANGLE3_LEFT_X" value="`${asym_cc0_cc1_triangle3_left_x}`" />
      <Substitution name="TRIANGLE3_RIGHT_X" value="`${asym_cc0_cc1_triangle3_right_x}`" />
      <Substitution name="TRIANGLE4_LEFT_X" value="`${asym_cc0_cc1_triangle4_left_x}`" />
      <Substitution name="TRIANGLE4_RIGHT_X" value="`${asym_cc0_cc1_triangle4_right_x}`" />
      
      <!-- Dynamic ramp peak X positions for proportional scaling -->
      <Substitution name="RAMP_PEAK1_X" value="`${asym_cc0_cc1_left_ramp_peak1_x}`" />
      <Substitution name="RAMP_PEAK2_X" value="`${asym_cc0_cc1_left_ramp_peak2_x}`" />
      <Substitution name="RAMP_CENTER_X" value="`${asym_cc0_cc1_left_ramp_peak3_x}`" />
      <Substitution name="RAMP_PEAK3_X" value="`${asym_cc0_cc1_left_ramp_peak3_x}`" />
      <Substitution name="RAMP_RIGHT_X" value="`${asym_cc0_cc1_left_ramp_peak4_x}`" />
      <Substitution name="RAMP_PEAK4_X" value="`${asym_cc0_cc1_left_ramp_peak4_x}`" />
      
      <!-- Peak heights for all sawtooth periods -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${asym_cc0_cc1_triangle1_left_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${asym_cc0_cc1_triangle2_left_peak_y}`" />
      <Substitution name="TRIANGLE3_PEAK_Y" value="`${asym_cc0_cc1_triangle3_left_peak_y}`" />
      <Substitution name="TRIANGLE4_PEAK_Y" value="`${asym_cc0_cc1_triangle4_left_peak_y}`" />
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="COUNTER_X" value="`${asym_cc0_cc1_triangle1_left_x}`" />
      <Substitution name="COUNTER_TOP_Y" value="60" />
      <Substitution name="COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />

      <!-- Compare line Y positions - periods 1 and 3 (Period0) -->
      <Substitution name="COMPARE1_Y" value="`${asym_cc0_cc1_compare1_left_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${asym_cc0_cc1_compare1_left_cc1_y}`" />
      
      <!-- Compare line values and labels for left-aligned (Period 0) -->
      <!-- Periods 1 and 3 use Compare0 and Compare1 -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      <Substitution name="COMPARE3_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE3_CC1_VALUE" value="`${Compare2}`" />
      <Substitution name="COMPARE3_LABEL" value="Compare 0" />
      <Substitution name="COMPARE3_CC1_LABEL" value="Compare 1" />
      
      <!-- Compare line Y positions - periods 2 and 4 (Period1) -->
      <!-- Periods 2 and 4 use Compare0 Buff and Compare1 Buff when Period1 is swapped -->
      <Substitution name="COMPARE2_Y" value="`${asym_cc0_cc1_compare2_left_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${asym_cc0_cc1_compare2_left_cc1_y}`" />
      <Substitution name="COMPARE3_Y" value="`${asym_cc0_cc1_compare3_left_y}`" />
      <Substitution name="COMPARE3_CC1_Y" value="`${asym_cc0_cc1_compare3_left_cc1_y}`" />
      <Substitution name="COMPARE4_Y" value="`${asym_cc0_cc1_compare4_left_y}`" />
      <Substitution name="COMPARE4_CC1_Y" value="`${asym_cc0_cc1_compare4_left_cc1_y}`" />
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      <Substitution name="COMPARE4_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE4_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      <Substitution name="COMPARE4_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE4_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Period values and labels for left-aligned -->
      <!-- Alternating Period0 and Period1 for the 4 sawtooth periods -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${EnablePeriodSwap ? Period1 : Period0}`" />
      
      <!-- Period labels that show which period value is being used -->
      <Substitution name="PERIOD1_LABEL" value="Period0" />
      <Substitution name="PERIOD2_LABEL" value="`${EnablePeriodSwap ? &quot;Period1&quot; : &quot;Period0&quot;}`" />
      
      <!-- DOT coordinates for left-aligned PWM using ParamString variables -->
      <!-- Period 1 -->
      <Substitution name="PWM_DOT1_X" value="`${asym_cc0_cc1_dot1_left_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${asym_cc0_cc1_dot1_left_y}`" />
      <Substitution name="PWM_DOT1_CC1_X" value="`${asym_cc0_cc1_dot1_left_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${asym_cc0_cc1_dot1_left_cc1_y}`" />
      
      <!-- Period 2 -->
      <!-- Use buffered dots when compare swap is enabled for Period2 -->
      <Substitution name="PWM_DOT2_X" value="`${EnableCompare0Swap ? asym_cc0_cc1_dot2_left_buff_x : asym_cc0_cc1_dot2_left_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${EnableCompare0Swap ? asym_cc0_cc1_dot2_left_buff_y : asym_cc0_cc1_dot2_left_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${EnableCompare1Swap ? asym_cc0_cc1_dot2_left_buff_cc1_x : asym_cc0_cc1_dot2_left_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${EnableCompare1Swap ? asym_cc0_cc1_dot2_left_buff_cc1_y : asym_cc0_cc1_dot2_left_cc1_y}`" />
      
      <!-- Period 3 -->
      <Substitution name="PWM_DOT3_X" value="`${asym_cc0_cc1_dot3_left_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${asym_cc0_cc1_dot3_left_y}`" />
      <Substitution name="PWM_DOT3_CC1_X" value="`${asym_cc0_cc1_dot3_left_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${asym_cc0_cc1_dot3_left_cc1_y}`" />
      
      <!-- Period 4 -->
      <!-- Use buffered dots when compare swap is enabled for Period4 -->
      <Substitution name="PWM_DOT4_X" value="`${EnableCompare0Swap ? asym_cc0_cc1_dot4_left_buff_x : asym_cc0_cc1_dot4_left_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${EnableCompare0Swap ? asym_cc0_cc1_dot4_left_buff_y : asym_cc0_cc1_dot4_left_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${EnableCompare1Swap ? asym_cc0_cc1_dot4_left_buff_cc1_x : asym_cc0_cc1_dot4_left_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${EnableCompare1Swap ? asym_cc0_cc1_dot4_left_buff_cc1_y : asym_cc0_cc1_dot4_left_cc1_y}`" />

      <!-- Buffer compare dots for periods 2&4 (when swap is enabled) -->
      <Substitution name="PWM_DOT2_BUFFER_X" value="`${asym_cc0_cc1_dot2_left_buff_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_Y" value="`${asym_cc0_cc1_dot2_left_buff_y}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_X" value="`${asym_cc0_cc1_dot2_left_buff_cc1_x}`" />
      <Substitution name="PWM_DOT2_BUFFER_CC1_Y" value="`${asym_cc0_cc1_dot2_left_buff_cc1_y}`" />
      
      <Substitution name="PWM_DOT4_BUFFER_X" value="`${asym_cc0_cc1_dot4_left_buff_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_Y" value="`${asym_cc0_cc1_dot4_left_buff_y}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_X" value="`${asym_cc0_cc1_dot4_left_buff_cc1_x}`" />
      <Substitution name="PWM_DOT4_BUFFER_CC1_Y" value="`${asym_cc0_cc1_dot4_left_buff_cc1_y}`" />

      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="1.0" />
      <Substitution name="SHOW_MAIN_PERIOD" value="0.0" />
      
      <!-- Buffered compare lines visibility (blue for Compare0 Buff, purple for Compare1 Buff) -->
      <Substitution name="SHOW_BUFFER_COMPARE0_LINES" value="`${EnableCompare0Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_BUFFER_COMPARE1_LINES" value="`${EnableCompare1Swap ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE0_LINES" value="`${EnableCompare0Swap ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_MAIN_COMPARE1_LINES" value="`${EnableCompare1Swap ? 0.0 : 1.0}`" />
      
      <!-- Period line positioning for all 4 sawtooth periods -->
      <Substitution name="PERIOD1_LINE_Y" value="`${asym_cc0_cc1_period1_left_line_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${asym_cc0_cc1_period2_left_line_y}`" />
      <Substitution name="PERIOD3_LINE_Y" value="`${asym_cc0_cc1_period3_left_line_y}`" />
      <Substitution name="PERIOD4_LINE_Y" value="`${asym_cc0_cc1_period4_left_line_y}`" />
      <Substitution name="MAIN_PERIOD_LINE_Y" value="45" />
      
      <!-- Signal line coordinates -->
      <Substitution name="LINE_Y_H" value="350" />
      <Substitution name="LINE_Y_L" value="380" />
      <Substitution name="LINE_N_Y_H" value="400" />
      <Substitution name="LINE_N_Y_L" value="430" />
      <Substitution name="LINE_START_X" value="50" />
      <Substitution name="LINE_END_X" value="850" />
      
      <!-- Event indicator positions -->
      <Substitution name="OV_Y" value="240" />
      <Substitution name="UN_Y" value="260" />
      <Substitution name="TC_Y" value="280" />
      <Substitution name="CM_Y" value="300" />
      <Substitution name="CM_CC1_Y" value="320" />
      <Substitution name="MARKS_Y_BOT" value="235" />

      <!-- Dot visibility -->
      <Substitution name="SHOW_DOT1" value="`${asym_cc0_cc1_show_dot1_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT1_CC1" value="`${asym_cc0_cc1_show_dot1_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2" value="`${asym_cc0_cc1_show_dot2_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT2_CC1" value="`${asym_cc0_cc1_show_dot2_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3" value="`${asym_cc0_cc1_show_dot3_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT3_CC1" value="`${asym_cc0_cc1_show_dot3_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4" value="`${asym_cc0_cc1_show_dot4_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_DOT4_CC1" value="`${asym_cc0_cc1_show_dot4_left_cc1 ? 1.0 : 0.0}`" />
      
      <Substitution name="SHOW_DOT2_BUFF" value="`${asym_cc0_cc1_hide_dot2_buff_left ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT2_BUFF_CC1" value="`${asym_cc0_cc1_hide_dot2_buff_left_cc1 ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF" value="`${asym_cc0_cc1_hide_dot4_buff_left ? 0.0 : 1.0}`" />
      <Substitution name="SHOW_DOT4_BUFF_CC1" value="`${asym_cc0_cc1_hide_dot4_buff_left_cc1 ? 0.0 : 1.0}`" />
      
      <!-- Buffered compare line visibility (hide when compare value > period) -->
      <Substitution name="SHOW_COMPARE2_VALID" value="`${asym_cc0_cc1_show_compare2_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE2_CC1_VALID" value="`${asym_cc0_cc1_show_compare2_cc1_left ? 1.0 : 0.0}`" />

      <!-- Pre-multiplied compare line visibility (combines swap state with validity check) -->
      <!-- Main Compare0 lines: show when swap DISABLED and Compare0 <= Period -->
      <Substitution name="SHOW_MAIN_COMPARE0_VALID" value="`${!EnableCompare0Swap &amp;&amp; Compare0 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Main Compare1/CC1 lines: show when swap DISABLED and Compare2 <= Period -->
      <Substitution name="SHOW_MAIN_COMPARE1_VALID" value="`${!EnableCompare1Swap &amp;&amp; Compare2 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Buffered Compare0 lines: show when swap ENABLED and Compare1 <= Period -->
      <Substitution name="SHOW_BUFFER_COMPARE0_VALID" value="`${EnableCompare0Swap &amp;&amp; Compare1 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />
      <!-- Buffered Compare1/CC1 lines: show when swap ENABLED and Compare3 <= Period -->
      <Substitution name="SHOW_BUFFER_COMPARE1_VALID" value="`${EnableCompare1Swap &amp;&amp; Compare3 &lt;= (EnablePeriodSwap ? Period1 : Period0) ? 1.0 : 0.0}`" />

      <!-- Interrupt indicators for Compare0 dots -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; asym_cc0_cc1_show_dot1_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; (EnableCompare0Swap ? !asym_cc0_cc1_hide_dot2_buff_left : asym_cc0_cc1_show_dot2_left) ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; asym_cc0_cc1_show_dot3_left ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; (EnableCompare0Swap ? !asym_cc0_cc1_hide_dot4_buff_left : asym_cc0_cc1_show_dot4_left) ? 1.0 : 0.0}`" />
      
      <!-- Interrupt indicators for Compare1 dots -->
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; asym_cc0_cc1_show_dot1_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; (EnableCompare1Swap ? !asym_cc0_cc1_hide_dot2_buff_left_cc1 : asym_cc0_cc1_show_dot2_left_cc1) ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; asym_cc0_cc1_show_dot3_left_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; (EnableCompare1Swap ? !asym_cc0_cc1_hide_dot4_buff_left_cc1 : asym_cc0_cc1_show_dot4_left_cc1) ? 1.0 : 0.0}`" />

      <!-- Colors -->
      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

    <ParamImage id="pwmvisualization_center_asymmetric_cc0_cc1"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${PwmAlignment eq CY_TCPWM_PWM_CENTER_ASYMMETRIC_CC0_CC1_ALIGN}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_center_asymmetric_cc0_cc1_align.svg">
      <Substitution name="ERROR_MESSAGE_OPACITY" value="`${ERROR_MESSAGE_OPACITY}`" />
      <Substitution name="COMPARE_ERROR_OPACITY" value="`${COMPARE_ERROR_OPACITY}`" />
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />

      <!-- Dynamic triangle heights -->
      <Substitution name="TRIANGLE1_PEAK_Y" value="`${center_asym_align_triangle1_peak_y}`" />
      <Substitution name="TRIANGLE2_PEAK_Y" value="`${center_align_triangle2_peak_y}`" />
      
      <!-- Dynamic triangle coordinates for proper proportional scaling -->
      <Substitution name="TRIANGLE1_LEFT_X" value="`${center_asym_align_triangle1_left_x}`" />
      <Substitution name="TRIANGLE1_PEAK_X" value="`${center_asym_align_triangle1_peak_x}`" />
      <Substitution name="TRIANGLE1_RIGHT_X" value="`${center_asym_align_triangle1_right_x}`" />
      
      <Substitution name="TRIANGLE2_LEFT_X" value="`${center_asym_align_triangle2_left_x}`" />
      <Substitution name="TRIANGLE2_PEAK_X" value="`${center_asym_align_triangle2_peak_x}`" />
      <Substitution name="TRIANGLE2_RIGHT_X" value="`${center_asym_align_triangle2_right_x}`" />
      
      <!-- Legacy peak X positions (for compatibility) -->
      <Substitution name="RAMP_PEAK1_X" value="`${center_asym_align_triangle1_peak_x}`" />
      <Substitution name="RAMP_CENTER_X" value="`${center_asym_align_triangle1_right_x}`" />
      <Substitution name="RAMP_PEAK2_X" value="`${center_asym_align_triangle2_peak_x}`" />
      
      <!-- Compare line Y positions -->
      <!-- Triangle 1: always Compare0 and Compare2 -->
      <Substitution name="COMPARE1_Y" value="`${center_asym_align_compare1_y}`" />
      <Substitution name="COMPARE1_CC1_Y" value="`${center_asym_align_compare1_cc1_y}`" />
      
      <!-- Triangle 2: Compare0/Compare2 or Compare1/Compare3 depending on swap -->
      <Substitution name="COMPARE2_Y" value="`${center_asym_align_compare2_y}`" />
      <Substitution name="COMPARE2_CC1_Y" value="`${center_asym_align_compare2_cc1_y}`" />
      
      <!-- Period lines on top of triangles -->
      <Substitution name="PERIOD1_LINE_Y" value="`${center_asym_align_period1_line_y}`" />
      <Substitution name="PERIOD2_LINE_Y" value="`${center_asym_align_period2_line_y}`" />
      
      <!-- Main period line for single period mode -->
      <Substitution name="MAIN_PERIOD_LINE_Y" value="`${center_asym_align_main_period_line_y}`" />
      <Substitution name="MAIN_PERIOD_LEFT_X" value="`${center_asym_align_main_period_left_x}`" />
      <Substitution name="MAIN_PERIOD_RIGHT_X" value="`${center_asym_align_main_period_right_x}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_INDIVIDUAL_PERIODS" value="`${center_asym_align_show_individual_periods}`" />
      <Substitution name="SHOW_MAIN_PERIOD" value="`${center_asym_align_show_main_period}`" />
      
      <!-- Period and compare values for labels -->
      <Substitution name="PERIOD1_VALUE" value="`${Period0}`" />
      <Substitution name="PERIOD2_VALUE" value="`${center_asym_align_triangle2_period}`" />
      
      <!-- Triangle 1 compare labels (always Compare0 and Compare2) -->
      <Substitution name="COMPARE1_LABEL" value="Compare 0" />
      <Substitution name="COMPARE1_CC1_LABEL" value="Compare 1" />
      
      <!-- Triangle 1 compare values (always uses Compare0 and Compare2) -->
      <Substitution name="COMPARE1_VALUE" value="`${Compare0}`" />
      <Substitution name="COMPARE1_CC1_VALUE" value="`${Compare2}`" />
      
      <!-- Triangle 2 compare values (depends on swap settings) -->
      <Substitution name="COMPARE2_VALUE" value="`${EnableCompare0Swap ? Compare1 : Compare0}`" />
      <Substitution name="COMPARE2_CC1_VALUE" value="`${EnableCompare1Swap ? Compare3 : Compare2}`" />
      
      <!-- Triangle 2 compare labels (show which compare is being used) -->
      <Substitution name="COMPARE2_LABEL" value="`${EnableCompare0Swap ? &quot;Compare 0 Buff&quot; : &quot;Compare 0&quot;}`" />
      <Substitution name="COMPARE2_CC1_LABEL" value="`${EnableCompare1Swap ? &quot;Compare 1 Buff&quot; : &quot;Compare 1&quot;}`" />
      
      <!-- Visibility controls -->
      <Substitution name="SHOW_CC1_LINES" value="`${pCntCC1 ? 1.0 : 0.0}`" />
      
      <!-- Center-asym-align dot visibility: hide when compare > period -->
      <Substitution name="SHOW_CENTER_ALIGN_DOT1_2" value="`${show_center_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT1_2_CC1" value="`${pCntCC1 &amp;&amp; show_center_asym_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT3_4" value="`${show_center_asym_align_dot3_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_CENTER_ALIGN_DOT3_4_CC1" value="`${pCntCC1 &amp;&amp; show_center_asym_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Compare dot visibility (hide when compare > period) -->
      <Substitution name="SHOW_COMPARE1_DOT" value="`${center_asym_align_show_compare1_dot ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE1_CC1_DOT" value="`${center_asym_align_show_compare1_cc1_dot ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE2_DOT" value="`${center_asym_align_show_compare2_dot ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_COMPARE2_CC1_DOT" value="`${center_asym_align_show_compare2_cc1_dot ? 1.0 : 0.0}`" />
      
      <!-- Interrupt visibility -->
      <Substitution name="SHOW_INTERRUPT_TC" value="`${InterruptTC ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0" value="`${InterruptCC0 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1" value="`${InterruptCC1 ? 1.0 : 0.0}`" />
      
      <!-- Interrupt indicators combined with dot visibility for center-asym-align (show only when interrupt enabled AND dot visible) -->
      <Substitution name="SHOW_INTERRUPT_CC0_DOT1" value="`${InterruptCC0 &amp;&amp; show_center_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT2" value="`${InterruptCC0 &amp;&amp; show_center_asym_align_dot1_2 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT3" value="`${InterruptCC0 &amp;&amp; show_center_asym_align_dot3_4 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC0_DOT4" value="`${InterruptCC0 &amp;&amp; show_center_asym_align_dot3_4 ? 1.0 : 0.0}`" />
      
      <Substitution name="SHOW_INTERRUPT_CC1_DOT1" value="`${InterruptCC1 &amp;&amp; show_center_asym_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT2" value="`${InterruptCC1 &amp;&amp; show_center_asym_align_dot1_2_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT3" value="`${InterruptCC1 &amp;&amp; show_center_asym_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      <Substitution name="SHOW_INTERRUPT_CC1_DOT4" value="`${InterruptCC1 &amp;&amp; show_center_asym_align_dot3_4_cc1 ? 1.0 : 0.0}`" />
      
      <!-- Dynamic DOT coordinates -->
      <!-- Triangle 1 Compare0 dots -->
      <Substitution name="PWM_DOT1_X" value="`${center_asym_align_dot1_x}`" />
      <Substitution name="PWM_DOT1_Y" value="`${center_asym_align_dot1_y}`" />
      <Substitution name="PWM_DOT2_X" value="`${center_asym_align_dot2_x}`" />
      <Substitution name="PWM_DOT2_Y" value="`${center_asym_align_dot2_y}`" />
      
      <!-- Triangle 1 Compare2 dots -->
      <Substitution name="PWM_DOT1_CC1_X" value="`${center_asym_align_dot1_cc1_x}`" />
      <Substitution name="PWM_DOT1_CC1_Y" value="`${center_asym_align_dot1_cc1_y}`" />
      <Substitution name="PWM_DOT2_CC1_X" value="`${center_asym_align_dot2_cc1_x}`" />
      <Substitution name="PWM_DOT2_CC1_Y" value="`${center_asym_align_dot2_cc1_y}`" />
      
      <!-- Triangle 2 dots -->
      <Substitution name="PWM_DOT3_X" value="`${center_asym_align_dot3_x}`" />
      <Substitution name="PWM_DOT3_Y" value="`${center_asym_align_dot3_y}`" />
      <Substitution name="PWM_DOT4_X" value="`${center_asym_align_dot4_x}`" />
      <Substitution name="PWM_DOT4_Y" value="`${center_asym_align_dot4_y}`" />
      
      <!-- Triangle 2 CC1 dots -->
      <Substitution name="PWM_DOT3_CC1_X" value="`${center_asym_align_dot3_cc1_x}`" />
      <Substitution name="PWM_DOT3_CC1_Y" value="`${center_asym_align_dot3_cc1_y}`" />
      <Substitution name="PWM_DOT4_CC1_X" value="`${center_asym_align_dot4_cc1_x}`" />
      <Substitution name="PWM_DOT4_CC1_Y" value="`${center_asym_align_dot4_cc1_y}`" />
      <!-- Levels for line -->
      <Substitution name="LINE_Y_H" value="`${y_line_hi}`"/>
      <Substitution name="LINE_Y_L" value="`${y_line_lo}`"/>

      <!-- Inverted levels for line_n (properly separated and inverted) -->
      <Substitution name="LINE_N_Y_H" value="`${y_line_n_hi}`"/>
      <Substitution name="LINE_N_Y_L" value="`${y_line_n_lo}`"/>

      <!-- Break points for polylines -->
      <Substitution name="LINE_X0" value="`${x_start}`"/>
      <Substitution name="LINE_X1" value="`${x_rise1}`"/>
      <Substitution name="LINE_X2" value="`${x_fall1}`"/>
      <Substitution name="LINE_X3" value="`${x_rise2}`"/>
      <Substitution name="LINE_X4" value="`${x_fall2}`"/>
      <Substitution name="LINE_X5" value="`${x_end}`"/>

      <Substitution name="LINE_START_X" value="50"/>
      <Substitution name="LINE_END_X" value="850"/>

      <Substitution name="OV_Y" value="240"/>
      <Substitution name="UN_Y" value="260"/>
      <Substitution name="TC_Y" value="280"/>
      <Substitution name="CM_Y" value="300"/>
      <Substitution name="CM_CC1_Y" value="320"/>

      <Substitution name="MARKS_Y_TOP" value="205"/>  <!-- slightly lower than triangle zone (base 200) -->
      <Substitution name="MARKS_Y_BOT" value="235"/>  <!-- slightly above OV -->
      
      <!-- Counter line coordinates (synchronized with triangle) -->
      <Substitution name="CENTER_ALIGN_COUNTER_X" value="`${center_align_triangle1_left_x}`" />
      <Substitution name="CENTER_ALIGN_COUNTER_TOP_Y" value="60" />
      <Substitution name="CENTER_ALIGN_COUNTER_BOTTOM_Y" value="190" />
      <Substitution name="CENTER_ALIGN_COUNTER_MID_Y" value="125" />
      <Substitution name="COUNTER_MAX_PERIOD" value="`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`" />

      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
    </ParamImage>

    <!-- Dead Time PWM Waveform Visualization - Left Aligned -->
    <ParamImage id="pwmDeadtimeGeneralAlignsImage"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="`${(PwmAlignment eq CY_TCPWM_PWM_LEFT_ALIGN || PwmAlignment eq CY_TCPWM_PWM_RIGHT_ALIGN || PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN || PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN || PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_CC0_CC1_ALIGN || PwmAlignment eq CY_TCPWM_PWM_CENTER_ASYMMETRIC_CC0_CC1_ALIGN) &amp;&amp; PwmMode eq CY_TCPWM_PWM_MODE_DEADTIME}`"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_deadtime_general_align.svg">
      
      <!-- Core PWM parameters -->
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />
      <Substitution name="PWM_COMPARE0" value="`${Compare0}`" />
      <Substitution name="DEADTIME_CLOCKS" value="`${DeadClocks}`" />
      <Substitution name="DEADTIME_CLOCKS_COMPL" value="`${DeadClocks_compl}`" />
      
      <!-- Alignment mode names - one for each mode -->
      <Substitution name="ALIGN_MODE_LEFT" value="Left Aligned" />
      <Substitution name="ALIGN_MODE_RIGHT" value="Right Aligned" />
      <Substitution name="ALIGN_MODE_CENTER" value="Center Aligned" />
      <Substitution name="ALIGN_MODE_ASYMMETRIC" value="Asymmetric" />
      
      <!-- Dead Time Buffer parameters for advanced TCPWM -->
      <Substitution name="DEADTIME_CLOCKS_BUFF" value="`${DeadClocksBuff}`" />
      <Substitution name="DEADTIME_CLOCKS_COMPL_BUFF" value="`${DeadClocksBuff_compl}`" />
      <Substitution name="BUFFER_SWAP_ENABLED" value="`${swap_enable ? 1 : 0}`" />

      <!-- Period timing coordinates -->
      <Substitution name="PERIOD1_START_X" value="50" />
      <Substitution name="PERIOD1_END_X" value="400" />
      <Substitution name="PERIOD2_START_X" value="400" />
      <Substitution name="PERIOD2_END_X" value="750" />

      <!-- Compare match points for visual reference -->
      <Substitution name="COMPARE_MATCH_X1" value="175" />
      <Substitution name="COMPARE_MATCH_X2" value="525" />

      <!-- PWM signal timing (main signal) -->
      <!-- Period 1 uses DeadClocks -->
      <Substitution name="DT_PWM_P1_RISING_X" value="50" />
      <Substitution name="DT_PWM_P1_RISING_DELAYED_X" value="`${(50 + DeadClocks) >= 175 ? 175 : (50 + DeadClocks)}`" />
      <Substitution name="DT_PWM_P1_FALLING_X" value="175" />
      <Substitution name="DT_PWM_P1_FALLING_DELAYED_X" value="175" />
      
      <!-- Period 2 uses DeadClocksBuff -->
      <Substitution name="DT_PWM_P2_RISING_X" value="400" />
      <Substitution name="DT_PWM_P2_RISING_DELAYED_X" value="`${(400 + DeadClocksBuff) >= 525 ? 525 : (400 + DeadClocksBuff)}`" />
      <Substitution name="DT_PWM_P2_FALLING_X" value="525" />
      <Substitution name="DT_PWM_P2_FALLING_DELAYED_X" value="525" />
      
      <!-- PWM_N signal timing (complementary signal with proper inversion for LEFT ALIGN) -->
      <!-- In left align mode: only rising edges are delayed, falling edges happen immediately -->
      <!-- Period 1 uses DeadClocks_compl -->
      <Substitution name="DT_PWM_N_P1_FALLING_X" value="50" />
      <Substitution name="DT_PWM_N_P1_FALLING_DELAYED_X" value="50" />  <!-- No delay on falling edge -->
      <Substitution name="DT_PWM_N_P1_RISING_X" value="175" />
      <Substitution name="DT_PWM_N_P1_RISING_DELAYED_X" value="`${(175 + DeadClocks_compl) >= 400 ? 400 : (175 + DeadClocks_compl)}`" />  <!-- Delay on rising edge, with overlap check -->
      
      <!-- Period 2 uses DeadClocksBuff_compl -->
      <Substitution name="DT_PWM_N_P2_FALLING_X" value="400" />
      <Substitution name="DT_PWM_N_P2_FALLING_DELAYED_X" value="400" />  <!-- No delay on falling edge -->
      <Substitution name="DT_PWM_N_P2_RISING_X" value="525" />
      <Substitution name="DT_PWM_N_P2_RISING_DELAYED_X" value="`${(525 + DeadClocksBuff_compl) >= 750 ? 750 : (525 + DeadClocksBuff_compl)}`" />  <!-- Delay on rising edge, with overlap check -->

      <!-- Buffered PWM signal timing - no longer needed as P2 now uses buffered values -->
      <!-- Kept for reference but not used in visualization -->

      <!-- For PWM P1: when (50 + DeadClocks) >= 175, y1 = 130 (LINE_PWM_Y_H, collapse), else y1 = 160 (LINE_PWM_Y_L, normal) -->
      <Substitution name="DT_PWM_P1_RISING_Y1" value="`${(50 + DeadClocks) >= 175 ? 130 : 160}`" />
      <!-- For PWM P2: when (400 + DeadClocksBuff) >= 525, y1 = 130 (LINE_PWM_Y_H, collapse), else y1 = 160 (LINE_PWM_Y_L, normal) -->
      <Substitution name="DT_PWM_P2_RISING_Y1" value="`${(400 + DeadClocksBuff) >= 525 ? 130 : 160}`" />
      <!-- For PWM_N P1 rising: when (175 + DeadClocks_compl) >= 400, collapse (y1 = 180), else normal (y1 = 210) -->
      <Substitution name="DT_PWM_N_P1_RISING_Y1" value="`${(175 + DeadClocks_compl) >= 400 ? 180 : 210}`" />
      <!-- For PWM_N P2 rising: NO collapse, always normal (y1 = 210) -->
      <Substitution name="DT_PWM_N_P2_RISING_Y1" value="`${(525 + DeadClocksBuff_compl) >= 750 ? 180 : 210}`" />

      <!-- Y-coordinate for falling edge vertical line: collapse when rising delayed crosses it (overlap) -->
      <!-- For PWM P1 falling: when (50 + DeadClocks) >= 175, falling edge y1 = 160, else y1 = 130 -->
      <Substitution name="DT_PWM_P1_FALLING_Y1" value="`${(50 + DeadClocks) >= 175 ? 160 : 130}`" />
      <!-- For PWM P2 falling: when (400 + DeadClocksBuff) >= 525, falling edge y1 = 160, else y1 = 130 -->
      <Substitution name="DT_PWM_P2_FALLING_Y1" value="`${(400 + DeadClocksBuff) >= 525 ? 160 : 130}`" />
      <!-- For PWM_N P1 falling: keep fixed, don't collapse (y1 = 180 always) -->
      <Substitution name="DT_PWM_N_P1_FALLING_Y1" value="180" />
      <!-- For PWM_N P2 falling: when (525 + DeadClocksBuff_compl) >= 750, collapse (y1 = 180), else visible (y1 = 210) -->
      <Substitution name="DT_PWM_N_P2_FALLING_Y1" value="`${(525 + DeadClocksBuff_compl) >= 750 ? 210 : 180}`" />

      <!-- Signal line Y coordinates -->
      <Substitution name="LINE_PWM_Y_H" value="130" />
      <Substitution name="LINE_PWM_Y_L" value="160" />
      <Substitution name="LINE_PWM_N_Y_H" value="180" />
      <Substitution name="LINE_PWM_N_Y_L" value="210" />

      <!-- Colors -->
      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_ORANGE" value="#FF8C00" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
      <Substitution name="IFX_COLOR_GRAY" value="#808080" />
      <Substitution name="IFX_COLOR_BUFFER" value="#A0A0A0" /> <!-- Lighter gray for buffer lines -->
    </ParamImage>

    <!-- Dead Time PWM Waveform Visualization - Asymmetric CC0 & CC1 -->
    <ParamImage id="pwmDeadtimeAdvancedAsymmertricImage"
      name="PWM Visualization"
      group="Advanced"
      desc=""
      visible="false"
      position="OUTSET"
      default="`${cy_libs_path()}`/device-info/personalities_10.0/svg/pwm_deadtime_advanced_asymmetric_align.svg">
      
      <!-- Core PWM parameters -->
      <Substitution name="PWM_PERIOD" value="`${Period0}`" />
      <Substitution name="PWM_COMPARE0" value="`${Compare0}`" />
      <Substitution name="DEADTIME_CLOCKS" value="`${DeadClocks}`" />
      <Substitution name="DEADTIME_CLOCKS_COMPL" value="`${DeadClocks_compl}`" />
      
      <!-- Alignment mode names - one for each mode -->
      <Substitution name="ALIGN_MODE_LEFT" value="Left Aligned" />
      <Substitution name="ALIGN_MODE_RIGHT" value="Right Aligned" />
      <Substitution name="ALIGN_MODE_CENTER" value="Center Aligned" />
      <Substitution name="ALIGN_MODE_ASYMMETRIC" value="Asymmetric" />
      
      <!-- Dead Time Buffer parameters for advanced TCPWM -->
      <Substitution name="DEADTIME_CLOCKS_BUFF" value="`${DeadClocksBuff}`" />
      <Substitution name="DEADTIME_CLOCKS_COMPL_BUFF" value="`${DeadClocksBuff_compl}`" />
      <Substitution name="BUFFER_SWAP_ENABLED" value="`${swap_enable ? 1 : 0}`" />

      <!-- Period timing coordinates -->
      <Substitution name="PERIOD1_START_X" value="50" />
      <Substitution name="PERIOD1_END_X" value="400" />
      <Substitution name="PERIOD2_START_X" value="400" />
      <Substitution name="PERIOD2_END_X" value="750" />

      <!-- Compare match points for visual reference -->
      <Substitution name="COMPARE_MATCH_X1" value="175" />
      <Substitution name="COMPARE_MATCH_X2" value="525" />

      <!-- PWM signal timing (main signal) -->
      <Substitution name="DT_PWM_P1_RISING_X" value="50" />
      <Substitution name="DT_PWM_P1_RISING_DELAYED_X" value="`${(50 + DeadClocks) >= 175 ? 175 : (50 + DeadClocks)}`" />
      <Substitution name="DT_PWM_P1_FALLING_X" value="175" />
      <Substitution name="DT_PWM_P1_FALLING_DELAYED_X" value="175" />
      
      <Substitution name="DT_PWM_P2_RISING_X" value="400" />
      <Substitution name="DT_PWM_P2_RISING_DELAYED_X" value="`${(400 + DeadClocks) >= 525 ? 525 : (400 + DeadClocks)}`" />
      <Substitution name="DT_PWM_P2_FALLING_X" value="525" />
      <Substitution name="DT_PWM_P2_FALLING_DELAYED_X" value="525" />
      
      <!-- PWM_N signal timing (complementary signal with proper inversion for LEFT ALIGN) -->
      <!-- In left align mode: only rising edges are delayed, falling edges happen immediately -->
      <Substitution name="DT_PWM_N_P1_FALLING_X" value="50" />
      <Substitution name="DT_PWM_N_P1_FALLING_DELAYED_X" value="50" />  <!-- No delay on falling edge -->
      <Substitution name="DT_PWM_N_P1_RISING_X" value="175" />
      <Substitution name="DT_PWM_N_P1_RISING_DELAYED_X" value="`${(175 + DeadClocks_compl) >= 400 ? 400 : (175 + DeadClocks_compl)}`" />  <!-- Delay on rising edge, with overlap check -->
      
      <Substitution name="DT_PWM_N_P2_FALLING_X" value="400" />
      <Substitution name="DT_PWM_N_P2_FALLING_DELAYED_X" value="400" />  <!-- No delay on falling edge -->
      <Substitution name="DT_PWM_N_P2_RISING_X" value="525" />
      <Substitution name="DT_PWM_N_P2_RISING_DELAYED_X" value="`${(525 + DeadClocks_compl) >= 750 ? 750 : (525 + DeadClocks_compl)}`" />  <!-- Delay on rising edge, with overlap check -->

      <!-- Y-coordinate for rising edge vertical line: when overlapping, start from high level (collapse to horizontal) -->
      <!-- CC0 uses same timing as PWM -->
      <Substitution name="DT_CC0_P1_RISING_Y1" value="`${(50 + DeadClocks) >= 175 ? 130 : 160}`" />
      <Substitution name="DT_CC0_P2_RISING_Y1" value="`${(400 + DeadClocks) >= 525 ? 130 : 160}`" />
      <!-- CC0_N uses same timing as PWM_N -->
      <Substitution name="DT_CC0_N_P1_RISING_Y1" value="`${(175 + DeadClocks_compl) >= 400 ? 180 : 210}`" />
      <Substitution name="DT_CC0_N_P2_RISING_Y1" value="`${(525 + DeadClocks_compl) >= 750 ? 180 : 210}`" />

      <!-- Y-coordinate for falling edge vertical line: collapse when rising delayed crosses it (overlap) -->
      <!-- CC0 P1 falling: when (50 + DeadClocks) >= 175, falling edge y1 = 160, else y1 = 130 -->
      <Substitution name="DT_CC0_P1_FALLING_Y1" value="`${(50 + DeadClocks) >= 175 ? 160 : 130}`" />
      <Substitution name="DT_CC0_P2_FALLING_Y1" value="`${(400 + DeadClocks) >= 525 ? 160 : 130}`" />
      <!-- CC0_N P1 falling: keep fixed, don't collapse (y1 = 180 always) -->
      <Substitution name="DT_CC0_N_P1_FALLING_Y1" value="180" />
      <!-- CC0_N P2 falling: when overlapping, collapse, else normal -->
      <Substitution name="DT_CC0_N_P2_FALLING_Y1" value="`${(525 + DeadClocks_compl) >= 750 ? 210 : 180}`" />

      <!-- CC1 signal timing (offset to the right) - Advanced Asymmetric -->
      <Substitution name="DT_CC1_P1_RISING_X" value="250" />
      <Substitution name="DT_CC1_P1_RISING_DELAYED_X" value="`${(250 + DeadClocks) >= 375 ? 375 : (250 + DeadClocks)}`" />  <!-- Offset right, with overlap check -->
      <Substitution name="DT_CC1_P1_FALLING_X" value="375" />
      <Substitution name="DT_CC1_P1_FALLING_DELAYED_X" value="375" />
      
      <Substitution name="DT_CC1_P2_RISING_X" value="600" />
      <Substitution name="DT_CC1_P2_RISING_DELAYED_X" value="`${(600 + DeadClocks) >= 725 ? 725 : (600 + DeadClocks)}`" />  <!-- Offset right, with overlap check -->
      <Substitution name="DT_CC1_P2_FALLING_X" value="725" />
      <Substitution name="DT_CC1_P2_FALLING_DELAYED_X" value="725" />

      <!-- CC1_N signal timing (complementary - offset to the right) - Advanced Asymmetric -->
      <Substitution name="DT_CC1_N_P1_FALLING_X" value="250" />
      <Substitution name="DT_CC1_N_P1_FALLING_DELAYED_X" value="250" />  <!-- No delay on falling edge, but offset -->
      <Substitution name="DT_CC1_N_P1_RISING_X" value="375" />
      <Substitution name="DT_CC1_N_P1_RISING_DELAYED_X" value="`${(375 + DeadClocks_compl) >= 750 ? 750 : (375 + DeadClocks_compl)}`" />  <!-- Delay on rising edge, offset right -->
      
      <Substitution name="DT_CC1_N_P2_FALLING_X" value="600" />
      <Substitution name="DT_CC1_N_P2_FALLING_DELAYED_X" value="600" />  <!-- No delay on falling edge, but offset -->
      <Substitution name="DT_CC1_N_P2_RISING_X" value="725" />
      <Substitution name="DT_CC1_N_P2_RISING_DELAYED_X" value="`${(725 + DeadClocks_compl) >= 750 ? 750 : (725 + DeadClocks_compl)}`" />  <!-- Delay on rising edge, offset right -->

      <!-- Y-coordinate for rising edge vertical line: when overlapping, start from high level (collapse to horizontal) -->
      <!-- For CC1 P1: when (250 + DeadClocks) >= 375, y1 = 260 (LINE_CC1_Y_H, collapse), else y1 = 290 (LINE_CC1_Y_L, normal) -->
      <Substitution name="DT_CC1_P1_RISING_Y1" value="`${(250 + DeadClocks) >= 375 ? 260 : 290}`" />
      <!-- For CC1 P2: when (600 + DeadClocks) >= 725, y1 = 260 (LINE_CC1_Y_H, collapse), else y1 = 290 (LINE_CC1_Y_L, normal) -->
      <Substitution name="DT_CC1_P2_RISING_Y1" value="`${(600 + DeadClocks) >= 725 ? 260 : 290}`" />
      <!-- For CC1_N P1: when (375 + DeadClocks_compl) >= 600, y1 = 310 (LINE_CC1_N_Y_H, collapse), else y1 = 340 (LINE_CC1_N_Y_L, normal) - SAME as CC0_N approach -->
      <Substitution name="DT_CC1_N_P1_RISING_Y1" value="`${(375 + DeadClocks_compl) >= 600 ? 310 : 340}`" />
      <!-- For CC1_N P2: when (600 + DeadClocks_compl) >= 750, y1 = 310 (LINE_CC1_N_Y_H, collapse), else y1 = 340 (LINE_CC1_N_Y_L, normal) -->
      <Substitution name="DT_CC1_N_P2_RISING_Y1" value="`${(725 + DeadClocks_compl) >= 950 ? 310 : 340}`" />

      <!-- Y-coordinate for falling edge vertical line: collapse when rising delayed crosses it (overlap) -->
      <!-- For CC1 P1 falling: when (250 + DeadClocks) >= 375, falling edge y1 = 290, else y1 = 260 -->
      <Substitution name="DT_CC1_P1_FALLING_Y1" value="`${(250 + DeadClocks) >= 375 ? 290 : 260}`" />
      <Substitution name="DT_CC1_P2_FALLING_Y1" value="`${(600 + DeadClocks) >= 725 ? 290 : 260}`" />
      <!-- For CC1_N P1 falling: keep fixed, don't collapse (y1 = 310 always) -->
      <Substitution name="DT_CC1_N_P1_FALLING_Y1" value="310" />
      <!-- For CC1_N P2 falling: when overlapping with P2 rising edge (750), collapse to high, else stay at low - SAME as CC0_N P2 approach -->
      <Substitution name="DT_CC1_N_P2_FALLING_Y1" value="`${(725 + DeadClocks_compl) >= 950 ? 340 : 310}`" />

      <!-- Signal line Y coordinates -->
      <Substitution name="LINE_PWM_Y_H" value="130" />
      <Substitution name="LINE_PWM_Y_L" value="160" />
      <Substitution name="LINE_PWM_N_Y_H" value="180" />
      <Substitution name="LINE_PWM_N_Y_L" value="210" />
      <Substitution name="LINE_CC1_Y_H" value="260" />
      <Substitution name="LINE_CC1_Y_L" value="290" />
      <Substitution name="LINE_CC1_N_Y_H" value="310" />
      <Substitution name="LINE_CC1_N_Y_L" value="340" />

      <!-- Buffer dead time positioning (dashed lines) -->
      <Substitution name="DT_PWM_P1_RISING_DELAYED_BUFF_X" value="`${50 + DeadClocksBuff}`" />
      <Substitution name="DT_PWM_P2_RISING_DELAYED_BUFF_X" value="`${400 + DeadClocksBuff}`" />
      <Substitution name="DT_PWM_N_P1_FALLING_DELAYED_BUFF_X" value="`${175 + DeadClocksBuff_compl}`" />
      <Substitution name="DT_PWM_N_P2_FALLING_DELAYED_BUFF_X" value="`${525 + DeadClocksBuff_compl}`" />

      <!-- Colors -->
      <Substitution name="IFX_COLOR_BERRY400" value="#BE3283" />
      <Substitution name="IFX_COLOR_LAWN500" value="#9BBA43" />
      <Substitution name="IFX_COLOR_ORANGE" value="#FF8C00" />
      <Substitution name="IFX_COLOR_BLACK" value="#1D1D1D" />
      <Substitution name="IFX_COLOR_GRAY" value="#808080" />
      <Substitution name="IFX_COLOR_BUFFER" value="#A0A0A0" /> <!-- Lighter gray for buffer lines -->
    </ParamImage>
  </Parameters>

  <DRCs>
    <DRC type="ERROR" paramId="clock_en[0]" text="Maximum input clock signal frequency supported is 100 Mhz. Please fix input clock setting." condition="`${(&quot;mxs40tcpwm&quot; ne getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;clock[0]&quot;)) &amp;&amp; (tcpwmClkHz &gt; 100000000)}`" />
    <DRC type="ERROR" paramId="clock_counter_en[0]" text="Maximum input clock signal frequency supported is 100 Mhz. Please fix input clock setting." condition="`${(&quot;mxs40tcpwm&quot; ne getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;clock_counter_en[0]&quot;)) &amp;&amp; (tcpwmClkHz &gt; 100000000)}`" />

    <DRC type="ERROR" paramId="clock_en[0]" text="Maximum input clock signal frequency supported is 240 Mhz. Please fix input clock setting." condition="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;clock[0]&quot;)) &amp;&amp; (tcpwmClkHz &gt; 240000000)}`" />
    <DRC type="ERROR" paramId="clock_counter_en[0]" text="Maximum input clock signal frequency supported is 240 Mhz. Please fix input clock setting." condition="`${(&quot;mxs40tcpwm&quot; eq getIpBlockName()) &amp;&amp; (hasVisibleOption(&quot;clock_counter_en[0]&quot;)) &amp;&amp; (tcpwmClkHz &gt; 240000000)}`" />
    <!--Compare0 DRCs-->
    <DRC type="INFO" text="Compare 0 > Period 0: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pPwmNePrsAndC0GtP0}`" />
    <DRC type="INFO" text="Compare 0 > Period 1: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pPwmNePrs &amp;&amp; EnablePeriodSwap &amp;&amp; (!EnableCompare0Swap) &amp;&amp; pNEnCOrAssymAndC0GtP1}`" />

    <!--Compare0Buff DRCs-->
    <DRC type="INFO" text="Compare 0 Buff > Period 1: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pPwmNePrs &amp;&amp; pEnCAndNEnP &amp;&amp; pC1GtP0}`" />
    <DRC type="INFO" text="Compare 0 Buff > Period 1: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pNePrsAndEnCAndEnP &amp;&amp; pC1GtP0}`" />

    <!--Compare1 DRCs-->
    <DRC type="INFO" text="Compare 1 > Period 0: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pCntCC1 &amp;&amp; pPwmNePrs &amp;&amp; pC2GtP0}`" />
    <DRC type="INFO" text="Compare 1 > Period 1: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pCntCC1 &amp;&amp; pPwmNePrs &amp;&amp; EnablePeriodSwap &amp;&amp; (!EnableCompare1Swap) &amp;&amp; pC2GtP1}`" />

    <!--Compare1Buff DRCs-->
    <DRC type="INFO" text="Compare 1 Buff > Period 0: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pCntCC1 &amp;&amp; pPwmNePrs &amp;&amp; EnableCompare1Swap &amp;&amp; (!EnablePeriodSwap) &amp;&amp; pC3GtP0}`" />
    <DRC type="INFO" text="Compare 1 Buff > Period 1: Left align = 100% duty, Right align = 0% duty. Center/Asymmetric behavior defined by output polarity." condition="`${pCntCC1 &amp;&amp; pPwmNePrs &amp;&amp; EnableCompare1Swap &amp;&amp; EnablePeriodSwap &amp;&amp; pC3GtP1}`" />

    <!--CountInput DRCs-->
    <DRC type="ERROR" text="Count Event has to be enabled to use Count Signal." condition="`${hasConnection(&quot;count&quot;, 0) &amp;&amp; (CountInput eq CY_TCPWM_INPUT_DISABLED)}`" paramId="CountInput">
        <FixIt action="SET_PARAM" target="CountInput" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="CountInput" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="CountInput" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
        <FixIt action="SET_PARAM" target="CountInput" value="CY_TCPWM_INPUT_LEVEL" valid="true" />
    </DRC>

    <!--ReloadInput DRCs-->
    <DRC type="ERROR" text="Reload Event has to be enabled to use Reload Signal." condition="`${hasConnection(&quot;reload&quot;, 0) &amp;&amp; (ReloadInput eq CY_TCPWM_INPUT_DISABLED)}`" paramId="ReloadInput">
        <FixIt action="SET_PARAM" target="ReloadInput" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="ReloadInput" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="ReloadInput" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
        <FixIt action="SET_PARAM" target="ReloadInput" value="CY_TCPWM_INPUT_LEVEL" valid="true" />
    </DRC>

    <!--StartInput DRCs-->
    <DRC type="ERROR" text="Start Event has to be enabled to use Start Signal." condition="`${hasConnection(&quot;start&quot;, 0) &amp;&amp; (StartInput eq CY_TCPWM_INPUT_DISABLED)}`" paramId="StartInput">
        <FixIt action="SET_PARAM" target="StartInput" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="StartInput" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="StartInput" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
    </DRC>

    <!--SwapInput DRCs-->
    <DRC type="ERROR" text="Swap Event has to be enabled to use Swap Signal." condition="`${hasConnection(&quot;capture0&quot;, 0) &amp;&amp; (SwapInput eq CY_TCPWM_INPUT_DISABLED)}`" paramId="SwapInput">
        <FixIt action="SET_PARAM" target="SwapInput" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="SwapInput" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="SwapInput" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
        <FixIt action="SET_PARAM" target="SwapInput" value="CY_TCPWM_INPUT_LEVEL" valid="true" />
    </DRC>

    <!--Kill0Input DRCs-->
    <DRC type="ERROR" text="Level is not supported for Stop on Kill mode." condition="`${((KillMode eq CY_TCPWM_PWM_STOP_ON_KILL) &amp;&amp; (Kill0Input eq CY_TCPWM_INPUT_LEVEL))}`" paramId="Kill0Input" />
    <DRC type="ERROR" text="Asynchronous Kill mode just supports Level mode." condition="`${((Kill0Input ne CY_TCPWM_INPUT_DISABLED) &amp;&amp; (KillMode eq CY_TCPWM_PWM_ASYNC_KILL) &amp;&amp; (Kill0Input ne CY_TCPWM_INPUT_LEVEL))}`" paramId="Kill0Input" />
    <DRC type="ERROR" text="Synchronous Kill mode just supports Rising Edge mode." condition="`${((Kill0Input ne CY_TCPWM_INPUT_DISABLED) &amp;&amp; pKillEqSynch &amp;&amp; (Kill0Input ne CY_TCPWM_INPUT_RISINGEDGE))}`"
    paramId="Kill0Input" />
    <DRC type="ERROR" text="Kill 0 Event has to be enabled to use Kill 0 Signal." condition="`${hasConnection(&quot;stop&quot;, 0) &amp;&amp; (Kill0Input eq CY_TCPWM_INPUT_DISABLED)}`" paramId="Kill0Input">
        <FixIt action="SET_PARAM" target="Kill0Input" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill0Input" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill0Input" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill0Input" value="CY_TCPWM_INPUT_LEVEL" valid="true" />
    </DRC>

    <!--Kill1Input DRCs-->
    <DRC type="ERROR" text="Level is not supported for Stop on Kill mode." condition="`${(pCntCC1 &amp;&amp;(KillMode eq CY_TCPWM_PWM_STOP_ON_KILL) &amp;&amp; (Kill1Input eq CY_TCPWM_INPUT_LEVEL))}`" paramId="Kill1Input" />
    <DRC type="ERROR" text="Asynchronous Kill mode just supports Level mode." condition="`${((Kill1Input ne CY_TCPWM_INPUT_DISABLED) &amp;&amp; pCntCC1 &amp;&amp;(KillMode eq CY_TCPWM_PWM_ASYNC_KILL) &amp;&amp; (Kill1Input ne CY_TCPWM_INPUT_LEVEL))}`" paramId="Kill1Input" />
    <DRC type="ERROR" text="Synchronous Kill mode just supports Rising Edge mode." condition="`${((Kill1Input ne CY_TCPWM_INPUT_DISABLED) &amp;&amp; pCntCC1 &amp;&amp; pKillEqSynch &amp;&amp; (Kill1Input ne CY_TCPWM_INPUT_RISINGEDGE))}`"
    paramId="Kill1Input" />
    <DRC type="ERROR" text="Kill 1 Event has to be enabled to use Kill 1 Signal." condition="`${hasConnection(&quot;capture1&quot;, 0) &amp;&amp; (Kill1Input eq CY_TCPWM_INPUT_DISABLED)}`" paramId="Kill1Input">
        <FixIt action="SET_PARAM" target="Kill1Input" value="CY_TCPWM_INPUT_RISINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill1Input" value="CY_TCPWM_INPUT_FALLINGEDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill1Input" value="CY_TCPWM_INPUT_EITHEREDGE" valid="true" />
        <FixIt action="SET_PARAM" target="Kill1Input" value="CY_TCPWM_INPUT_LEVEL" valid="true" />
    </DRC>

    <!--KillMode DRCs-->
    <DRC type="ERROR" text="Synchronous Kill mode is not supported for PWM Pseudo Random mode." condition="`${pKillEqSynch &amp;&amp; (PwmMode eq CY_TCPWM_PWM_MODE_PSEUDORANDOM)}`" paramId="PwmMode" />

    <!--Trigger Output DRCs-->
    <DRC type="ERROR" text="Trigger 0 Event has to be enabled to use Trigger 0 Signal." condition="`${hasConnection(&quot;tr_out0&quot;, 0) &amp;&amp; (trigger0Event eq CY_TCPWM_CNT_TRIGGER_ON_DISABLED)}`" paramId="trigger0Event">
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_OVERFLOW" valid="true" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_UNDEFLOW" valid="true" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_TC" valid="true" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_MATCH" valid="true" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC1_MATCH" valid="`${pCntCC1}`" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_OR_CC1_MATCH" valid="`${pCntCC1}`" />
        <FixIt action="SET_PARAM" target="trigger0Event" value="CY_TCPWM_CNT_TRIGGER_ON_LINE_OUT" valid="true" />
    </DRC>
    <DRC type="ERROR" text="Trigger 1 Event has to be enabled to use Trigger 1 Signal." condition="`${hasConnection(&quot;tr_out1&quot;, 0) &amp;&amp; (trigger1Event eq CY_TCPWM_CNT_TRIGGER_ON_DISABLED)}`" paramId="trigger1Event">
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_OVERFLOW" valid="true" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_UNDEFLOW" valid="true" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_TC" valid="true" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_MATCH" valid="true" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC1_MATCH" valid="`${pCntCC1}`" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_CC0_OR_CC1_MATCH" valid="`${pCntCC1}`" />
        <FixIt action="SET_PARAM" target="trigger1Event" value="CY_TCPWM_CNT_TRIGGER_ON_LINE_OUT" valid="true" />
    </DRC>
  </DRCs>

  <ConfigFirmware>
    <ConfigInclude value="cy_tcpwm_pwm.h" include="true" />
    <ConfigInclude value="cy_sysclk.h" include="`${pclkOk}`" />
    <ConfigInclude value="cycfg_routing.h" include="true" />
    <ConfigInclude value="cyhal_hwmgr.h" include="true" guard="defined (CY_USING_HAL)" />
    <ConfigInclude value="cyhal.h" include="true" guard="defined (CY_USING_HAL)" />
    <ConfigInclude value="mtb_hal.h" include="true" guard="defined (COMPONENT_MTB_HAL)" />
    <ConfigInclude value="cycfg_clocks.h" include="true" guard="defined (COMPONENT_MTB_HAL)" />
    <ConfigInclude value="mtb_hal_hw_types.h" include="true" guard="defined (COMPONENT_MTB_HAL)" />
    <ConfigInclude value="cyhal_hw_types.h" include="true" guard="defined (CY_USING_HAL_LITE)" />

    <ConfigDefine name="`${INST_NAME}`_HW" value="TCPWM`${tcpwmInst}`" public="true" include="true" />
    <ConfigDefine name="`${INST_NAME}`_NUM" value="`${cntInst}`UL" public="true" include="true" />
    <ConfigDefine name="`${INST_NAME}`_IRQ" value="tcpwm_`${tcpwmInst}`_interrupts_`${cntInst}`_IRQn" public="true" include="`${InterruptTC || InterruptCC0 || InterruptCC1}`" />
    <ConfigDefine name="`${INST_NAME}`_INPUT_DISABLED" value="0x7U" public="false" include="true" />
    <ConfigStruct name="`${INST_NAME . &quot;_config&quot;}`" type="cy_stc_tcpwm_pwm_config_t" const="`${inFlash}`" public="true" include="true" >
      <Member name="pwmMode" value="`${PwmMode}`" />
      <Member name="clockPrescaler" value="`${ClockPrescaler}`" />
      <Member name="pwmAlignment" value="`${PwmAlignment}`" />
      <Member name="deadTimeClocks" value="`${DeadClocks}`" />
      <Member name="runMode" value="`${RunMode}`" />
      <Member name="period0" value="`${Period0}`" />
      <Member name="period1" value="`${Period1}`" />
      <Member name="enablePeriodSwap" value="`${EnablePeriodSwap}`" />
      <Member name="compare0" value="`${Compare0}`" />
      <Member name="compare1" value="`${Compare1}`" />
      <Member name="enableCompareSwap" value="`${EnableCompare0Swap}`" />
      <Member name="interruptSources" value="`${InterruptSource}`" />
      <Member name="invertPWMOut" value="`${InvertPwm ? &quot;CY_TCPWM_PWM_INVERT_ENABLE&quot; : &quot;CY_TCPWM_PWM_INVERT_DISABLE&quot;}`" />
      <Member name="invertPWMOutN" value="`${InvertPwm_n ? &quot;CY_TCPWM_PWM_INVERT_ENABLE&quot; : &quot;CY_TCPWM_PWM_INVERT_DISABLE&quot;}`" />
      <Member name="killMode" value="`${KillMode}`" />
      <Member name="swapInputMode" value="`${SwapInput eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : SwapInput}`" />
      <Member name="swapInput" value="`${SwapInput eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_0&quot; :  (definePrefix . &quot;_CAPTURE0_VALUE&quot;)}`" />
      <Member name="reloadInputMode" value="`${ReloadInput eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : ReloadInput}`" />
      <Member name="reloadInput" value="`${ReloadInput eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_0&quot; : (definePrefix . &quot;_RELOAD_VALUE&quot;)}`" />
      <Member name="startInputMode" value="`${StartInput eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : StartInput}`" />
      <Member name="startInput" value="`${StartInput eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_0&quot; : (definePrefix . &quot;_START_VALUE&quot;)}`" />
      <Member name="killInputMode" value="`${Kill0Input eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : Kill0Input}`" />
      <Member name="killInput" value="`${Kill0Input eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_0&quot; : (definePrefix . &quot;_STOP_VALUE&quot;)}`" />
      <Member name="countInputMode" value="`${CountInput eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : CountInput}`" />
      <Member name="countInput" value="`${CountInput eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_1&quot; : (definePrefix . &quot;_COUNT_VALUE&quot;)}`" />
      <Member name="swapOverflowUnderflow" value="`${((PwmAlignment eq CY_TCPWM_PWM_CENTER_ALIGN) || (PwmAlignment eq CY_TCPWM_PWM_ASYMMETRIC_ALIGN)) ? SwapUnderflowOverflow : false}`" />
      <Member name="immediateKill" value="`${ImmediateKill}`" />
      <Member name="tapsEnabled" value="`${TapsEnabled}`" />
      <Member name="compare2" value="`${pCntCC1 ? Compare2 : &quot;CY_TCPWM_GRP_CNT_CC0_DEFAULT&quot;}`" />
      <Member name="compare3" value="`${pCntCC1 ? Compare3 : &quot;CY_TCPWM_GRP_CNT_CC0_BUFF_DEFAULT&quot;}`" />
      <Member name="enableCompare1Swap" value="`${EnableCompare1Swap}`" />
      <Member name="compare0MatchUp" value="`${Compare0MatchUp}`" />
      <Member name="compare0MatchDown" value="`${Compare0MatchDown}`" />
      <Member name="compare1MatchUp" value="`${Compare1MatchUp}`" />
      <Member name="compare1MatchDown" value="`${Compare1MatchDown}`" />
      <Member name="kill1InputMode" value="`${Kill1Input eq CY_TCPWM_INPUT_DISABLED ? defineInputDisabled : Kill1Input}`" />
      <Member name="kill1Input" value="`${Kill1Input eq CY_TCPWM_INPUT_DISABLED ? &quot;CY_TCPWM_INPUT_0&quot; : (definePrefix . &quot;_CAPTURE1_VALUE&quot;)}`" />
      <Member name="pwmOnDisable" value="`${PwmDisabledOutput}`" />
      <Member name="trigger0Event" value="`${trigger0Event}`" />
      <Member name="trigger1Event" value="`${trigger1Event}`" />
      <Member name="reloadLineSelect" value="`${reload_line_sel}`" />
      <Member name="line_out_sel" value="`${line_out_source}`" />
      <Member name="linecompl_out_sel" value="`${linecompl_out_source}`" />
      <Member name="line_out_sel_buff" value="`${buff_line_out_source}`" />
      <Member name="linecompl_out_sel_buff" value="`${buff_linecompl_out_source}`" />
      <Member name="deadTimeClocks_linecompl_out" value="`${DeadClocks_compl}`" />
      <Member name="hrpwm_enable" value="`${enable_hrpwm}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="hrpwm_input_freq" value="`${hrpwm_input_clock}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="kill_line_polarity" value="`${kill_line_polarity}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="deadTimeClocksBuff" value="`${DeadClocksBuff}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="deadTimeClocksBuff_linecompl_out" value="`${DeadClocksBuff_compl}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="buffer_swap_enable" value="`${swap_enable}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="glitch_filter_enable" value="`${gf_enable}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="gf_depth" value="`${gf_depth}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="dithering_mode" value="`${dithering_mode}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="period_dithering_value" value="`${Period_Dithering}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="duty_dithering_value" value="`${Duty_Dithering}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="limiter" value="`${limiter}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="pwm_tc_sync_kill_dt" value="`${pwmtcsynckilldt}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="pwm_sync_kill_dt" value="`${pwmsynckilldt}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="debug_freeze_enable" value="`${debugModeFreezeEn}`" guard="defined (CY_IP_MXS40TCPWM)" />
      <Member name="debug_suspend_enable" value="`${debugModeSuspendEn}`" guard="defined (CY_IP_MXS40TCPWM)" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_clock_ref" type="mtb_hal_peri_div_t" const="`${inFlash}`" public="true" include="true" guard="defined (COMPONENT_MTB_HAL)">
      <Member name="clk_dst" value="(en_clk_dst_t)`${pclkDst}`" />
      <Member name="div_type" value="`${getExposedMember(sourceClock, &quot;type&quot;)}`" />
      <Member name="div_num" value="`${getExposedMember(sourceClock, &quot;number&quot;)}`" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_hal_clock" type="mtb_hal_clock_t" const="`${inFlash}`" public="true" include="true" guard="defined (COMPONENT_MTB_HAL)">
      <Member name="clock_ref" value="&amp;`${INST_NAME}`_clock_ref" />
      <Member name="interface" value="&amp;mtb_hal_clock_peri_interface" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_hal_config" type="mtb_hal_pwm_configurator_t" const="`${inFlash}`" public="true" include="true" guard="defined (COMPONENT_MTB_HAL) &amp;&amp; (MTB_HAL_DRIVER_AVAILABLE_PWM)">
      <Member name="base" value="`${INST_NAME}`_HW" />
      <Member name="clock" value="&amp;`${INST_NAME}`_hal_clock" />
      <Member name="group" value="`${pCntGroup}`UL" />
      <Member name="cntnum" value="`${cntInst}`UL" />
      <Member name="max_count" value="`${Period0}`" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_obj" type="cyhal_resource_inst_t" const="true" public="true" include="true" guard="defined (CY_USING_HAL) || defined(CY_USING_HAL_LITE)">
      <Member name="type" value="CYHAL_RSC_TCPWM" />
      <Member name="block_num" value="`${(getInstNumber(&quot;tcpwm&quot;) * pMaxGroupCount) + pCntGroup}`U" />
      <Member name="channel_num" value="`${getInstNumber(&quot;cnt&quot;)}`U" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_clock" type="cyhal_clock_t" const="`${inFlash}`" public="true" include="true" guard="defined(CY_USING_HAL_LITE) || defined (CY_USING_HAL)">
      <Member name="block" value="`${getExposedMember(pclk, &quot;hal_block&quot;)}`" />
      <Member name="channel" value="`${getExposedMember(pclk, &quot;number&quot;)}`" />
      <Member name="reserved" value="false" guard="defined (CY_USING_HAL)" />
      <Member name="funcs" value="NULL" guard="defined (CY_USING_HAL)" />
    </ConfigStruct>

    <ConfigStruct name="`${INST_NAME}`_hal_config" type="cyhal_pwm_configurator_t" const="`${inFlash}`" public="true" include="true" guard="defined (CY_USING_HAL) || defined(CY_USING_HAL_LITE)">
      <Member name="resource" value="&amp;`${INST_NAME}`_obj" />
      <Member name="config" value="&amp;`${INST_NAME}`_config" />
      <Member name="clock" value="&amp;`${INST_NAME}`_clock" />
    </ConfigStruct>

    <ConfigInstruction purpose="INITIALIZE" value="Cy_SysClk_PeriGroupSlaveInit(CY_MMIO_TCPWM`${tcpwmInst}`_PERI_NR, CY_MMIO_TCPWM`${tcpwmInst}`_GROUP_NR, CY_MMIO_TCPWM`${tcpwmInst}`_SLAVE_NR, CY_MMIO_TCPWM`${tcpwmInst}`_CLK_HF_NR);" include="true" guard="defined (CY_DEVICE_CONFIGURATOR_IP_ENABLE_FEATURE)" />
    <ConfigInstruction purpose="INITIALIZE" value="Cy_SysClk_PeriphAssignDivider(`${pclkDst}`, `${getExposedMember(pclk, &quot;clockSel&quot;)}`);" include="`${pclkOk}`"  />

    <!-- PSOC C3 HRPWM workaround: Enable HRPWM if it not wounded -->
    <ConfigInstruction purpose="INITIALIZE"
                       value="/* Workaround for TCPWM on PSOC C3 device: Enable HRPWM block if it exists. */&#xA;    (*((volatile uint32_t *)(GET_ALIAS_ADDRESS(CY_SYSTEM_TCPWM_DISABLE_ADDR))) = 0UL);"
                       include="`${pclkOk &amp;&amp; pCnthrpwm}`"
                       guard="defined (CY_IP_MXS40TCPWM) &amp;&amp; defined (CY_DEVICE_PSC3)" />

    <ConfigInstruction purpose="RESERVE" value="cyhal_hwmgr_reserve(&amp;`${INST_NAME}`_obj);" include="true" guard="defined (CY_USING_HAL)" />
  </ConfigFirmware>
</PersonalityTemplate>

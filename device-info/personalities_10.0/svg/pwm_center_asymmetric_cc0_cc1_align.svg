<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
**********************************************************************************************************************
*
* Copyright (c) Infineon Technologies AG
* All rights reserved.
*
**********************************************************************************************************************
-->

<!DOCTYPE svgdiagram
[
<!ENTITY PWM_PERIOD "65535" >
<!ENTITY PWM_COMPARE0 "16384" >
<!ENTITY PWM_COMPARE_Y "125" >
<!ENTITY PWM_COMPARE_TEXT_Y "115" >
<!ENTITY LINE_Y_H "350">
<!ENTITY LINE_Y_L "380">
<!ENTITY LINE_N_Y_H "400">
<!ENTITY LINE_N_Y_L "430">
<!ENTITY LINE_START_X "50">
<!ENTITY LINE_END_X "850">
<!ENTITY MARKS_Y_BOT "235">

<!-- Triangular counter coordinates with dynamic scaling -->
<!ENTITY TRIANGLE1_LEFT_X  "80">
<!ENTITY TRIANGLE1_PEAK_X  "265">
<!ENTITY TRIANGLE1_RIGHT_X "450">

<!ENTITY TRIANGLE2_LEFT_X  "450">
<!ENTITY TRIANGLE2_PEAK_X  "635">
<!ENTITY TRIANGLE2_RIGHT_X "820">

<!-- Dynamic triangle heights and peak positions -->
<!ENTITY TRIANGLE1_PEAK_Y "60">
<!ENTITY TRIANGLE2_PEAK_Y "60">

<!-- Dynamic peak X positions to maintain triangle proportions -->
<!ENTITY RAMP_PEAK1_X  "265">
<!ENTITY RAMP_CENTER_X "450">
<!ENTITY RAMP_PEAK2_X  "635">
<!ENTITY RAMP_RIGHT_X  "820">

<!-- Counter line coordinates -->
<!ENTITY CENTER_ALIGN_COUNTER_X "&TRIANGLE1_LEFT_X;">
<!ENTITY CENTER_ALIGN_COUNTER_BOTTOM_Y "190">
<!ENTITY CENTER_ALIGN_COUNTER_TOP_Y "&TRIANGLE1_PEAK_Y;">
<!ENTITY CENTER_ALIGN_COUNTER_LABEL_X "40">  <!-- Label position (left of line) -->
<!ENTITY CENTER_ALIGN_COUNTER_VALUE_X "20">  <!-- Value position (far left) -->
<!ENTITY COUNTER_BOTTOM_Y "190">
<!ENTITY COUNTER_TOP_Y "60">
<!ENTITY COUNTER_MAX_PERIOD "`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`">  <!-- Max period value -->
<!ENTITY COUNTER_LABEL_DY "-35">  <!-- dy offset for counter label (top) -->
<!ENTITY COUNTER_VALUE_DY "-20">  <!-- dy offset for counter value (middle) -->
<!ENTITY COUNTER_ZERO_DY "15">  <!-- dy offset for 0 label (bottom) -->

<!-- Signal line Y coordinates -->
<!ENTITY OV_Y "260">
<!ENTITY UN_Y "240">
<!ENTITY TC_Y "280">
<!ENTITY CM_Y "300">
<!ENTITY CM_CC1_Y "320">

<!-- Counter line (vertical sawtooth timer indicator) -->
<!ENTITY CENTER_ALIGN_COUNTER_MID_Y "125">
<!ENTITY COUNTER_MAX_PERIOD "`${EnablePeriodSwap ? (Period0 > Period1 ? Period0 : Period1) : Period0}`">

<!-- Separate compare lines for each triangle -->
<!ENTITY COMPARE1_Y "125">
<!ENTITY COMPARE1_CC1_Y "100">
<!ENTITY COMPARE2_Y "125">
<!ENTITY COMPARE2_CC1_Y "100">

<!-- Period lines on top of triangles -->
<!ENTITY PERIOD1_LINE_Y "60">
<!ENTITY PERIOD2_LINE_Y "60">

<!-- Error Message -->
<!ENTITY ERROR_MESSAGE_OPACITY "0" >
<!ENTITY COMPARE_ERROR_OPACITY "0" >
<!ENTITY PERIOD3_LINE_Y "45">
<!ENTITY PERIOD4_LINE_Y "45">

<!-- Main period line for single period mode -->
<!ENTITY MAIN_PERIOD_LINE_Y "45">
<!ENTITY MAIN_PERIOD_LEFT_X "80">
<!ENTITY MAIN_PERIOD_RIGHT_X "820">

<!-- Visibility controls -->
<!ENTITY SHOW_INDIVIDUAL_PERIODS "1.0">
<!ENTITY SHOW_MAIN_PERIOD "0.0">
<!ENTITY SHOW_INTERRUPT_TC "0.0">
<!ENTITY SHOW_INTERRUPT_CC0 "0.0">
<!ENTITY SHOW_INTERRUPT_CC1 "0.0">
<!ENTITY SHOW_CC1_LINES "1.0">

<!-- Period and compare values -->
<!ENTITY PERIOD1_VALUE "32768">
<!ENTITY PERIOD2_VALUE "32768">
<!ENTITY COMPARE1_VALUE "16384">
<!ENTITY COMPARE1_CC1_VALUE "16384">
<!ENTITY COMPARE2_VALUE "16384">
<!ENTITY COMPARE2_CC1_VALUE "16384">
<!ENTITY COMPARE1_LABEL "Compare 0">
<!ENTITY COMPARE1_CC1_LABEL "Compare 1">
<!ENTITY COMPARE2_LABEL "Compare 0">
<!ENTITY COMPARE2_CC1_LABEL "Compare 1">

<!-- DOT coordinates -->
<!ENTITY PWM_DOT1_X "250">
<!ENTITY PWM_DOT2_X "450">
<!ENTITY PWM_DOT1_CC1_X "220">
<!ENTITY PWM_DOT2_CC1_X "420">
<!ENTITY PWM_DOT3_X "650">
<!ENTITY PWM_DOT4_X "750">
<!ENTITY PWM_DOT3_CC1_X "620">
<!ENTITY PWM_DOT4_CC1_X "720">

<!-- DOT visibility controls (computed by personality) -->
<!ENTITY SHOW_COMPARE1_DOT "0.0">
<!ENTITY SHOW_COMPARE1_CC1_DOT "0.0">
<!ENTITY SHOW_COMPARE2_DOT "0.0">
<!ENTITY SHOW_COMPARE2_CC1_DOT "0.0">

<!-- Colors -->
<!ENTITY IFX_COLOR_BERRY400 "#BE3283" >
<!ENTITY IFX_COLOR_LAWN500 "#9BBA43" >
<!ENTITY IFX_COLOR_BLACK "#1D1D1D" >
]
>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 450" width="900" height="450" style="background: white;">
  <!-- Title -->
  <text x="400" y="20" font-family="Arial" font-size="16" fill="black">PWM Signal - Center Asymmetric Aligned</text>

  <defs>
    <marker id="arrow-up" markerWidth="15" markerHeight="15" refX="5" refY="3" orient="0">
      <polygon points="2,0 8,0 5,8" fill="black" stroke="black" stroke-width="0.5"/>
    </marker>
  </defs>

  <!-- Counter line: vertical dotted line showing timer from 0 (bottom) to max period (top) -->
  <line id="Counter" x1="&CENTER_ALIGN_COUNTER_X;" y1="&CENTER_ALIGN_COUNTER_BOTTOM_Y;" x2="&CENTER_ALIGN_COUNTER_X;" y2="&CENTER_ALIGN_COUNTER_TOP_Y;" stroke="black" stroke-width="2" stroke-dasharray="4,4" opacity="0.7" />
  <text x="&CENTER_ALIGN_COUNTER_X;" y="&CENTER_ALIGN_COUNTER_MID_Y;" font-family="Arial" font-size="10" fill="black" text-anchor="end" dx="-5" dy="0">counter</text>
  <text x="&CENTER_ALIGN_COUNTER_X;" y="&CENTER_ALIGN_COUNTER_TOP_Y;" font-family="Arial" font-size="9" fill="black" text-anchor="end" dx="-5" dy="10">&COUNTER_MAX_PERIOD;</text>
  <text x="&CENTER_ALIGN_COUNTER_X;" y="&CENTER_ALIGN_COUNTER_BOTTOM_Y;" font-family="Arial" font-size="9" fill="black" text-anchor="end" dx="-5" dy="15">0</text>

  <!-- Ramp lines (2 triangles with independent scaling) -->
  <!-- Triangle 1: Period0/Compare0 -->
  <line id="Ramp Line 1" x1="&TRIANGLE1_LEFT_X;" y1="190" x2="&TRIANGLE1_PEAK_X;" y2="&TRIANGLE1_PEAK_Y;" stroke="black" stroke-width="2" />
  <line id="Ramp Line 2" x1="&TRIANGLE1_PEAK_X;" y1="&TRIANGLE1_PEAK_Y;" x2="&TRIANGLE1_RIGHT_X;" y2="190" stroke="black" stroke-width="2" />
  
  <!-- Triangle 2: Period1/Compare1 -->
  <line id="Ramp Line 3" x1="&TRIANGLE2_LEFT_X;" y1="190" x2="&TRIANGLE2_PEAK_X;" y2="&TRIANGLE2_PEAK_Y;" stroke="black" stroke-width="2" />
  <line id="Ramp Line 4" x1="&TRIANGLE2_PEAK_X;" y1="&TRIANGLE2_PEAK_Y;" x2="&TRIANGLE2_RIGHT_X;" y2="190" stroke="black" stroke-width="2" />

  <!-- Compare lines for Triangle 1 (ALWAYS shows Compare0 and Compare2) -->
  <line x1="&TRIANGLE1_LEFT_X;" y1="&COMPARE1_Y;" x2="&TRIANGLE1_RIGHT_X;" y2="&COMPARE1_Y;" stroke="red" stroke-dasharray="3,3" stroke-width="1"/>
  <text x="&TRIANGLE1_LEFT_X;" y="&COMPARE1_Y;" font-family="Arial" font-size="10" fill="red" text-anchor="start" dx="5" dy="-12">&COMPARE1_LABEL;: &COMPARE1_VALUE;</text>
  
  <!-- Compare2 line for Triangle 1 (visible when CC1 is enabled) -->
  <line x1="&TRIANGLE1_LEFT_X;" y1="&COMPARE1_CC1_Y;" x2="&TRIANGLE1_RIGHT_X;" y2="&COMPARE1_CC1_Y;" stroke="orange" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_CC1_LINES;"/>
  <text x="&TRIANGLE1_LEFT_X;" y="&COMPARE1_CC1_Y;" font-family="Arial" font-size="10" fill="orange" text-anchor="start" dx="5" dy="-12" opacity="&SHOW_CC1_LINES;">&COMPARE1_CC1_LABEL;: &COMPARE1_CC1_VALUE;</text>
  
  <!-- Compare lines for Triangle 2 (shows Compare0/Compare2 or Compare1/Compare3 based on swap) -->
  <line x1="&TRIANGLE2_LEFT_X;" y1="&COMPARE2_Y;" x2="&TRIANGLE2_RIGHT_X;" y2="&COMPARE2_Y;" stroke="blue" stroke-dasharray="3,3" stroke-width="1"/>
  <text x="&TRIANGLE2_LEFT_X;" y="&COMPARE2_Y;" font-family="Arial" font-size="10" fill="blue" text-anchor="start" dx="5" dy="-12">&COMPARE2_LABEL;: &COMPARE2_VALUE;</text>
  
  <!-- CC1 line for Triangle 2 (visible when CC1 is enabled) -->
  <line x1="&TRIANGLE2_LEFT_X;" y1="&COMPARE2_CC1_Y;" x2="&TRIANGLE2_RIGHT_X;" y2="&COMPARE2_CC1_Y;" stroke="purple" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_CC1_LINES;"/>
  <text x="&TRIANGLE2_LEFT_X;" y="&COMPARE2_CC1_Y;" font-family="Arial" font-size="10" fill="purple" text-anchor="start" dx="5" dy="-12" opacity="&SHOW_CC1_LINES;">&COMPARE2_CC1_LABEL;: &COMPARE2_CC1_VALUE;</text>

  <!-- Main period line (visible when EnablePeriodSwap is false) -->
  <line x1="&MAIN_PERIOD_LEFT_X;" y1="&MAIN_PERIOD_LINE_Y;" x2="&MAIN_PERIOD_RIGHT_X;" y2="&MAIN_PERIOD_LINE_Y;" stroke="black" stroke-dasharray="3" stroke-width="1.5" opacity="&SHOW_MAIN_PERIOD;"/>
  <text x="450" y="&MAIN_PERIOD_LINE_Y;" font-family="Arial" font-size="12" fill="black" text-anchor="middle" dy="-9" opacity="&SHOW_MAIN_PERIOD;">Period: &PERIOD1_VALUE;</text>

  <!-- Individual period lines aligned with triangle peaks (visible when EnablePeriodSwap is true) -->
  <line x1="&TRIANGLE1_LEFT_X;" y1="&PERIOD1_LINE_Y;" x2="&TRIANGLE1_RIGHT_X;" y2="&PERIOD1_LINE_Y;" stroke="green" stroke-dasharray="3" stroke-width="1" opacity="&SHOW_INDIVIDUAL_PERIODS;"/>
  <line x1="&TRIANGLE2_LEFT_X;" y1="&PERIOD2_LINE_Y;" x2="&TRIANGLE2_RIGHT_X;" y2="&PERIOD2_LINE_Y;" stroke="purple" stroke-dasharray="3" stroke-width="1" opacity="&SHOW_INDIVIDUAL_PERIODS;"/>

  <!-- Individual period line labels positioned above the lines -->
  <text x="&TRIANGLE1_PEAK_X;" y="&PERIOD1_LINE_Y;" font-family="Arial" font-size="10" fill="green" text-anchor="middle" dy="-9" opacity="&SHOW_INDIVIDUAL_PERIODS;">Period0: &PERIOD1_VALUE;</text>
  <text x="&TRIANGLE2_PEAK_X;" y="&PERIOD2_LINE_Y;" font-family="Arial" font-size="10" fill="purple" text-anchor="middle" dy="-9" opacity="&SHOW_INDIVIDUAL_PERIODS;">Period1: &PERIOD2_VALUE;</text>

  <!-- Downward dashed markers from DOTs -->
  <!-- Triangle 1 Compare0 dots -->
  <line id="Line From Dot 1" x1="&PWM_DOT1_X;" y1="&COMPARE1_Y;" x2="&PWM_DOT1_X;" y2="&MARKS_Y_BOT;" stroke="red" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE1_DOT;"/>
  <line id="Line From Dot 2" x1="&PWM_DOT2_X;" y1="&COMPARE1_Y;" x2="&PWM_DOT2_X;" y2="&MARKS_Y_BOT;" stroke="red" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE1_DOT;"/>
  
  <!-- Triangle 1 Compare2 dots (visible when CC1 enabled AND compare<=period) -->
  <line id="Line From Dot 1 CC1" x1="&PWM_DOT1_CC1_X;" y1="&COMPARE1_CC1_Y;" x2="&PWM_DOT1_CC1_X;" y2="&MARKS_Y_BOT;" stroke="orange" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE1_CC1_DOT;"/>
  <line id="Line From Dot 2 CC1" x1="&PWM_DOT2_CC1_X;" y1="&COMPARE1_CC1_Y;" x2="&PWM_DOT2_CC1_X;" y2="&MARKS_Y_BOT;" stroke="orange" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE1_CC1_DOT;"/>
  
  <!-- Triangle 2 dots -->
  <line id="Line From Dot 3" x1="&PWM_DOT3_X;" y1="&COMPARE2_Y;" x2="&PWM_DOT3_X;" y2="&MARKS_Y_BOT;" stroke="blue" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE2_DOT;"/>
  <line id="Line From Dot 4" x1="&PWM_DOT4_X;" y1="&COMPARE2_Y;" x2="&PWM_DOT4_X;" y2="&MARKS_Y_BOT;" stroke="blue" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE2_DOT;"/>
  
  <!-- Triangle 2 CC1 dots (visible when CC1 enabled AND compare<=period) -->
  <line id="Line From Dot 3 CC1" x1="&PWM_DOT3_CC1_X;" y1="&COMPARE2_CC1_Y;" x2="&PWM_DOT3_CC1_X;" y2="&MARKS_Y_BOT;" stroke="purple" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE2_CC1_DOT;"/>
  <line id="Line From Dot 4 CC1" x1="&PWM_DOT4_CC1_X;" y1="&COMPARE2_CC1_Y;" x2="&PWM_DOT4_CC1_X;" y2="&MARKS_Y_BOT;" stroke="purple" stroke-dasharray="3,3" stroke-width="1" opacity="&SHOW_COMPARE2_CC1_DOT;"/>

  <!-- Compare intersection dots -->
  <!-- Triangle 1 Compare0 dots -->
  <circle id="Compare Dot 1" cx="&PWM_DOT1_X;" cy="&COMPARE1_Y;" r="3" fill="red" opacity="&SHOW_COMPARE1_DOT;" />
  <circle id="Compare Dot 2" cx="&PWM_DOT2_X;" cy="&COMPARE1_Y;" r="3" fill="red" opacity="&SHOW_COMPARE1_DOT;" />
  
  <!-- Triangle 1 Compare2 dots (visible when CC1 enabled AND compare<=period) -->
  <circle id="Compare Dot 1 CC1" cx="&PWM_DOT1_CC1_X;" cy="&COMPARE1_CC1_Y;" r="3" fill="orange" opacity="&SHOW_COMPARE1_CC1_DOT;" />
  <circle id="Compare Dot 2 CC1" cx="&PWM_DOT2_CC1_X;" cy="&COMPARE1_CC1_Y;" r="3" fill="orange" opacity="&SHOW_COMPARE1_CC1_DOT;" />
  
  <!-- Triangle 2 dots -->
  <circle id="Compare Dot 3" cx="&PWM_DOT3_X;" cy="&COMPARE2_Y;" r="3" fill="blue" opacity="&SHOW_COMPARE2_DOT;" />
  <circle id="Compare Dot 4" cx="&PWM_DOT4_X;" cy="&COMPARE2_Y;" r="3" fill="blue" opacity="&SHOW_COMPARE2_DOT;" />
  
  <!-- Triangle 2 CC1 dots (visible when CC1 enabled AND compare<=period) -->
  <circle id="Compare Dot 3 CC1" cx="&PWM_DOT3_CC1_X;" cy="&COMPARE2_CC1_Y;" r="3" fill="purple" opacity="&SHOW_COMPARE2_CC1_DOT;" />
  <circle id="Compare Dot 4 CC1" cx="&PWM_DOT4_CC1_X;" cy="&COMPARE2_CC1_Y;" r="3" fill="purple" opacity="&SHOW_COMPARE2_CC1_DOT;" />

  <!-- 4 Signal Lines in the Middle -->
  <text x="40" y="230" font-family="Arial" font-size="12" fill="black">overflow</text>
  <line id="Overflow" x1="50" y1="240" x2="850" y2="240" stroke="&IFX_COLOR_BERRY400;" stroke-width="2" />
  
  <text x="40" y="250" font-family="Arial" font-size="12" fill="black">underflow</text>
  <line id="Underflow" x1="50" y1="260" x2="850" y2="260" stroke="&IFX_COLOR_LAWN500;" stroke-width="2" />
  
  <text x="40" y="270" font-family="Arial" font-size="12" fill="black">tc</text>
  <line id="Terminal Count" x1="50" y1="280" x2="850" y2="280" stroke="#F97414" stroke-width="2" />
  
  <text x="40" y="290" font-family="Arial" font-size="12" fill="black">cc0_match</text>
  <line id="Compare Match" x1="50" y1="300" x2="850" y2="300" stroke="#06534B" stroke-width="2" />

  <text x="40" y="310" font-family="Arial" font-size="12" fill="black" opacity="&SHOW_CC1_LINES;">cc1_match</text>
  <line id="CC1 Compare Match" x1="50" y1="320" x2="850" y2="320" stroke="#FF6B35" stroke-width="2" opacity="&SHOW_CC1_LINES;" />

  <!-- O-V arrows to triangle peaks -->
  <circle id="OV Dot 1" cx="&RAMP_PEAK1_X;" cy="&OV_Y;" r="4" fill="black" />
  <circle id="OV Dot 2" cx="&RAMP_PEAK2_X;" cy="&OV_Y;" r="4" fill="black" />
  
  <!-- Interrupt indicators above overflow dots (when InterruptTC is enabled) -->
  <text x="&RAMP_PEAK1_X;" y="&OV_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_TC;" font-weight="bold">I</text>
  <text x="&RAMP_PEAK2_X;" y="&OV_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_TC;" font-weight="bold">I</text>

  <!-- Interrupt indicators above Compare0 dots (when InterruptCC0 is enabled) -->
  <text x="&PWM_DOT1_X;" y="&CM_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC0;" font-weight="bold">I</text>
  <text x="&PWM_DOT2_X;" y="&CM_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC0;" font-weight="bold">I</text>
  <text x="&PWM_DOT3_X;" y="&CM_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC0;" font-weight="bold">I</text>
  <text x="&PWM_DOT4_X;" y="&CM_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC0;" font-weight="bold">I</text>

  <!-- U-N arrows to triangle ends (center and right end) -->
  <circle id="UN Dot 1" cx="&TRIANGLE1_RIGHT_X;" cy="&UN_Y;" r="4" fill="black" />
  <circle id="UN Dot 2" cx="&TRIANGLE2_RIGHT_X;" cy="&UN_Y;" r="4" fill="black" />
  
  <!-- Interrupt indicators above underflow dots (when InterruptTC is enabled) -->
  <text x="&TRIANGLE1_RIGHT_X;" y="&UN_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_TC;" font-weight="bold">I</text>
  <text x="&TRIANGLE2_RIGHT_X;" y="&UN_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_TC;" font-weight="bold">I</text>

  <!-- Interrupt indicators above Compare1 dots (when InterruptCC1 is enabled) -->
  <text x="&PWM_DOT1_CC1_X;" y="&CM_CC1_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC1;" font-weight="bold">I</text>
  <text x="&PWM_DOT2_CC1_X;" y="&CM_CC1_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC1;" font-weight="bold">I</text>
  <text x="&PWM_DOT3_CC1_X;" y="&CM_CC1_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC1;" font-weight="bold">I</text>
  <text x="&PWM_DOT4_CC1_X;" y="&CM_CC1_Y;" font-family="Arial" font-size="12" fill="red" text-anchor="middle" dy="-20" opacity="&SHOW_INTERRUPT_CC1;" font-weight="bold">I</text>

  <!-- T-C arrows to triangle peaks and ends -->
  <circle id="TC Dot 1 End" cx="&TRIANGLE1_RIGHT_X;" cy="&TC_Y;" r="4" fill="black" />
  <circle id="TC Dot 2 End" cx="&TRIANGLE2_RIGHT_X;" cy="&TC_Y;" r="4" fill="black" />

  <!-- C-M arrows under DOTs -->
  <circle id="CM Dot 1" cx="&PWM_DOT1_X;" cy="&CM_Y;" r="4" fill="black" />
  <circle id="CM Dot 2" cx="&PWM_DOT2_X;" cy="&CM_Y;" r="4" fill="black" />
  <circle id="CM Dot 3" cx="&PWM_DOT3_X;" cy="&CM_Y;" r="4" fill="black" />
  <circle id="CM Dot 4" cx="&PWM_DOT4_X;" cy="&CM_Y;" r="4" fill="black" />

  <!-- CC1 Compare Match arrows under CC1 DOTs (visible when CC1 enabled) -->
  <circle id="CM CC1 Dot 1" cx="&PWM_DOT1_CC1_X;" cy="&CM_CC1_Y;" r="4" fill="black" opacity="&SHOW_CC1_LINES;" />
  <circle id="CM CC1 Dot 2" cx="&PWM_DOT2_CC1_X;" cy="&CM_CC1_Y;" r="4" fill="black" opacity="&SHOW_CC1_LINES;" />
  <circle id="CM CC1 Dot 3" cx="&PWM_DOT3_CC1_X;" cy="&CM_CC1_Y;" r="4" fill="black" opacity="&SHOW_CC1_LINES;" />
  <circle id="CM CC1 Dot 4" cx="&PWM_DOT4_CC1_X;" cy="&CM_CC1_Y;" r="4" fill="black" opacity="&SHOW_CC1_LINES;" />

  <!-- Waveform lines for center asymmetric CC0_CC1 PWM -->
  <!-- Line: Low before CC0, then HIGH from CC0 to CC1 (pulse width = CC1 - CC0), LOW after CC1 -->
  <text x="40" y="370" font-family="Arial" font-size="10" fill="black">line_out</text>
  <polyline points="&LINE_START_X;,&LINE_Y_L; &PWM_DOT1_X;,&LINE_Y_L; &PWM_DOT1_X;,&LINE_Y_H; &PWM_DOT2_CC1_X;,&LINE_Y_H; &PWM_DOT2_CC1_X;,&LINE_Y_L; &PWM_DOT3_X;,&LINE_Y_L; &PWM_DOT3_X;,&LINE_Y_H; &PWM_DOT4_CC1_X;,&LINE_Y_H; &PWM_DOT4_CC1_X;,&LINE_Y_L; &LINE_END_X;,&LINE_Y_L;" stroke="&IFX_COLOR_BERRY400;" fill="none" stroke-width="2"/>

  <!-- Complementary Line (line_n): HIGH before CC0, then LOW from CC0 to CC1, HIGH after CC1 -->
  <text x="40" y="440" font-family="Arial" font-size="10" fill="black">line_compl_out</text>
  <polyline points="50,&LINE_N_Y_H; &PWM_DOT1_X;,&LINE_N_Y_H; &PWM_DOT1_X;,&LINE_N_Y_L; &PWM_DOT2_CC1_X;,&LINE_N_Y_L; &PWM_DOT2_CC1_X;,&LINE_N_Y_H; &PWM_DOT3_X;,&LINE_N_Y_H; &PWM_DOT3_X;,&LINE_N_Y_L; &PWM_DOT4_CC1_X;,&LINE_N_Y_L; &PWM_DOT4_CC1_X;,&LINE_N_Y_H; 850,&LINE_N_Y_H;" stroke="&IFX_COLOR_LAWN500;" fill="none" stroke-width="2"/>

  <!-- Compare Error Message -->
  <g opacity="&COMPARE_ERROR_OPACITY;">
    <rect x="70" y="335" width="780" height="95" fill="white" stroke="red" stroke-width="2" rx="5"/>
    <text x="460" y="383" font-family="Arial" font-size="14" fill="red" text-anchor="middle">Compare value exceeds maximum counter width</text>
  </g>

  <!-- Error Message: Display when Period exceeds pCntWidthMax -->
  <g opacity="&ERROR_MESSAGE_OPACITY;">
    <!-- Full SVG white background overlay -->
    <rect x="0" y="0" width="900" height="500" fill="white" opacity="1"/>
    
    <!-- White background for error message -->
    <rect x="150" y="180" width="600" height="120" fill="white" stroke="red" stroke-width="2" rx="5"/>
    
    <!-- Error message text -->
    <text x="450" y="215" font-family="Arial" font-size="18" font-weight="bold" fill="red" text-anchor="middle">ERROR</text>
    <text x="450" y="245" font-family="Arial" font-size="14" fill="red" text-anchor="middle">Period value exceeds maximum counter width</text>
    <text x="450" y="270" font-family="Arial" font-size="14" fill="red" text-anchor="middle">Please reduce the Period value</text>
  </g>
</svg>